{"version":3,"file":"server.js","mappings":";;;;;;;;;AAAA;AACA,MAAMA,KAAK,GAAGC,mBAAO,CAAC,oBAAO,CAAC;AAC9B,MAAMC,kBAAkB,GAAGC,OAAO,CAACC,GAAG,CAACC,OAAO;AAC9C,MAAMC,UAAU,GAAG,CACjB;EACEC,QAAQ,EAAE,IAAI;EACdC,YAAY,EAAE,KAAK;EACnBC,OAAO,EAAE;AACX,CAAC,EACD;EACEF,QAAQ,EAAE,IAAI;EACdC,YAAY,EAAE,MAAM;EACpBC,OAAO,EAAE;AACX,CAAC,EACD;EACEF,QAAQ,EAAE,IAAI;EACdC,YAAY,EAAE,KAAK;EACnBC,OAAO,EAAE;AACX,CAAC,EACD;EACEF,QAAQ,EAAE,IAAI;EACdC,YAAY,EAAE,KAAK;EACnBC,OAAO,EAAE;AACX,CAAC,EACD;EACEF,QAAQ,EAAE,IAAI;EACdC,YAAY,EAAE,KAAK;EACnBC,OAAO,EAAE;AACX,CAAC,EACD;EACEF,QAAQ,EAAE,IAAI;EACdC,YAAY,EAAE,KAAK;EACnBC,OAAO,EAAE;AACX,CAAC,CACF;AACD,IAAIC,QAAQ,GAAG,EAAE;AACjB,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;EAC9B,KAAK,MAAMC,CAAC,IAAIN,UAAU,EAAE;IAC1B,MAAMO,WAAW,GAAG,MAAOC,MAAM,IAAK;MACpC,MAAMC,MAAM,GAAG;QACbC,MAAM,EAAE,MAAM;QACdC,GAAG,EAAE,0DAA0D;QAC/DC,OAAO,EAAE;UACPC,MAAM,EAAE,kBAAkB;UAC1BC,aAAa,EAAG,UAASlB,kBAAmB,EAAC;UAC7C,cAAc,EAAE;QAClB,CAAC;QACDmB,IAAI,EAAE;UACJb,YAAY,EAAEI,CAAC,CAACJ,YAAY;UAC5Bc,MAAM,EAAER;QACV;MACF,CAAC;MACD,MAAMS,QAAQ,GAAG,MAAMvB,KAAK,CAACe,MAAM,CAAC;MAEpC,IAAIH,CAAC,CAACJ,YAAY,KAAK,KAAK,EAAE;QAC5B,IAAI;UACF,MAAMgB,cAAc,GAAG,CACrB,KAAK,EACL,QAAQ,EACR,QAAQ,EACR,SAAS,EACT,OAAO,EACP,eAAe,EACf,eAAe,EACf,SAAS,EACT,OAAO,EACP,eAAe,EACf,aAAa,EACb,aAAa,EACb,aAAa,EACb,iBAAiB,EACjB,eAAe,EACf,gBAAgB,EAChB,gBAAgB,EAChB,aAAa,EACb,aAAa,EACb,eAAe,EACf,aAAa,EACb,gBAAgB,EAChB,eAAe,EACf,gBAAgB,EAChB,cAAc,EACd,eAAe,EACf,aAAa,CACd;UACD,MAAMC,aAAa,GAAGF,QAAQ,CAACF,IAAI,CAACK,KAAK,CAACC,MAAM,CAC7CC,IAAI,IAAK,CAACJ,cAAc,CAACK,QAAQ,CAACD,IAAI,CAACE,IAAI,CAC9C,CAAC;UACD,OAAOL,aAAa;QACtB,CAAC,CAAC,OAAOM,KAAK,EAAE;UACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;UAClB,OAAO,EAAE;QACX;MACF,CAAC,MAAM,IAAInB,CAAC,CAACJ,YAAY,KAAK,KAAK,EAAE;QACnC,IAAI;UACF,MAAMiB,aAAa,GAAGF,QAAQ,CAACF,IAAI,CAACK,KAAK,CAACC,MAAM,CAAEC,IAAI,IACpDA,IAAI,CAACM,KAAK,CAACL,QAAQ,CAAC,IAAI,CAC1B,CAAC;UACD,OAAOJ,aAAa;QACtB,CAAC,CAAC,OAAOM,KAAK,EAAE;UACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;UAClB,OAAO,EAAE;QACX;MACF,CAAC,MAAM,IAAInB,CAAC,CAACJ,YAAY,KAAK,KAAK,EAAE;QACnC,IAAI;UACF,MAAMiB,aAAa,GAAGF,QAAQ,CAACF,IAAI,CAACK,KAAK,CAACC,MAAM,CAC7CC,IAAI,IAAKA,IAAI,CAACO,WAAW,IAAI,EAChC,CAAC;UACD,OAAOV,aAAa;QACtB,CAAC,CAAC,OAAOM,KAAK,EAAE;UACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;UAClB,OAAO,EAAE;QACX;MACF,CAAC,MAAM;QACL,IAAI;UACF,OAAOR,QAAQ,CAACF,IAAI,CAACK,KAAK;QAC5B,CAAC,CAAC,OAAOK,KAAK,EAAE;UACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;UAClB,OAAO,EAAE;QACX;MACF;IACF,CAAC;IACD,MAAMK,KAAK,GAAIC,EAAE,IAAK,IAAIC,OAAO,CAAEC,OAAO,IAAKC,UAAU,CAACD,OAAO,EAAEF,EAAE,CAAC,CAAC;IAEvE,MAAMI,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,MAAMC,QAAQ,GAAG,EAAE;MACnB,KAAK,IAAI5B,MAAM,GAAG,CAAC,EAAEA,MAAM,IAAIF,CAAC,CAACH,OAAO,EAAEK,MAAM,EAAE,EAAE;QAClD,MAAMO,IAAI,GAAG,MAAMR,WAAW,CAACC,MAAM,CAAC;QACtC,IAAIO,IAAI,YAAYsB,KAAK,EAAE;UACzB,IAAItB,IAAI,CAACE,QAAQ,CAACqB,MAAM,KAAK,GAAG,EAAE;YAChC,MAAMR,KAAK,CAAC,KAAK,CAAC;YAClBS,CAAC,EAAE;UACL,CAAC,MAAM;YACL;UACF;QACF,CAAC,MAAM;UACLH,QAAQ,CAACI,IAAI,CAACzB,IAAI,CAAC;QACrB;;QAEA;MACF;MACA,IAAI;QACF,MAAM0B,YAAY,GAAG,MAAMT,OAAO,CAACU,GAAG,CAACN,QAAQ,CAAC;QAChD,MAAMO,IAAI,GAAGF,YAAY,CAACG,IAAI,CAAC,CAAC,CAAC,CAAC;QAClC,IAAIC,OAAO,GAAGF,IAAI;QAClBE,OAAO,CAACC,GAAG,CAAEP,CAAC,IAAMA,CAAC,CAACtC,QAAQ,GAAGK,CAAC,CAACL,QAAS,CAAC;QAC7C,IAAIK,CAAC,CAACJ,YAAY,KAAK,KAAK,EAAE;UAC5B,MAAM6C,SAAS,GAAG,CAChB,eAAe,EACf,eAAe,EACf,eAAe,CAChB;UACD,MAAMC,UAAU,GAAGL,IAAI,CAACtB,MAAM,CAAEf,CAAC,IAAKyC,SAAS,CAACxB,QAAQ,CAACjB,CAAC,CAACkB,IAAI,CAAC,CAAC;UACjE,IAAIyB,MAAM,GAAG,CAAC;UACdD,UAAU,CAACF,GAAG,CAAExC,CAAC,IAAK;YACpB2C,MAAM,IAAI3C,CAAC,CAAC4C,YAAY;UAC1B,CAAC,CAAC;UACF,MAAMC,GAAG,GAAGF,MAAM,GAAG,IAAI;UACzB,MAAMG,QAAQ,GAAG;YACfC,EAAE,EAAE,EAAE;YACNpD,QAAQ,EAAE,IAAI;YACduB,IAAI,EAAE,YAAY;YAClBI,KAAK,EAAE,IAAI;YACX0B,IAAI,EAAE,uEAAuE;YAC7EzB,WAAW,EAAE,CAAC;YACd0B,gBAAgB,EAAE,IAAI;YACtBL,YAAY,EAAEC,GAAG;YACjBK,WAAW,EAAE,CAAC;YACdC,eAAe,EAAE;UACnB,CAAC;UACDZ,OAAO,CAACL,IAAI,CAACY,QAAQ,CAAC;QACxB;QACAhD,QAAQ,GAAG,CAAC,GAAGA,QAAQ,EAAE,GAAGyC,OAAO,CAAC;MACtC,CAAC,CAAC,OAAOpB,KAAK,EAAE;QACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB;IACF,CAAC;IACD,MAAMU,SAAS,CAAC,CAAC;EACnB;EACA,OAAO/B,QAAQ;AACjB,CAAC;AACDsD,MAAM,CAACC,OAAO,GAAGtD,WAAW;;;;;;;;;;ACrL5B;AACA,MAAMX,KAAK,GAAGC,mBAAO,CAAC,oBAAO,CAAC;AAC9B,MAAMC,kBAAkB,GAAGC,OAAO,CAACC,GAAG,CAACC,OAAO;AAC9C,MAAMQ,WAAW,GAAG,MAAOC,MAAM,IAAK;EACpC,MAAMC,MAAM,GAAG;IACbC,MAAM,EAAE,MAAM;IACdC,GAAG,EAAE,2DAA2D;IAChEC,OAAO,EAAE;MACPC,MAAM,EAAE,kBAAkB;MAC1BC,aAAa,EAAG,UAASlB,kBAAmB,EAAC;MAC7C,cAAc,EAAE;IAClB,CAAC;IACDmB,IAAI,EAAE;MACJ6C,YAAY,EAAE,CAAC;MACfC,YAAY,EAAE,CAAC;MACfC,gBAAgB,EAAE,IAAI;MACtBC,YAAY,EAAE,CACZ;QACEC,WAAW,EAAE,IAAI;QACjBC,YAAY,EAAE,IAAI;QAClBC,QAAQ,EAAE,IAAI;QACdC,QAAQ,EAAE;MACZ,CAAC,CACF;MACDC,UAAU,EAAE,CACV;QACEJ,WAAW,EAAE,IAAI;QACjBC,YAAY,EAAE,IAAI;QAClBC,QAAQ,EAAE,IAAI;QACdC,QAAQ,EAAE;MACZ,CAAC,CACF;MACDE,IAAI,EAAE,gBAAgB;MACtBnE,YAAY,EAAE,MAAM;MACpBoE,cAAc,EAAE,EAAE;MAClBC,QAAQ,EAAE,CAAC;MACXC,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,KAAK;MACfzD,MAAM,EAAER,MAAM;MACdkE,aAAa,EAAE;IACjB;EACF,CAAC;EACD,IAAI;IACF,MAAMzD,QAAQ,GAAG,MAAMvB,KAAK,CAACe,MAAM,CAAC;IACpC,OAAOQ,QAAQ,CAACF,IAAI,CAACK,KAAK;EAC5B,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IAClB,OAAO,EAAE;EACX;AACF,CAAC;AACD,MAAMkD,OAAO,GAAG,MAAAA,CAAA,KAAY;EAC1B,MAAMvC,QAAQ,GAAG,EAAE;EACnB,KAAK,IAAI5B,MAAM,GAAG,CAAC,EAAEA,MAAM,IAAI,EAAE,EAAEA,MAAM,EAAE,EAAE;IAC3C4B,QAAQ,CAACI,IAAI,CAACjC,WAAW,CAACC,MAAM,CAAC,CAAC;EACpC;EACA,IAAI;IACF,MAAMiC,YAAY,GAAG,MAAMT,OAAO,CAACU,GAAG,CAACN,QAAQ,CAAC;IAChD,MAAMO,IAAI,GAAGF,YAAY,CAACG,IAAI,CAAC,CAAC,CAAC,CAAC;IAClC,MAAMC,OAAO,GAAGF,IAAI,CAACG,GAAG,CAAEP,CAAC,IAAKA,CAAC,CAACqC,WAAW,CAACC,QAAQ,CAAC;IACvD,MAAMC,GAAG,GAAGjC,OAAO,CAACkC,MAAM,CAAC,CAACC,KAAK,EAAEC,GAAG,KAAK;MACzC,IAAIA,GAAG,KAAK,IAAI,IAAIA,GAAG,GAAG,IAAI,EAAE;QAC9B,OAAOD,KAAK,GAAGC,GAAG;MACpB,CAAC,MAAM;QACL,OAAOD,KAAK;MACd;IACF,CAAC,EAAE,CAAC,CAAC;IACL,SAASE,oBAAoBA,CAACC,GAAG,EAAE;MACjC,IAAIC,KAAK,GAAG,CAAC;MACb,KAAK,IAAI7C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4C,GAAG,CAACE,MAAM,EAAE9C,CAAC,EAAE,EAAE;QACnC,IAAI4C,GAAG,CAAC5C,CAAC,CAAC,KAAK,IAAI,IAAI4C,GAAG,CAAC5C,CAAC,CAAC,GAAG,IAAI,EAAE;UACpC6C,KAAK,EAAE;QACT;MACF;MACA,OAAOA,KAAK;IACd;IACA,MAAME,YAAY,GAAGJ,oBAAoB,CAACrC,OAAO,CAAC;IAClD,MAAMM,GAAG,GAAG2B,GAAG,GAAGQ,YAAY;IAC9B,OAAOnC,GAAG;EACZ,CAAC,CAAC,OAAO1B,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IAClB,OAAO,EAAE;EACX;AACF,CAAC;AACD,eAAe8D,GAAGA,CAAA,EAAG;EACnB,MAAMpC,GAAG,GAAG,MAAMwB,OAAO,CAAC,CAAC;EAC3B,MAAMa,GAAG,GAAG,CACV;IACEnC,EAAE,EAAE,CAAC;IACLpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,IAAI;IACVI,KAAK,EAAE,IAAI;IACX0B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClBgC,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,CAAC;IACLpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACdI,KAAK,EAAE,IAAI;IACX0B,IAAI,EAAE,6JAA6J;IACnKzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC,CAAC;IAChBM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClBgC,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,CAAC;IACLpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACdI,KAAK,EAAE,IAAI;IACX0B,IAAI,EAAE,sEAAsE;IAC5EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAACC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAEuC,OAAO,CAAC,CAAC,CAAC;IAC9ClC,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClBgC,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,CAAC;IACLpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACdI,KAAK,EAAE,IAAI;IACX0B,IAAI,EAAE,sEAAsE;IAC5EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAACC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAEuC,OAAO,CAAC,CAAC,CAAC;IAC1ClC,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClBgC,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,CAAC;IACLpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACdI,KAAK,EAAE,IAAI;IACX0B,IAAI,EAAE,sEAAsE;IAC5EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAACC,GAAG,GAAG,CAAC,GAAG,CAAC,EAAEuC,OAAO,CAAC,CAAC,CAAC;IACtClC,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClBgC,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,CAAC;IACLpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACdI,KAAK,EAAE,IAAI;IACX0B,IAAI,EAAE,sEAAsE;IAC5EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAACC,GAAG,GAAG,CAAC,EAAEuC,OAAO,CAAC,CAAC,CAAC;IAClClC,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClBgC,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,CAAC;IACLpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACdI,KAAK,EAAE,IAAI;IACX0B,IAAI,EAAE,sEAAsE;IAC5EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAEC,GAAG,CAACuC,OAAO,CAAC,CAAC,CAAC;IAC5BlC,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClBgC,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,CAAC;IACLpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,OAAO;IACb8B,IAAI,EAAE,sEAAsE;IAC5EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,CAAC;IACLpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,OAAO;IACb8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACd8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACd8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACd8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,SAAS;IACf8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,OAAO;IACb8B,IAAI,EAAE,wEAAwE;IAC9EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,SAAS;IACf8B,IAAI,EAAE,wEAAwE;IAC9EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,aAAa;IACnB8B,IAAI,EAAE,wEAAwE;IAC9EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,aAAa;IACnB8B,IAAI,EAAE,wEAAwE;IAC9EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,YAAY;IAClB8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,YAAY;IAClB8B,IAAI,EAAE,sEAAsE;IAC5EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,OAAO;IACb8B,IAAI,EAAE,wEAAwE;IAC9EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACd8B,IAAI,EAAE,wEAAwE;IAC9EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,eAAe;IACrB8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,gBAAgB;IACtB8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACd8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACd8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,EACD;IACEpC,EAAE,EAAE,EAAE;IACNpD,QAAQ,EAAE,IAAI;IACduB,IAAI,EAAE,QAAQ;IACd8B,IAAI,EAAE,uEAAuE;IAC7EzB,WAAW,EAAE,CAAC;IACd0B,gBAAgB,EAAE,IAAI;IACtBL,YAAY,EAAE,CAAC;IACfM,WAAW,EAAE,CAAC;IACdC,eAAe,EAAE,CAAC;IAClB7B,KAAK,EAAE,IAAI;IACX6D,GAAG,EAAE;EACP,CAAC,CACF;EACD,OAAOD,GAAG;AACZ;AACA9B,MAAM,CAACC,OAAO,GAAG4B,GAAG;;;;;;;;;;AC3apB;AACA,MAAMI,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AACpC,MAAMD,KAAK,GAAGC,mBAAO,CAAC,oBAAO,CAAC;AAC9B,MAAMiG,YAAY,GAAGjG,mBAAO,CAAC,0DAAuB,CAAC;AACrD,MAAMkG,UAAU,GAAGlG,mBAAO,CAAC,8CAAiB,CAAC;AAC7CgG,QAAQ,CACLG,OAAO,CACL,iBAAgBjG,OAAO,CAACC,GAAG,CAACiG,OAAQ,IAAGlG,OAAO,CAACC,GAAG,CAACkG,WAAY,iCAAgCnG,OAAO,CAACC,GAAG,CAACmG,OAAQ,8BAA6B,EACjJ;EAAEC,eAAe,EAAE,IAAI;EAAEC,kBAAkB,EAAE;AAAK,CACpD,CAAC,CACAC,IAAI,CAAC,MAAM;EACV1E,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;AACzC,CAAC,CAAC,CACD0E,KAAK,CAAEC,GAAG,IAAK;EACd5E,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;EAC/CD,OAAO,CAACC,GAAG,CAAC2E,GAAG,CAAC;AAClB,CAAC,CAAC;AACJ,MAAM1G,kBAAkB,GAAGC,OAAO,CAACC,GAAG,CAACC,OAAO;;AAE9C;AACA;;AAEA;AACA;;AAEA,MAAMQ,WAAW,GAAG,MAAO8C,EAAE,IAAK;EAChC,MAAM5C,MAAM,GAAG;IACbC,MAAM,EAAE,KAAK;IACbC,GAAG,EAAG,4DAA2D0C,EAAG,EAAC;IACrEzC,OAAO,EAAE;MACPC,MAAM,EAAE,kBAAkB;MAC1BC,aAAa,EAAG,UAASlB,kBAAmB,EAAC;MAC7C,cAAc,EAAE;IAClB;EACF,CAAC;EACD,IAAI;IACF,IAAIqB,QAAQ,GAAG,MAAMvB,KAAK,CAACe,MAAM,CAAC;IAClC,OAAOQ,QAAQ,CAACF,IAAI;EACtB,CAAC,CAAC,OAAOU,KAAK,EAAE;IACd,OAAOA,KAAK;EACd;AACF,CAAC;AAED,MAAM8E,SAAS,GAAG,MAAAA,CAAA,KAAY;EAC5B,IAAI;IACF,MAAMC,MAAM,GAAG,MAAMX,UAAU,CAACY,IAAI,CAClC;MAAEpD,EAAE,EAAE;QAAEqD,GAAG,EAAE;MAAK;IAAE,CAAC,EACrB;MAAErD,EAAE,EAAE,CAAC;MAAEpD,QAAQ,EAAE,CAAC;MAAEuB,IAAI,EAAE;IAAE,CAChC,CAAC;IAED,MAAMM,KAAK,GAAIC,EAAE,IAAK,IAAIC,OAAO,CAAEC,OAAO,IAAKC,UAAU,CAACD,OAAO,EAAEF,EAAE,CAAC,CAAC;IAEvE,eAAe4E,oBAAoBA,CAACH,MAAM,EAAE;MAC1C,IAAIpE,QAAQ,GAAG,EAAE;MACjB,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGiE,MAAM,CAACnB,MAAM,EAAE9C,CAAC,EAAE,EAAE;QACtC,MAAMxB,IAAI,GAAG,MAAMR,WAAW,CAACiG,MAAM,CAACjE,CAAC,CAAC,CAACc,EAAE,CAAC;QAC5C,IAAItC,IAAI,YAAYsB,KAAK,EAAE;UACzB,IAAItB,IAAI,CAACE,QAAQ,CAACqB,MAAM,KAAK,GAAG,EAAE;YAChC,MAAMR,KAAK,CAAC,KAAK,CAAC;YAClBS,CAAC,EAAE;UACL,CAAC,MAAM;YACL;UACF;QACF,CAAC,MAAM;UACLH,QAAQ,CAACI,IAAI,CAACzB,IAAI,CAAC;QACrB;;QAEA;QACA;QACA;QACA;QACA;MACF;MACA;MACA,MAAM6F,KAAK,GAAGxE,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAC7B;MACAgE,KAAK,CAAC9D,GAAG,CACN+D,CAAC,IAAMA,CAAC,CAAC5G,QAAQ,GAAGuG,MAAM,CAACC,IAAI,CAAEK,CAAC,IAAKA,CAAC,CAACtF,IAAI,IAAIqF,CAAC,CAACrF,IAAI,CAAC,CAACvB,QAC5D,CAAC;MACD,KAAK,MAAM0C,IAAI,IAAIiE,KAAK,EAAE;QACxB,MAAMvF,MAAM,GAAG;UAAEG,IAAI,EAAEmB,IAAI,CAACnB;QAAK,CAAC;QAClC,MAAMuF,WAAW,GAAG,MAAMnB,YAAY,CAACoB,OAAO,CAAC3F,MAAM,CAAC;QACtD,IAAI0F,WAAW,EAAE;UACf,MAAME,gBAAgB,GAAGF,WAAW,CAACG,KAAK,GAAGH,WAAW,CAACG,KAAK,GAAG,EAAE;UACnE,MAAMC,SAAS,GAAGxE,IAAI,CAACuE,KAAK,GAAGvE,IAAI,CAACuE,KAAK,GAAG,EAAE;UAC9CC,SAAS,CAACC,OAAO,CAAEC,QAAQ,IAAK;YAC9B,MAAMC,iBAAiB,GAAGL,gBAAgB,CAACM,SAAS,CACjDC,IAAI,IAAKA,IAAI,CAACC,IAAI,KAAKJ,QAAQ,CAACI,IACnC,CAAC;YACD,IAAIH,iBAAiB,KAAK,CAAC,CAAC,EAAE;cAC5BL,gBAAgB,CAACK,iBAAiB,CAAC,GAAGD,QAAQ;YAChD,CAAC,MAAM;cACLJ,gBAAgB,CAACzE,IAAI,CAAC6E,QAAQ,CAAC;YACjC;UACF,CAAC,CAAC;UACF,MAAMK,eAAe,GAAG,MAAM9B,YAAY,CAAC+B,gBAAgB,CACzDtG,MAAM,EACN;YACEuG,IAAI,EAAE;cACJV,KAAK,EAAED,gBAAgB,CAACY,IAAI,CAC1B,CAAChB,CAAC,EAAEC,CAAC,KAAK,IAAIW,IAAI,CAACX,CAAC,CAACW,IAAI,CAAC,GAAG,IAAIA,IAAI,CAACZ,CAAC,CAACY,IAAI,CAC9C;YACF;UACF,CAAC,EACD;YAAEK,GAAG,EAAE;UAAK,CACd,CAAC;QACH,CAAC,MAAM;UACL,MAAMC,WAAW,GAAG,MAAMnC,YAAY,CAACoC,MAAM,CAACrF,IAAI,CAAC;QACrD;MACF;MACAjB,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;IACrB;IACAgF,oBAAoB,CAACH,MAAM,CAAC;EAC9B,CAAC,CAAC,OAAO/E,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IAClB,OAAO,EAAE;EACX;AACF,CAAC;AAEDiC,MAAM,CAACC,OAAO,GAAG4C,SAAS;;;;;;;;;;ACvH1B;AACA,MAAMZ,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AACpC,MAAMkG,UAAU,GAAGlG,mBAAO,CAAC,8CAAiB,CAAC;AAC7C,MAAMU,WAAW,GAAGV,mBAAO,CAAC,qDAAc,CAAC;AAC3C,MAAM4F,GAAG,GAAG5F,mBAAO,CAAC,+CAAW,CAAC,CAAC,CAAC;AAClC,MAAM4G,SAAS,GAAG5G,mBAAO,CAAC,mDAAa,CAAC;AACxCgG,QAAQ,CACLG,OAAO,CACL,iBAAgBjG,OAAO,CAACC,GAAG,CAACiG,OAAQ,IAAGlG,OAAO,CAACC,GAAG,CAACkG,WAAY,iCAAgCnG,OAAO,CAACC,GAAG,CAACmG,OAAQ,8BAA6B,EACjJ;EAAEC,eAAe,EAAE,IAAI;EAAEC,kBAAkB,EAAE;AAAK,CACpD,CAAC,CACAC,IAAI,CAAC,MAAM;EACV1E,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;EACvCsG,kBAAkB,CAAC,CAAC;AACtB,CAAC,CAAC,CACD5B,KAAK,CAAEC,GAAG,IAAK;EACd5E,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;EAC/CD,OAAO,CAACC,GAAG,CAAC2E,GAAG,CAAC;AAClB,CAAC,CAAC;AAEJ,eAAe2B,kBAAkBA,CAAA,EAAG;EAClC,IAAI;IACF,MAAMC,YAAY,GAAG,MAAM7H,WAAW,CAAC,CAAC;IACxC,MAAM8H,OAAO,GAAG,MAAM5C,GAAG,CAAC,CAAC,CAAC,CAAC;IAC7B,MAAM6C,QAAQ,GAAG,CAAC,GAAGF,YAAY,EAAE,GAAGC,OAAO,CAAC;IAC9C,MAAMtC,UAAU,CAACwC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjC,MAAMxC,UAAU,CAACyC,UAAU,CAACF,QAAQ,CAAC;IACrClG,UAAU,CAAC,MAAMqE,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC;EACtC,CAAC,CAAC,OAAO9E,KAAK,EAAE;IACdC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EACpB;AACF;AACAiC,MAAM,CAACC,OAAO,GAAGsE,kBAAkB;;;;;;;;;;AChCnC,MAAMtC,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AAEpC,MAAM4I,iBAAiB,GAAG,IAAI5C,QAAQ,CAAC6C,MAAM,CAAC;EAC5CC,GAAG,EAAEC,MAAM;EACXC,WAAW,EAAE;IACXC,IAAI,EAAEnB,IAAI;IACVoB,OAAO,EAAE,IAAI;IACbC,OAAO,EAAErB,IAAI,CAACsB;EAChB;AACF,CAAC,CAAC;AACF;AACA,MAAMC,WAAW,GAAGrD,QAAQ,CAACsD,KAAK,CAAC,aAAa,EAAEV,iBAAiB,CAAC;AACpES,WAAW,CAACE,UAAU,CAACC,WAAW,CAChC;EAAER,WAAW,EAAE;AAAE,CAAC,EAClB;EAAES,kBAAkB,EAAE;AAAE,CAC1B,CAAC;AACD;;AAEA1F,MAAM,CAACC,OAAO,GAAGqF,WAAW;;;;;;;;;;AClB5B,MAAMrD,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;;AAEpC;;AAEA,MAAM0J,aAAa,GAAG,IAAI1D,QAAQ,CAAC6C,MAAM,CAAC;EACxCc,IAAI,EAAE7B,IAAI;EACV8B,QAAQ,EAAEb,MAAM;EAChBc,EAAE,EAAEd,MAAM;EACV;EACAe,OAAO,EAAEf,MAAM;EACfC,WAAW,EAAE;IACXC,IAAI,EAAEnB,IAAI;IACVoB,OAAO,EAAE,KAAK;IAAE;IAChBC,OAAO,EAAEA,CAAA,KAAMrB,IAAI,CAACsB,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAE;EACnD;AACF,CAAC,CAAC;AACF;AACA,MAAMW,OAAO,GAAG/D,QAAQ,CAACsD,KAAK,CAAC,SAAS,EAAEI,aAAa,CAAC;AACxD;;AAEA3F,MAAM,CAACC,OAAO,GAAG+F,OAAO;;;;;;;;;;ACpBxB,MAAM/D,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AAEpC,MAAMgK,aAAa,GAAG,IAAIhE,QAAQ,CAAC6C,MAAM,CAAC;EACxCoB,GAAG,EAAE;IACHhB,IAAI,EAAE,CAACF,MAAM;EACf,CAAC;EACDmB,KAAK,EAAE;IACLjB,IAAI,EAAE,CAACF,MAAM;EACf,CAAC;EACDoB,MAAM,EAAE;IACNlB,IAAI,EAAE,CAACF,MAAM;EACf,CAAC;EACDqB,QAAQ,EAAE;IACRnB,IAAI,EAAE,CAACF,MAAM;EACf,CAAC;EACDlB,IAAI,EAAE;IACJoB,IAAI,EAAEoB,MAAM;IACZlB,OAAO,EAAE,CAAC;EACZ,CAAC;EACDmB,KAAK,EAAE;IACLrB,IAAI,EAAEoB,MAAM;IACZlB,OAAO,EAAE,CAAC;EACZ,CAAC;EACDoB,OAAO,EAAE;IACPtB,IAAI,EAAEoB,MAAM;IACZlB,OAAO,EAAE,CAAC;EACZ,CAAC;EACDqB,QAAQ,EAAE;IACRvB,IAAI,EAAE,CAACF,MAAM;EACf;AACF,CAAC,CAAC;AACF,MAAM0B,kBAAkB,GAAG,IAAIzE,QAAQ,CAAC6C,MAAM,CAAC;EAC7C6B,EAAE,EAAE3B,MAAM;EACV4B,IAAI,EAAE,CAACX,aAAa;AACtB,CAAC,CAAC;AAEF,MAAMY,OAAO,GAAG5E,QAAQ,CAACsD,KAAK,CAAC,SAAS,EAAEmB,kBAAkB,CAAC;AAE7D1G,MAAM,CAACC,OAAO,GAAG4G,OAAO;;;;;;;;;;ACtCxB,MAAM5E,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AAEpC,MAAM6K,UAAU,GAAG,IAAI7E,QAAQ,CAAC6C,MAAM,CACpC;EACEnF,EAAE,EAAEoH,MAAM;EACVxK,QAAQ,EAAEyI,MAAM;EAChBlH,IAAI,EAAEkH,MAAM;EACZ9G,KAAK,EAAE8G,MAAM;EACbpF,IAAI,EAAEoF,MAAM;EACZ7G,WAAW,EAAE4I,MAAM;EACnBlH,gBAAgB,EAAEkH,MAAM;EACxBvH,YAAY,EAAEuH,MAAM;EACpBjH,WAAW,EAAEiH,MAAM;EACnBhH,eAAe,EAAEgH,MAAM;EACvBC,QAAQ,EAAED,MAAM;EAChBE,SAAS,EAAEF;AACb,CAAC,EACD;EAAEb,GAAG,EAAE;AAAM,CACf,CAAC,CAAC,CAAC;AACH,MAAMgB,kBAAkB,GAAG,IAAIjF,QAAQ,CAAC6C,MAAM,CAAC;EAC7CoB,GAAG,EAAE;IAAEhB,IAAI,EAAEF,MAAM;IAAEmC,QAAQ,EAAE;EAAM,CAAC;EACtCC,KAAK,EAAEpC,MAAM;EACbqC,IAAI,EAAE,CAACP,UAAU,CAAC;EAClBvK,QAAQ,EAAEyI,MAAM;EAChB2B,EAAE,EAAE;IAAEzB,IAAI,EAAEF,MAAM;IAAEmC,QAAQ,EAAE;EAAM;AACtC,CAAC,CAAC;AAEF,MAAMG,UAAU,GAAGrF,QAAQ,CAACsD,KAAK,CAAC,YAAY,EAAE2B,kBAAkB,CAAC;AAEnElH,MAAM,CAACC,OAAO,GAAGqH,UAAU;;;;;;;;;;AC7B3B;;AAEA,MAAMrF,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AAEpC,MAAMsL,gBAAgB,GAAG,IAAItF,QAAQ,CAAC6C,MAAM,CAAC;EAC3CnF,EAAE,EAAEoH,MAAM;EACVxK,QAAQ,EAAEyI,MAAM;EAChBlH,IAAI,EAAEkH,MAAM;EACZ9G,KAAK,EAAE8G,MAAM;EACbpF,IAAI,EAAEoF,MAAM;EACZ7G,WAAW,EAAE4I,MAAM;EACnBlH,gBAAgB,EAAEkH,MAAM;EAAE;EAC1BvH,YAAY,EAAEuH,MAAM;EACpBjH,WAAW,EAAEiH,MAAM;EACnBhH,eAAe,EAAEgH;AACnB,CAAC,CAAC;AAEF,MAAM5E,UAAU,GAAGF,QAAQ,CAACsD,KAAK,CAAC,MAAM,EAAEgC,gBAAgB,CAAC;AAE3DvH,MAAM,CAACC,OAAO,GAAGkC,UAAU;;;;;;;;;;ACnB3B,MAAMF,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AAEpC,MAAMuL,YAAY,GAAG,IAAIvF,QAAQ,CAAC6C,MAAM,CAAC;EACvCsC,KAAK,EAAEpC,MAAM;EACbyC,IAAI,EAAEzC;AACR,CAAC,CAAC;AAEF,MAAM0C,MAAM,GAAGzF,QAAQ,CAACsD,KAAK,CAAC,QAAQ,EAAEiC,YAAY,CAAC;AAErDxH,MAAM,CAACC,OAAO,GAAGyH,MAAM;;;;;;;;;;ACTvB,MAAMzF,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AAEpC,MAAM0L,UAAU,GAAG,IAAI1F,QAAQ,CAAC6C,MAAM,CAAC;EACrC8C,SAAS,EAAE;IAAE1C,IAAI,EAAEF,MAAM;IAAEmC,QAAQ,EAAE,KAAK;IAAEU,SAAS,EAAE;EAAG,CAAC;EAC3DC,QAAQ,EAAE;IAAE5C,IAAI,EAAEF,MAAM;IAAEmC,QAAQ,EAAE,KAAK;IAAEU,SAAS,EAAE;EAAK,CAAC;EAC5DtL,QAAQ,EAAEyI,MAAM;EAChB+C,SAAS,EAAE/C,MAAM;EACjBkB,GAAG,EAAElB,MAAM;EACX2B,EAAE,EAAE;IAAEzB,IAAI,EAAEF,MAAM;IAAEmC,QAAQ,EAAE,KAAK;IAAEU,SAAS,EAAE;EAAG,CAAC;EACpD9D,IAAI,EAAEA,IAAI;EACViE,MAAM,EAAE;IAAE9C,IAAI,EAAEF,MAAM;IAAEmC,QAAQ,EAAE,KAAK;IAAEU,SAAS,EAAE;EAAG,CAAC;EACxDI,YAAY,EAAE;IAAE/C,IAAI,EAAEF,MAAM;IAAEmC,QAAQ,EAAE,KAAK;IAAEU,SAAS,EAAE;EAAG;AAC/D,CAAC,CAAC;AACF,MAAMK,IAAI,GAAGjG,QAAQ,CAACsD,KAAK,CAAC,MAAM,EAAEoC,UAAU,CAAC;AAC/C3H,MAAM,CAACC,OAAO,GAAGiI,IAAI;;;;;;;;;;ACdrB,MAAMjG,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AAEpC,MAAM6I,MAAM,GAAG7C,QAAQ,CAAC6C,MAAM;;AAE9B;AACA,MAAMqD,kBAAkB,GAAG,IAAIrD,MAAM,CAAC;EACpCvI,QAAQ,EAAE;IACR2I,IAAI,EAAEF;IACN;EACF,CAAC;EACDlH,IAAI,EAAE;IACJoH,IAAI,EAAEF;IACN;EACF,CAAC;EACDnF,gBAAgB,EAAE;IAChBqF,IAAI,EAAE6B,MAAM;IACZ3B,OAAO,EAAE,IAAI,CAAE;EACjB,CAAC;EACDjH,WAAW,EAAE;IACX+G,IAAI,EAAE6B;IACN;EACF,CAAC;EACDvD,KAAK,EAAE;IACL0B,IAAI,EAAE,CAACoB,MAAM,CAAC,CAAE;EAClB;AACF,CAAC,CAAC;;AAEF;AACA,MAAMpE,YAAY,GAAGD,QAAQ,CAACsD,KAAK,CAAC,cAAc,EAAE4C,kBAAkB,CAAC;AAEvEnI,MAAM,CAACC,OAAO,GAAGiC,YAAY;;;;;;;;;;AC9B7B,MAAMD,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AAEpC,MAAMmM,UAAU,GAAG,IAAInG,QAAQ,CAAC6C,MAAM,CAAC;EACrC6B,EAAE,EAAE;IACFzB,IAAI,EAAEF,MAAM;IACZ6C,SAAS,EAAE;EACb,CAAC;EACDQ,QAAQ,EAAE;IACRnD,IAAI,EAAEF,MAAM;IACZ6C,SAAS,EAAE;EACb,CAAC;EACDS,QAAQ,EAAE;IACRpD,IAAI,EAAEF,MAAM;IACZ6C,SAAS,EAAE;EACb,CAAC;EACDU,MAAM,EAAE;IACNrD,IAAI,EAAEF,MAAM;IACZ6C,SAAS,EAAE;EACb,CAAC;EACDW,IAAI,EAAExD;AACR,CAAC,CAAC;AAEF,MAAMyD,IAAI,GAAGxG,QAAQ,CAACsD,KAAK,CAAC,MAAM,EAAE6C,UAAU,CAAC;AAE/CpI,MAAM,CAACC,OAAO,GAAGwI,IAAI;;;;;;;;;;ACxBrB,MAAMxG,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AAEpC,MAAMyM,aAAa,GAAG,IAAIzG,QAAQ,CAAC6C,MAAM,CAAC;EACxCf,IAAI,EAAEiB,MAAM;EACZ2D,UAAU,EAAE5B;AACd,CAAC,CAAC;AAEF,MAAM6B,OAAO,GAAG3G,QAAQ,CAACsD,KAAK,CAAC,SAAS,EAAEmD,aAAa,CAAC;AAExD1I,MAAM,CAACC,OAAO,GAAG2I,OAAO;;;;;;;;;;;ACTxB;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;ACtBA;AACA,MAAMC,OAAO,GAAG5M,mBAAO,CAAC,wBAAS,CAAC;AAClC,MAAM6M,IAAI,GAAG7M,mBAAO,CAAC,kBAAM,CAAC;AAC5B,MAAM8M,GAAG,GAAGF,OAAO,CAAC,CAAC;AAErB,MAAM;EAAEG;AAAa,CAAC,GAAG/M,mBAAO,CAAC,kBAAM,CAAC;AACxC,MAAM;EAAEgN;AAAO,CAAC,GAAGhN,mBAAO,CAAC,4BAAW,CAAC;AAEvC,IAAIiN,IAAI,GAAGC,aAAa,CAAChN,OAAO,CAACC,GAAG,CAACgN,IAAI,IAAI,MAAM,CAAC;AACpDL,GAAG,CAACM,GAAG,CAAC,MAAM,EAAEH,IAAI,CAAC;AAErB,IAAII,KAAK,GAAGrN,mBAAO,CAAC,oBAAO,CAAC,CAAC,cAAc,CAAC;AAC5C;AACA;AACA,IAAIsN,UAAU,GAAGP,YAAY,CAACD,GAAG,CAAC;AAElCQ,UAAU,CAACC,EAAE,CAAC,OAAO,EAAEC,OAAO,CAAC;AAC/BF,UAAU,CAACC,EAAE,CAAC,WAAW,EAAEE,WAAW,CAAC;AAEvC,MAAMzH,QAAQ,GAAGhG,mBAAO,CAAC,0BAAU,CAAC;AACpC,MAAMkG,UAAU,GAAGlG,mBAAO,CAAC,iDAAoB,CAAC;AAChD,MAAM+J,OAAO,GAAG/J,mBAAO,CAAC,mDAAqB,CAAC;AAE9C,MAAMqL,UAAU,GAAGrL,mBAAO,CAAC,6CAAkB,CAAC;AAC9C,MAAMiM,IAAI,GAAGjM,mBAAO,CAAC,6CAAkB,CAAC;AACxC,MAAMwM,IAAI,GAAGxM,mBAAO,CAAC,6CAAkB,CAAC;AACxC,MAAMyL,MAAM,GAAGzL,mBAAO,CAAC,iDAAoB,CAAC;AAC5C,MAAM0N,OAAO,GAAG1N,mBAAO,CAAC,mDAAqB,CAAC;AAC9C,MAAMiG,YAAY,GAAGjG,mBAAO,CAAC,6DAA0B,CAAC;AACxD,MAAMqJ,WAAW,GAAGrJ,mBAAO,CAAC,2DAAyB,CAAC;AACtD,MAAM2M,OAAO,GAAG3M,mBAAO,CAAC,mDAAqB,CAAC;AAC9CA,oDAAwB,CAAC,CAAC;AAC1B,MAAM2N,QAAQ,GAAG3N,mBAAO,CAAC,0BAAU,CAAC;AACpC,MAAM4N,WAAW,GAAG5N,mBAAO,CAAC,kCAAc,CAAC;AAC3C,MAAM6N,WAAW,GAAGD,WAAW,CAACE,QAAQ;AACxC,MAAMC,UAAU,GAAGH,WAAW,CAACG,UAAU;AACzC,MAAMC,GAAG,GAAGhO,mBAAO,CAAC,kCAAc,CAAC;AACnC,MAAMiO,OAAO,GAAGjO,mBAAO,CAAC,wBAAS,CAAC;AAClC,IAAIkO,YAAY,GAAGlO,mBAAO,CAAC,oCAAe,CAAC;AAC3C,IAAImO,MAAM,GAAGnO,mBAAO,CAAC,sBAAQ,CAAC;AAC9B,MAAMoO,QAAQ,GAAGpO,mBAAO,CAAC,0BAAU,CAAC;AACpC,MAAMqO,IAAI,GAAGrO,mBAAO,CAAC,kBAAM,CAAC;AAC5B,MAAMsO,UAAU,GAAGtO,mBAAO,CAAC,gCAAa,CAAC;AACzC,MAAMD,KAAK,GAAGC,mBAAO,CAAC,oBAAO,CAAC;AAC9B,MAAMsI,kBAAkB,GAAGtI,mBAAO,CAAC,6DAA0B,CAAC;AAE9D8M,GAAG,CAACyB,GAAG,CAACD,UAAU,CAACE,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAM,CAAC,CAAC,CAAC;AACnD3B,GAAG,CAACyB,GAAG,CAACD,UAAU,CAACI,IAAI,CAAC,CAAC,CAAC;AAC1B5B,GAAG,CAACyB,GAAG,CAAC3B,OAAO,CAAC8B,IAAI,CAAC,CAAC,CAAC;AACvB5B,GAAG,CAACyB,GAAG,CAACZ,QAAQ,CAACgB,UAAU,CAAC,CAAC,CAAC;AAC9B7B,GAAG,CAACyB,GAAG,CAACJ,MAAM,CAAC,KAAK,CAAC,CAAC;AACtBrB,GAAG,CAACyB,GAAG,CAAC3B,OAAO,CAAC4B,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAM,CAAC,CAAC,CAAC;AAChD3B,GAAG,CAACyB,GAAG,CAACL,YAAY,CAAC,CAAC,CAAC;AACvBpB,GAAG,CAACyB,GAAG,CACL1B,IAAI,CAAC;EACH+B,MAAM,EAAE,CACN,uBAAuB,EACvB,8BAA8B,EAC9B,8DAA8D,EAC9D,+DAA+D,EAC/D,qCAAqC,EACrC,4CAA4C,CAC7C;EACDC,WAAW,EAAE;AACf,CAAC,CACH,CAAC;AAED7I,QAAQ,CACLG,OAAO,CACL,iBAAgBjG,OAAO,CAACC,GAAG,CAACiG,OAAQ,IAAGlG,OAAO,CAACC,GAAG,CAACkG,WAAY,iCAAgCnG,OAAO,CAACC,GAAG,CAACmG,OAAQ,8BACtH,CAAC,CACAG,IAAI,CAAC,MAAM;EACV1E,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;AACzC,CAAC,CAAC,CACD0E,KAAK,CAAEC,GAAG,IAAK;EACd5E,OAAO,CAACC,GAAG,CAAC,kCAAkC,CAAC;EAC/CD,OAAO,CAACC,GAAG,CAAC2E,GAAG,CAAC;AAClB,CAAC,CAAC;AAEJ,SAASuG,aAAaA,CAAC4B,GAAG,EAAE;EAC1B,IAAI7B,IAAI,GAAG8B,QAAQ,CAACD,GAAG,EAAE,EAAE,CAAC;EAE5B,IAAIE,KAAK,CAAC/B,IAAI,CAAC,EAAE;IACf;IACA,OAAO6B,GAAG;EACZ;EAEA,IAAI7B,IAAI,IAAI,CAAC,EAAE;IACb;IACA,OAAOA,IAAI;EACb;EAEA,OAAO,KAAK;AACd;AAEA,SAASO,OAAOA,CAAC1L,KAAK,EAAE;EACtB,IAAIA,KAAK,CAACmN,OAAO,KAAK,QAAQ,EAAE;IAC9B,MAAMnN,KAAK;EACb;EAEA,IAAIoN,IAAI,GAAG,OAAOjC,IAAI,KAAK,QAAQ,GAAG,OAAO,GAAGA,IAAI,GAAG,OAAO,GAAGA,IAAI;;EAErE;EACA,QAAQnL,KAAK,CAACqN,IAAI;IAChB,KAAK,QAAQ;MACXpN,OAAO,CAACD,KAAK,CAACoN,IAAI,GAAG,+BAA+B,CAAC;MACrDhP,OAAO,CAACkP,IAAI,CAAC,CAAC,CAAC;MACf;IACF,KAAK,YAAY;MACfrN,OAAO,CAACD,KAAK,CAACoN,IAAI,GAAG,oBAAoB,CAAC;MAC1ChP,OAAO,CAACkP,IAAI,CAAC,CAAC,CAAC;MACf;IACF;MACE,MAAMtN,KAAK;EACf;AACF;AAEA,SAAS2L,WAAWA,CAAA,EAAG;EACrB,IAAI4B,IAAI,GAAG/B,UAAU,CAACgC,OAAO,CAAC,CAAC;EAC/B,IAAIJ,IAAI,GAAG,OAAOG,IAAI,KAAK,QAAQ,GAAG,OAAO,GAAGA,IAAI,GAAG,OAAO,GAAGA,IAAI,CAACpC,IAAI;EAC1EI,KAAK,CAAC,eAAe,GAAG6B,IAAI,CAAC;AAC/B;AAEA,MAAMK,UAAU,GAAG;EACjBC,cAAc,EAAEzB,UAAU,CAAC0B,2BAA2B,CAAC,CAAC;EACxDC,WAAW,EAAExP,OAAO,CAACC,GAAG,CAACwP;AAC3B,CAAC;AAED,MAAMC,QAAQ,GAAG,IAAI/B,WAAW,CAAC0B,UAAU,EAAE,OAAOM,WAAW,EAAEC,IAAI,KAAK;EACxE,IAAI;IACF,MAAMC,YAAY,GAAG,MAAMvD,IAAI,CAACnF,OAAO,CAAC;MAAEqD,EAAE,EAAEmF,WAAW,CAACnF;IAAG,CAAC,CAAC;IAE/D,IAAIqF,YAAY,EAAE;MAChB,OAAOD,IAAI,CAAC,IAAI,EAAEC,YAAY,CAAC;IACjC,CAAC,MAAM;MACL,OAAOD,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;IAC1B;EACF,CAAC,CAAC,OAAOhO,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAA2B,CAAC,CAAC;EAC7D;AACF,CAAC,CAAC;AACF6L,QAAQ,CAACY,GAAG,CAACqB,QAAQ,CAAC;;AAEtB;AACA,MAAMK,iBAAiB,GAAGA,CAACC,GAAG,EAAEF,GAAG,EAAEG,IAAI,KAAK;EAC5C,MAAMC,KAAK,GAAGF,GAAG,CAACG,OAAO,CAACD,KAAK;EAE/B,IAAI,CAACA,KAAK,EAAE;IACV,OAAOJ,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5E,OAAO,EAAE;IAAwB,CAAC,CAAC;EACnE;EAEAkE,GAAG,CAACsC,MAAM,CAACF,KAAK,EAAEb,UAAU,CAACG,WAAW,EAAE,CAAC/I,GAAG,EAAE4J,IAAI,KAAK;IACvD,IAAI5J,GAAG,EAAE;MACP;MACA,OAAOqJ,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5E,OAAO,EAAE;MAAgB,CAAC,CAAC;IAC3D;IACAoG,GAAG,CAACK,IAAI,GAAGA,IAAI,CAAC,CAAC;IACjBJ,IAAI,CAAC,CAAC;EACR,CAAC,CAAC;AACJ,CAAC;AAED,SAASK,cAAcA,CAACN,GAAG,EAAEF,GAAG,EAAEG,IAAI,EAAE;EACtC,MAAMC,KAAK,GAAGF,GAAG,CAACjP,OAAO,CAACE,aAAa;EACvC,MAAMsP,SAAS,GAAGL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACrC,IAAI;IACF,IAAI,CAACN,KAAK,EAAE;MACV,OAAOJ,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5E,OAAO,EAAE;MAAqB,CAAC,CAAC;IAChE;IAEAkE,GAAG,CAACsC,MAAM,CAACG,SAAS,EAAEvQ,OAAO,CAACC,GAAG,CAACwP,OAAO,EAAE,CAAChJ,GAAG,EAAEgK,OAAO,KAAK;MAC3D,IAAIhK,GAAG,EAAE;QACP;QACA;QACA;QACA5E,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAE6E,GAAG,CAAC;QAC7C,OAAOqJ,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;UAAE5E,OAAO,EAAE;QAAiB,CAAC,CAAC;MAC5D;MAEA,IAAI6G,OAAO,CAACpE,IAAI,KAAK,OAAO,EAAE;QAC5B;QACA4D,IAAI,CAAC,CAAC;MACR,CAAC,MAAM;QACL,OAAOH,GAAG,CACPrN,MAAM,CAAC,GAAG,CAAC,CACX+L,IAAI,CAAC;UAAE5E,OAAO,EAAE;QAA+B,CAAC,CAAC;MACtD;IACF,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOhI,KAAK,EAAE;IACdkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF;AAEAgL,GAAG,CAAC8D,GAAG,CAAC,YAAY,EAAE,OAAOV,GAAG,EAAEF,GAAG,KAAK;EACxC;EACA,MAAMa,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC;EACnD,MAAMC,YAAY,GAAGlI,MAAM,CAAC8H,SAAS,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;EACvD,MAAMC,YAAY,GAAG,MAAM9H,WAAW,CAACV,UAAU,CAAC;IAAEG,GAAG,EAAEmI;EAAa,CAAC,CAAC;EACxE;EACAjB,GAAG,CAACoB,IAAI,CAACD,YAAY,CAAC,CAAC,CAAC,CAACrI,GAAG,CAAC;AAC/B,CAAC,CAAC;AAEFgE,GAAG,CAAC8D,GAAG,CAAC,GAAG,EAAE,CAACV,GAAG,EAAEF,GAAG,KAAK;EACzB,MAAMqB,WAAW,GAAG,IAAIvJ,IAAI,CAAC,CAAC,CAACwJ,kBAAkB,CAAC,CAAC;EACnDtB,GAAG,CAACoB,IAAI,CAAE,UAASC,WAAY,EAAC,CAAC;EACjC;AACF,CAAC,CAAC;AACFvE,GAAG,CAAC8D,GAAG,CAAC,kBAAkB,EAAE,CAACV,GAAG,EAAEF,GAAG,KAAK;EACxCA,GAAG,CAACoB,IAAI,CAAE,IAAG,CAAC;EACd;AACF,CAAC,CAAC;AAEF,MAAMG,gBAAgB,GAAGrR,KAAoB,GACzC,8BAA8B,GAC7B,CAAsB;AAC3B,MAAMuR,EAAE,GAAG,IAAIzE,MAAM,CAACM,UAAU,EAAE;EAChCT,IAAI,EAAE;IACJ+B,MAAM,EAAE2C,gBAAgB;IACxB1C,WAAW,EAAE;EACf;AACF,CAAC,CAAC;AAEF,MAAM6C,gBAAgB,GAAG,CAAC,CAAC;AAC3B5E,GAAG,CAAC8D,GAAG,CAAC,eAAe,EAAE,OAAOV,GAAG,EAAEF,GAAG,KAAK;EAC3C;EACA,MAAM5O,IAAI,GAAGiJ,MAAM,CAACsH,IAAI,CAACD,gBAAgB,CAAC;EAC1C1B,GAAG,CAACoB,IAAI,CAAChQ,IAAI,CAAC;AAChB,CAAC,CAAC;AACF0L,GAAG,CAAC8E,IAAI,CAAC,eAAe,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EAC5C;EACA,IAAI6B,QAAQ,GAAG,EAAE;EACjB,IAAI;IAAEhI;EAAG,CAAC,GAAGqG,GAAG,CAAC4B,IAAI;EAErB,KAAK,IAAIC,GAAG,IAAIN,EAAE,CAACO,OAAO,CAACC,OAAO,CAACC,KAAK,CAACP,IAAI,CAAC,CAAC,EAAE;IAC/CE,QAAQ,CAAChP,IAAI,CAACkP,GAAG,CAAC;EACpB;EACA,MAAM3Q,IAAI,GAAGyQ,QAAQ,CAACnQ,MAAM,CAAEyQ,OAAO,IAAK;IACxC,OAAOA,OAAO,CAACzB,KAAK,CAAC,KAAK,CAAC,CAAC9O,QAAQ,CAACiI,EAAE,CAAC,IAAIsI,OAAO,CAACzB,KAAK,CAAC,KAAK,CAAC,CAAChL,MAAM,GAAG,CAAC;EAC7E,CAAC,CAAC;EACFsK,GAAG,CAACoB,IAAI,CAAChQ,IAAI,CAAC;AAChB,CAAC,CAAC;AACFqQ,EAAE,CAAClE,EAAE,CAAC,YAAY,EAAG6E,MAAM,IAAK;EAC9BrQ,OAAO,CAACC,GAAG,CAAE,oBAAmBoQ,MAAM,CAACvI,EAAG,EAAC,CAAC;EAC5C;EACA;;EAEA6H,gBAAgB,CAACU,MAAM,CAACvI,EAAE,CAAC,GAAGuI,MAAM;;EAEpC;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;;EAEAA,MAAM,CAAC7E,EAAE,CAAC,MAAM,EAAG3D,QAAQ,IAAK;IAC9B,IAAI6H,EAAE,CAACO,OAAO,CAACC,OAAO,CAACC,KAAK,CAACtB,GAAG,CAAChH,QAAQ,CAAC,IAAIyI,SAAS,EAAE;MACvD,CAACZ,EAAE,CAACO,OAAO,CAACC,OAAO,CAACC,KAAK,CAACtB,GAAG,CAAChH,QAAQ,CAAC,CAAC0I,GAAG,CAACF,MAAM,CAACvI,EAAE,CAAC,IACpDuI,MAAM,CAACG,IAAI,CAAC3I,QAAQ,CAAC;IACzB;EACF,CAAC,CAAC;EAEFwI,MAAM,CAAC7E,EAAE,CAAC,MAAM,EAAGiF,QAAQ,IAAK;IAC9B,CAACf,EAAE,CAACO,OAAO,CAACC,OAAO,CAACC,KAAK,CAACI,GAAG,CAACE,QAAQ,CAAC5I,QAAQ,CAAC,IAC9CwI,MAAM,CAACG,IAAI,CAACC,QAAQ,CAAC5I,QAAQ,CAAC;IAChC;IACA;IACA;IACA;IACAG,OAAO,CAACpB,UAAU,CAAC6J,QAAQ,CAAC;IAC5BzQ,OAAO,CAACC,GAAG,CACR,gBAAewQ,QAAQ,CAAC5I,QAAS,IAAGwI,MAAM,CAACvI,EAAG,KAAI2I,QAAQ,CAAC1I,OAAQ,EACtE,CAAC;IACD,IAAI1I,IAAI,GAAG;MACTqR,MAAM,EAAEL,MAAM,CAACvI,EAAE,KAAK2I,QAAQ,CAAC3I,EAAE,GAAG2I,QAAQ,CAAC3I,EAAE,GAAG,IAAI;MACtD6I,OAAO,EAAEF,QAAQ,CAAC1I,OAAO;MACzBF,QAAQ,EAAE4I,QAAQ,CAAC5I,QAAQ;MAC3BD,IAAI,EAAE,IAAI7B,IAAI,CAAC;IACjB,CAAC;IACDsK,MAAM,CAACO,IAAI,CAAC,OAAO,EAAEvR,IAAI,CAAC;IAC1B,IAAIwR,KAAK,GAAG,IAAIC,GAAG,CAACL,QAAQ,CAAC5I,QAAQ,CAAC8G,KAAK,CAAC,KAAK,CAAC,CAAC;IACnD;IACAkC,KAAK,CAACnL,OAAO,CAAE0K,OAAO,IAAK;MACzBC,MAAM,CAACU,EAAE,CAACX,OAAO,CAAC,CAACQ,IAAI,CAAC,OAAO,EAAEvR,IAAI,CAAC;IACxC,CAAC,CAAC;;IAEF;EACF,CAAC,CAAC;EAEFgR,MAAM,CAAC7E,EAAE,CAAC,WAAW,EAAGwF,eAAe,IAAK;IAC1C;;IAEA,IAAI3R,IAAI,GAAG;MACTqR,MAAM,EAAG,QAAO;MAChBC,OAAO,EAAG,GAAEN,MAAM,CAACvI,EAAG,UAAS;MAC/BD,QAAQ,EAAEmJ;IACZ,CAAC;IACD,IAAIH,KAAK,GAAG,IAAIC,GAAG,CACjBE,eAAe,CAACrC,KAAK,CAAC,KAAK,CAAC,CAAChP,MAAM,CAAEf,CAAC,IAAK;MACzC,OAAOyR,MAAM,CAACvI,EAAE,IAAIlJ,CAAC;IACvB,CAAC,CACH,CAAC;IACDiS,KAAK,CAACnL,OAAO,CAAE0K,OAAO,IAAK;MACzBC,MAAM,CAACU,EAAE,CAACX,OAAO,CAAC,CAACQ,IAAI,CAAC,OAAO,EAAEvR,IAAI,CAAC;IACxC,CAAC,CAAC;IAEF,IAAIqQ,EAAE,CAACO,OAAO,CAACC,OAAO,CAACC,KAAK,CAACI,GAAG,CAACS,eAAe,CAAC,EAAE;MACjD,MAAMC,OAAO,GAAGvB,EAAE,CAACO,OAAO,CAACC,OAAO,CAACC,KAAK,CAACtB,GAAG,CAACmC,eAAe,CAAC;MAC7D,IAAIC,OAAO,EAAE;QACXA,OAAO,CAACvL,OAAO,CAAEwL,QAAQ,IAAK;UAC5BxB,EAAE,CAACO,OAAO,CAACA,OAAO,CAACpB,GAAG,CAACqC,QAAQ,CAAC,CAACC,KAAK,CAACH,eAAe,CAAC,CAAC,CAAC;QAC3D,CAAC,CAAC;MACJ;IACF;;IAEA;IACAtB,EAAE,CAACO,OAAO,CAACC,OAAO,CAACkB,GAAG,CAACJ,eAAe,CAAC;EACzC,CAAC,CAAC;;EAEF;EACAX,MAAM,CAAC7E,EAAE,CAAC,YAAY,EAAG3D,QAAQ,IAAK;IACpC7H,OAAO,CAACC,GAAG,CAAC,uBAAuB,GAAGoQ,MAAM,CAACvI,EAAE,CAAC;IAEhD,IAAIgI,QAAQ,GAAGuB,KAAK,CAACC,IAAI,CAAC5B,EAAE,CAACO,OAAO,CAACC,OAAO,CAACC,KAAK,CAAC,CAAC/O,GAAG,CAAEmQ,IAAI,IAAK;MAChE,OAAOA,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC;IAEF,KAAK,IAAIP,eAAe,IAAIlB,QAAQ,EAAE;MACpC,IAAIzQ,IAAI,GAAG;QACTqR,MAAM,EAAG,QAAO;QAChBC,OAAO,EAAG,GAAEN,MAAM,CAACvI,EAAG,wBAAuB;QAC7CD,QAAQ,EAAEmJ;MACZ,CAAC;MACD,IAAIH,KAAK,GAAG,IAAIC,GAAG,CACjBE,eAAe,CAACrC,KAAK,CAAC,KAAK,CAAC,CAAChP,MAAM,CAAEf,CAAC,IAAK;QACzC,OAAOyR,MAAM,CAACvI,EAAE,IAAIlJ,CAAC;MACvB,CAAC,CACH,CAAC;MACDiS,KAAK,CAACnL,OAAO,CAAE0K,OAAO,IAAK;QACzBC,MAAM,CAACU,EAAE,CAACX,OAAO,CAAC,CAACQ,IAAI,CAAC,OAAO,EAAEvR,IAAI,CAAC;MACxC,CAAC,CAAC;MACF,IAAIqQ,EAAE,CAACO,OAAO,CAACC,OAAO,CAACC,KAAK,CAACI,GAAG,CAACS,eAAe,CAAC,EAAE;QACjD,MAAMC,OAAO,GAAGvB,EAAE,CAACO,OAAO,CAACC,OAAO,CAACC,KAAK,CAACtB,GAAG,CAACmC,eAAe,CAAC;QAC7D,IAAIC,OAAO,EAAE;UACXA,OAAO,CAACvL,OAAO,CAAEwL,QAAQ,IAAK;YAC5BxB,EAAE,CAACO,OAAO,CAACA,OAAO,CAACpB,GAAG,CAACqC,QAAQ,CAAC,CAACC,KAAK,CAACH,eAAe,CAAC,CAAC,CAAC;UAC3D,CAAC,CAAC;QACJ;MACF;;MAEA;MACAtB,EAAE,CAACO,OAAO,CAACC,OAAO,CAACkB,GAAG,CAACJ,eAAe,CAAC;IACzC;IAEA,OAAOrB,gBAAgB,CAACU,MAAM,CAACvI,EAAE,CAAC;EACpC,CAAC,CAAC;AACJ,CAAC,CAAC;AAEFiD,GAAG,CAAC8D,GAAG,CAAC,mBAAmB,EAAE,OAAOV,GAAG,EAAEF,GAAG,KAAK;EAC/C,IAAIuD,WAAW,GAAG,CAAC;EACnB,MAAMjQ,MAAM,GAAG,MAAMqJ,OAAO,CAAC6G,SAAS,CAAC,CACrC;IACEC,MAAM,EAAE;MACNxJ,GAAG,EAAE,IAAI;MACT5E,KAAK,EAAE;QAAEqO,IAAI,EAAE;MAAc;IAC/B;EACF,CAAC,CACF,CAAC;EAEF,IAAIpQ,MAAM,CAACoC,MAAM,GAAG,CAAC,EAAE;IACrB6N,WAAW,GAAGjQ,MAAM,CAAC,CAAC,CAAC,CAAC+B,KAAK,GAAG,CAAC;EACnC,CAAC,MAAM;IACLtD,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;EAC3B;EAEA,MAAM2R,WAAW,GAAG,IAAI7L,IAAI,CAAC,CAAC;EAC9B,MAAM8L,IAAI,GAAGD,WAAW,CAACE,WAAW,CAAC,CAAC;EACtC,MAAMC,KAAK,GAAG/K,MAAM,CAAC4K,WAAW,CAACI,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC7C,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;EACnE,MAAM8C,GAAG,GAAGjL,MAAM,CAAC4K,WAAW,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC/C,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;;EAE5D,MAAMgD,aAAa,GAAI,GAAEN,IAAK,IAAGE,KAAM,IAAGE,GAAI,EAAC;EAC/C,MAAMG,YAAY,GAAG,MAAMxH,OAAO,CAAC7F,IAAI,CAAC;IAAEgB,IAAI,EAAEoM;EAAc,CAAC,CAAC;EAEhE,MAAMvH,OAAO,CAACyH,SAAS,CAAC;IAAEtM,IAAI,EAAEoM;EAAc,CAAC,EAAE;IAAEG,IAAI,EAAE;MAAE3H,UAAU,EAAE;IAAE;EAAE,CAAC,CAAC;EAC7E,MAAM4H,WAAW,GAAG;IAClBC,KAAK,EAAEhB,WAAW;IAClBiB,KAAK,EAAEL,YAAY,CAAC,CAAC,CAAC,CAACzH;EACzB,CAAC;EAEDsD,GAAG,CAACtB,IAAI,CAAC4F,WAAW,CAAC;AACvB,CAAC,CAAC;AAEFxH,GAAG,CAAC8D,GAAG,CAAC,kBAAkB,EAAE,OAAOV,GAAG,EAAEF,GAAG,KAAK;EAC9C,IAAI;IACF,MAAMa,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,KAAK,CAAC;IACnD,MAAMC,YAAY,GAAGlI,MAAM,CAAC8H,SAAS,CAAC,CAACK,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;IACvD,MAAM,CAACuD,cAAc,CAAC,GAAG,MAAMpL,WAAW,CAACV,UAAU,CAAC;MACpDG,GAAG,EAAEmI;IACP,CAAC,CAAC;IACFjB,GAAG,CAACoB,IAAI,CAACqD,cAAc,CAAC3L,GAAG,CAAC;EAC9B,CAAC,CAAC,OAAOhH,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACtDkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AACF;;AAEAgL,GAAG,CAAC4H,MAAM,CAAC,kBAAkB,EAAE,OAAOxE,GAAG,EAAEF,GAAG,KAAK;EACjD,MAAM5O,IAAI,GAAG8O,GAAG,CAACyE,KAAK;EAEtB,IAAI;IACF,MAAMtL,WAAW,CAACX,UAAU,CAAC;MAC3BI,GAAG,EAAE1H,IAAI,CAACiI;IACZ,CAAC,CAAC;IACF2G,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5E,OAAO,EAAE;IAA4B,CAAC,CAAC;EAChE,CAAC,CAAC,OAAOhI,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;IACtDkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AACF;;AAEAgL,GAAG,CAAC8D,GAAG,CAAC,WAAW,EAAE,OAAOV,GAAG,EAAEF,GAAG,KAAK;EACvC,MAAM4E,WAAW,GAAG,MAAM1O,UAAU,CAACY,IAAI,CAAC,CAAC,CAAC,CAAC;EAC7CkJ,GAAG,CAACtB,IAAI,CAACkG,WAAW,CAAC;AACvB,CAAC,CAAC;AAEF9H,GAAG,CAAC8D,GAAG,CAAC,WAAW,EAAE,OAAOV,GAAG,EAAEF,GAAG,KAAK;EACvC,MAAM6E,WAAW,GAAG,MAAMxJ,UAAU,CAACvE,IAAI,CAAC,CAAC,CAAC,CAAC;EAC7CkJ,GAAG,CAACtB,IAAI,CAACmG,WAAW,CAAC;AACvB,CAAC,CAAC;AACF/H,GAAG,CAAC8D,GAAG,CAAC,YAAY,EAAE,OAAOV,GAAG,EAAEF,GAAG,KAAK;EACxC,MAAM6E,WAAW,GAAG,MAAM5O,YAAY,CAACa,IAAI,CAAC,CAAC,CAAC,CAAC;EAC/CkJ,GAAG,CAACtB,IAAI,CAACmG,WAAW,CAAC;AACvB,CAAC,CAAC;AAEF/H,GAAG,CAAC8D,GAAG,CAAC,iBAAiB,EAAE,OAAOV,GAAG,EAAEF,GAAG,KAAK;EAC7C,MAAM8E,OAAO,GAAG,MAAMrJ,MAAM,CAAC3E,IAAI,CAAC,CAAC,CAAC,CAAC;EACrCkJ,GAAG,CAACtB,IAAI,CAACoG,OAAO,CAAC;AACnB,CAAC,CAAC;AAEFhI,GAAG,CAAC8E,IAAI,CAAC,YAAY,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EACzC,MAAM;IAAEtF,EAAE;IAAE0B;EAAS,CAAC,GAAG8D,GAAG,CAAC4B,IAAI;EACjC,MAAMvB,IAAI,GAAG,MAAM/D,IAAI,CAACnF,OAAO,CAAC;IAAEqD,EAAE,EAAEA,EAAE;IAAE0B,QAAQ,EAAEA;EAAS,CAAC,CAAC;EAE/D,IAAImE,IAAI,EAAE;IACR,MAAMwE,OAAO,GAAG;MACdrK,EAAE,EAAE6F,IAAI,CAAC7F,EAAE;MACX6B,IAAI,EAAEgE,IAAI,CAAChE,IAAI;MACfyI,GAAG,EAAElE,IAAI,CAACC,KAAK,CAACjJ,IAAI,CAACsB,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;MAAE;MACpC6L,GAAG,EAAEnE,IAAI,CAACC,KAAK,CAACjJ,IAAI,CAACsB,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,CAAE;IAChD,CAAC;IACD,MAAMgH,KAAK,GAAGpC,GAAG,CAACkH,IAAI,CAACH,OAAO,EAAExF,UAAU,CAACG,WAAW,CAAC;IACvD,MAAMyF,cAAc,GAAG,IAAIrN,IAAI,CAAC,CAAC,CAAC,CAAC;IACnCqN,cAAc,CAACC,OAAO,CAACD,cAAc,CAAClB,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;IACpDjE,GAAG,CAACqF,MAAM,CAAC,OAAO,EAAEjF,KAAK,EAAE;MACzBlH,OAAO,EAAEiM,cAAc;MACvBG,QAAQ,EAAE,MAAM;MAChBC,MAAM,EAAE,IAAI;MACZC,QAAQ,EAAE;IACZ,CAAC,CAAC;IACFxF,GAAG,CAACtB,IAAI,CAAC;MAAE0B;IAAM,CAAC,CAAC;EACrB,CAAC,MAAM;IACLJ,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5E,OAAO,EAAE;IAAwB,CAAC,CAAC;EAC5D;AACF,CAAC,CAAC;AAEFgD,GAAG,CAAC8E,IAAI,CAAC,YAAY,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EACzC,MAAMO,IAAI,GAAGL,GAAG,CAAC4B,IAAI,CAAC,CAAC;EACvB,IAAI;IACF,MAAM/B,YAAY,GAAG,MAAMvD,IAAI,CAACnF,OAAO,CAAC;MAAEqD,EAAE,EAAE6F,IAAI,CAAC5F,IAAI,CAACD;IAAG,CAAC,CAAC;IAC7D,IAAI,CAACqF,YAAY,EAAE;MACjBC,GAAG,CAACtB,IAAI,CAAC,KAAK,CAAC;IACjB,CAAC,MAAM;MACLsB,GAAG,CAACtB,IAAI,CAAC,IAAI,CAAC;IAChB;EACF,CAAC,CAAC,OAAO5M,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AAEFgL,GAAG,CAAC8E,IAAI,CAAC,aAAa,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EAC1C,MAAMO,IAAI,GAAGL,GAAG,CAAC4B,IAAI,CAAC,CAAC;;EAEvB;EACA,MAAM2D,aAAa,GAAG,MAAMpM,WAAW,CAACX,UAAU,CAAC;IAAEI,GAAG,EAAEyH,IAAI,CAACmF;EAAK,CAAC,CAAC;EACtE,IAAID,aAAa,CAACE,YAAY,GAAG,CAAC,EAAE;IAClC,IAAI;MACF,MAAM5F,YAAY,GAAG,MAAMvD,IAAI,CAACnF,OAAO,CAAC;QAAEqD,EAAE,EAAE6F,IAAI,CAAC5F,IAAI,CAACD;MAAG,CAAC,CAAC;MAC7D,IAAI,CAACqF,YAAY,EAAE;QACjB;QACA,IAAIQ,IAAI,CAAC5F,IAAI,CAACD,EAAE,KAAK,SAAS,EAAE;UAC9B6F,IAAI,CAAC5F,IAAI,CAAC4B,IAAI,GAAG,OAAO,CAAC,CAAC;QAC5B,CAAC,MAAM;UACLgE,IAAI,CAAC5F,IAAI,CAAC4B,IAAI,GAAG,MAAM,CAAC,CAAC;QAC3B;QAEA,MAAMqJ,OAAO,GAAG,MAAMpJ,IAAI,CAAC7D,UAAU,CAAC4H,IAAI,CAAC5F,IAAI,CAAC,CAAC,CAAC;QAClD5I,OAAO,CAACC,GAAG,CAAC4T,OAAO,CAAC;QACpB5F,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;UAAE5E,OAAO,EAAE;QAA4B,CAAC,CAAC;MAChE,CAAC,MAAM;QACL;QACAkG,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;UAAE5M,KAAK,EAAE;QAAmC,CAAC,CAAC;MACrE;IACF,CAAC,CAAC,OAAOA,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5M,KAAK,EAAE;MAAwB,CAAC,CAAC;IAC1D;EACF;AACF,CAAC,CAAC;AACFgL,GAAG,CAAC8E,IAAI,CAAC,aAAa,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EAC1C,MAAMO,IAAI,GAAGL,GAAG,CAAC4B,IAAI,CAAC,CAAC;EACvB,IAAI;IACF,MAAM/B,YAAY,GAAG,MAAMvD,IAAI,CAACnF,OAAO,CAAC;MAAEqD,EAAE,EAAE6F,IAAI,CAAC5F,IAAI,CAACD;IAAG,CAAC,CAAC;IAC7D,IAAIqF,YAAY,EAAE;MAChB;MACAC,GAAG,CAACtB,IAAI,CAACqB,YAAY,CAAC1D,QAAQ,CAAC;IACjC,CAAC,MAAM;MACL;MACA2D,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5M,KAAK,EAAE;MAAmC,CAAC,CAAC;IACrE;EACF,CAAC,CAAC,OAAOA,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AACFgL,GAAG,CAAC8E,IAAI,CAAC,cAAc,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EAC3C,MAAMO,IAAI,GAAGL,GAAG,CAAC4B,IAAI,CAAC,CAAC;EACvB,IAAI;IACF,MAAM/B,YAAY,GAAG,MAAMvD,IAAI,CAACnF,OAAO,CAAC;MACtCqD,EAAE,EAAE6F,IAAI,CAAC5F,IAAI,CAACD,EAAE;MAChB2B,QAAQ,EAAEkE,IAAI,CAAC5F,IAAI,CAAC0B,QAAQ;MAC5BC,MAAM,EAAEiE,IAAI,CAAC5F,IAAI,CAAC2B;IACpB,CAAC,CAAC;IACF,IAAIyD,YAAY,EAAE;MAChB;MACAC,GAAG,CAACtB,IAAI,CAACqB,YAAY,CAAC3D,QAAQ,CAAC;IACjC,CAAC,MAAM;MACL;MACA4D,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5M,KAAK,EAAE;MAAmC,CAAC,CAAC;IACrE;EACF,CAAC,CAAC,OAAOA,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AACF;AACAgL,GAAG,CAAC8E,IAAI,CAAC,cAAc,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EAC3C,MAAMhN,IAAI,GAAGkN,GAAG,CAAC4B,IAAI,CAAC,CAAC;EACvB,MAAM1B,KAAK,GAAGF,GAAG,CAACjP,OAAO,CAACE,aAAa;EACvC,MAAMsP,SAAS,GAAGL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACrC,MAAMC,OAAO,GAAG3C,GAAG,CAACsC,MAAM,CAACG,SAAS,EAAEvQ,OAAO,CAACC,GAAG,CAACwP,OAAO,CAAC;EAC1D,IAAIgB,OAAO,CAACjG,EAAE,KAAK1H,IAAI,CAAC2H,IAAI,CAACD,EAAE,EAAE;IAC/B,IAAI;MACF;MACA,MAAMpH,MAAM,GAAG,MAAM+H,UAAU,CAACwK,SAAS,CAAC;QAAE5L,GAAG,EAAEjH,IAAI,CAAC2H,IAAI,CAACV;MAAI,CAAC,CAAC;MAEjE,IAAI3G,MAAM,CAACqS,YAAY,KAAK,CAAC,EAAE;QAC7B5T,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;QAC5CgO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC,MAAM,CAAC;MAC9B,CAAC,MAAM;QACL3M,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;QACjCgO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;UAAE5E,OAAO,EAAE;QAAqB,CAAC,CAAC;MACzD;IACF,CAAC,CAAC,OAAOhI,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChDkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5M,KAAK,EAAE;MAAwB,CAAC,CAAC;IAC1D;EACF;AACF,CAAC,CAAC;AAEFgL,GAAG,CAAC8E,IAAI,CAAC,aAAa,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EAC1C,MAAM/I,KAAK,GAAGiJ,GAAG,CAAC4B,IAAI,CAAC,CAAC;EACxB,MAAMgE,YAAY,GAAG,MAAMzM,WAAW,CAACvC,IAAI,CAAC;IAAEgC,GAAG,EAAE7B,KAAK,CAACyO;EAAK,CAAC,CAAC;EAChE,IAAII,YAAY,CAACpQ,MAAM,GAAG,CAAC,EAAE;IAC3B,MAAM2D,WAAW,CAACX,UAAU,CAAC;MAAEI,GAAG,EAAE7B,KAAK,CAACyO;IAAK,CAAC,CAAC;IACjD;IACA;IACA,IAAI;MACF3T,OAAO,CAACC,GAAG,CAACiF,KAAK,CAAC0D,IAAI,CAAC;MACvB;MACA;MACA,MAAMc,MAAM,CAAC9C,UAAU,CAAC1B,KAAK,CAAC0D,IAAI,CAAC,CAAC,CAAC;MACrC;MACAqF,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5E,OAAO,EAAE;MAA4B,CAAC,CAAC;MAC9D/H,OAAO,CAACC,GAAG,CAACiF,KAAK,CAAC;IACpB,CAAC,CAAC,OAAOnF,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5M,KAAK,EAAE;MAAwB,CAAC,CAAC;IAC1D;EACF;AACF,CAAC,CAAC;AACF;AACA;AACA;AACA;;AAEAgL,GAAG,CAAC8E,IAAI,CAAC,gBAAgB,EAAEpB,cAAc,EAAE,OAAON,GAAG,EAAEF,GAAG,KAAK;EAC7D,MAAM/I,KAAK,GAAGiJ,GAAG,CAAC4B,IAAI,CAAC,CAAC;EACxB/P,OAAO,CAACC,GAAG,CAACiF,KAAK,CAAC;;EAElB;;EAEA,IAAI;IACF;IACA;IACA,MAAMwE,MAAM,CAACoK,SAAS,CAAC;MAAE1K,KAAK,EAAElE,KAAK,CAACkE,KAAK;MAAEK,IAAI,EAAEvE,KAAK,CAACuE;IAAK,CAAC,CAAC;;IAEhE;IACAwE,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC,MAAM,CAAC;EAC9B,CAAC,CAAC,OAAO5M,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AAEFgL,GAAG,CAAC8E,IAAI,CAAC,aAAa,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EAC1C,MAAM;IAAE/I;EAAM,CAAC,GAAGiJ,GAAG,CAAC4B,IAAI,CAAC,CAAC;;EAE5B,IAAI;IACF;IACA;IACA,MAAMzG,UAAU,CAAC3C,UAAU,CAAC,CAAC,CAAC,CAAC;IAC/B,MAAM2C,UAAU,CAAC1C,UAAU,CAAC1B,KAAK,CAACA,KAAK,CAAC9D,GAAG,CAAExB,IAAI,IAAKA,IAAI,CAAC,CAAC,CAAC,CAAC;IAC9D;IACAqO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5E,OAAO,EAAE;IAA4B,CAAC,CAAC;IAC9D/H,OAAO,CAACC,GAAG,CAACiF,KAAK,CAAC;EACpB,CAAC,CAAC,OAAOnF,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AAEFgL,GAAG,CAAC8E,IAAI,CAAC,WAAW,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EACxC,MAAMhN,IAAI,GAAGkN,GAAG,CAAC4B,IAAI;EACrB,MAAMiE,mBAAmB,GAAG,MAAM1M,WAAW,CAACvC,IAAI,CAAC;IAAEgC,GAAG,EAAE9F,IAAI,CAACqG;EAAY,CAAC,CAAC;EAC7E,IAAI0M,mBAAmB,CAACrQ,MAAM,GAAG,CAAC,EAAE;IAClC;;IAEA,MAAM2D,WAAW,CAACX,UAAU,CAAC;MAAEI,GAAG,EAAE9F,IAAI,CAACqG;IAAY,CAAC,CAAC;IACvD,IAAI;MACF,MAAM8H,YAAY,GAAG,MAAM9F,UAAU,CAAC1C,UAAU,CAAC3F,IAAI,CAAC2H,IAAI,CAAC;MAC3D5I,OAAO,CAACC,GAAG,CAACmP,YAAY,CAAC;MACzBnB,GAAG,CAACtB,IAAI,CAAC;QAAE5E,OAAO,EAAE;MAA4B,CAAC,CAAC;IACpD,CAAC,CAAC,OAAOhI,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5M,KAAK,EAAE;MAAwB,CAAC,CAAC;IAC1D;EACF;AACF,CAAC,CAAC;AAEFgL,GAAG,CAAC8D,GAAG,CACL,kBAAkB,EAClB,OAAOV,GAAG,EAAEF,GAAG,KAAK;EAClB,MAAM5O,IAAI,GAAG8O,GAAG,CAACyE,KAAK;EACtB,MAAMA,KAAK,GAAG;IACZ1K,GAAG,EAAE7I,IAAI,CAAC6I;EACZ,CAAC;EACD,IAAI7I,IAAI,CAACsJ,EAAE,KAAK,SAAS,EAAE,CAC3B,CAAC,MAAM;IACLiK,KAAK,CAAC3I,YAAY,GAAG5K,IAAI,CAAC4U,iBAAiB;EAC7C;EACA,MAAMC,YAAY,GAAG,MAAMhK,IAAI,CAACnF,IAAI,CAAC6N,KAAK,CAAC;EAC3C,IAAIsB,YAAY,CAACvQ,MAAM,GAAG,CAAC,EAAE;IAC3BsK,GAAG,CAACtB,IAAI,CAAC,IAAI,CAAC;EAChB,CAAC,MAAM;IACLsB,GAAG,CAACtB,IAAI,CAAC,KAAK,CAAC;EACjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACF,CAAC;AAED5B,GAAG,CAAC8D,GAAG,CAAC,YAAY,EAAE,OAAOV,GAAG,EAAEF,GAAG,KAAK;EACxC,IAAI;IACF,MAAMkG,QAAQ,GAAG,MAAMjK,IAAI,CAACnF,IAAI,CAAC,CAAC,CAAC,EAAE;MAAEkF,YAAY,EAAE;IAAE,CAAC,CAAC;IACzDgE,GAAG,CAACtB,IAAI,CAACwH,QAAQ,CAAC;EACpB,CAAC,CAAC,OAAOpU,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AAEFgL,GAAG,CAAC8E,IAAI,CAAC,YAAY,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EACzC,MAAM+F,mBAAmB,GAAG,MAAM1M,WAAW,CAACvC,IAAI,CAAC;IACjDgC,GAAG,EAAEoH,GAAG,CAAC4B,IAAI,CAACqE;EAChB,CAAC,CAAC;EACF,IAAIJ,mBAAmB,CAACrQ,MAAM,GAAG,CAAC,EAAE;IAClC;;IAEA,MAAM2D,WAAW,CAACX,UAAU,CAAC;MAAEI,GAAG,EAAEoH,GAAG,CAAC4B,IAAI,CAACqE;IAAY,CAAC,CAAC;IAC3D,IAAI;MACF,MAAMhF,YAAY,GAAG,MAAMlF,IAAI,CAACtD,UAAU,CAACuH,GAAG,CAAC4B,IAAI,CAAC7F,IAAI,CAAC;MACzD+D,GAAG,CAACtB,IAAI,CAAC;QAAE5E,OAAO,EAAE;MAA4B,CAAC,CAAC;IACpD,CAAC,CAAC,OAAOhI,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5M,KAAK,EAAE;MAAwB,CAAC,CAAC;IAC1D;EACF;AACF,CAAC,CAAC;AAEFgL,GAAG,CAAC4H,MAAM,CAAC,YAAY,EAAE,OAAOxE,GAAG,EAAEF,GAAG,KAAK;EAC3C,MAAM5O,IAAI,GAAG8O,GAAG,CAACyE,KAAK;EACtB,MAAMA,KAAK,GAAG;IACZ1K,GAAG,EAAE7I,IAAI,CAAC6I;EACZ,CAAC;EACD,IAAI7I,IAAI,CAAC4U,iBAAiB,KAAK,WAAW,EAAE;IAC1CrB,KAAK,CAAC3I,YAAY,GAAG5K,IAAI,CAAC4U,iBAAiB;EAC7C,CAAC,MAAM;IACL,IAAI5U,IAAI,CAACsJ,EAAE,KAAK,SAAS,EAAE,CAC3B,CAAC,MAAM;MACLiK,KAAK,CAACjK,EAAE,GAAGtJ,IAAI,CAACsJ,EAAE;IACpB;EACF;EACA,IAAI;IACF,MAAMuL,YAAY,GAAG,MAAMhK,IAAI,CAACvD,UAAU,CAACiM,KAAK,CAAC;IACjD,IAAIsB,YAAY,CAACvQ,MAAM,GAAG,CAAC,EAAE;MAC3BsK,GAAG,CAACtB,IAAI,CAAC;QAAE5E,OAAO,EAAE;MAA4B,CAAC,CAAC;IACpD,CAAC,MAAM;MACLkG,GAAG,CAACtB,IAAI,CAAC,KAAK,CAAC;IACjB;EACF,CAAC,CAAC,OAAO5M,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AAEFgL,GAAG,CAACsJ,KAAK,CAAC,YAAY,EAAE,OAAOlG,GAAG,EAAEF,GAAG,KAAK;EAC1C,MAAM5O,IAAI,GAAG8O,GAAG,CAAC4B,IAAI;EACrB,MAAM;IAAE7H,GAAG;IAAE0B,SAAS;IAAEE,QAAQ;IAAEvL,QAAQ;IAAEwL,SAAS;IAAEpB;EAAG,CAAC,GAAGtJ,IAAI;EAClE,IAAI;IACF,MAAM6K,IAAI,CAACoK,iBAAiB,CAACpM,GAAG,EAAE;MAChChC,IAAI,EAAE;QAAE0D,SAAS;QAAEE,QAAQ;QAAEvL;MAAS;IACxC,CAAC,CAAC;IACF0P,GAAG,CAACtB,IAAI,CAAC;MAAE5E,OAAO,EAAE;IAA4B,CAAC,CAAC;EACpD,CAAC,CAAC,OAAOhI,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AAEFgL,GAAG,CAAC8E,IAAI,CAAC,cAAc,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EAC3C,MAAMhN,IAAI,GAAGkN,GAAG,CAAC4B,IAAI,CAAC,CAAC;EACvB/P,OAAO,CAACC,GAAG,CAACgB,IAAI,CAAC;EACjB,IAAI;IACF,MAAMsT,cAAc,GAAG,MAAM5I,OAAO,CAAChF,UAAU,CAAC;MAAEgC,EAAE,EAAE1H,IAAI,CAAC0H;IAAG,CAAC,CAAC;IAChE,MAAMyG,YAAY,GAAG,MAAMzD,OAAO,CAAC/E,UAAU,CAAC3F,IAAI,CAAC;IACnDjB,OAAO,CAACC,GAAG,CAACmP,YAAY,CAAC;IACzBnB,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5E,OAAO,EAAE;IAA4B,CAAC,CAAC;EAChE,CAAC,CAAC,OAAOhI,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AACFgL,GAAG,CAAC8E,IAAI,CAAC,kBAAkB,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EAC/C,MAAMhN,IAAI,GAAGkN,GAAG,CAAC4B,IAAI,CAAC,CAAC;EACvB/P,OAAO,CAACC,GAAG,CAACgB,IAAI,CAAC;EACjB,IAAI;IACF,MAAMmO,YAAY,GAAG,MAAMzD,OAAO,CAAC5G,IAAI,CAAC;MAAE4D,EAAE,EAAE1H,IAAI,CAAC0H;IAAG,CAAC,CAAC;IACxD3I,OAAO,CAACC,GAAG,CAACmP,YAAY,CAAC;IACzB;IACAnB,GAAG,CAACtB,IAAI,CAACyC,YAAY,CAAC;EACxB,CAAC,CAAC,OAAOrP,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACAgL,GAAG,CAAC8E,IAAI,CAAC,cAAc,EAAE,OAAO1B,GAAG,EAAEF,GAAG,KAAK;EAC3C,MAAMhN,IAAI,GAAGkN,GAAG,CAAC4B,IAAI,CAAC,CAAC;EACvB,MAAM1B,KAAK,GAAGF,GAAG,CAACjP,OAAO,CAACE,aAAa;EACvC,MAAMsP,SAAS,GAAGL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EACrC,MAAMC,OAAO,GAAG3C,GAAG,CAACsC,MAAM,CAACG,SAAS,EAAEvQ,OAAO,CAACC,GAAG,CAACwP,OAAO,CAAC;EAC1D;EACA,IAAIgB,OAAO,CAACjG,EAAE,KAAK1H,IAAI,CAAC2H,IAAI,CAACD,EAAE,EAAE;IAC/B,IAAI;MACF,MAAMyG,YAAY,GAAG,MAAM9F,UAAU,CAAC+I,SAAS,CAC7C;QAAEnK,GAAG,EAAEjH,IAAI,CAAC2H,IAAI,CAACV;MAAI,CAAC,EACtB;QACEhC,IAAI,EAAE;UACJkD,KAAK,EAAEnI,IAAI,CAAC2H,IAAI,CAACQ,KAAK;UACtBC,IAAI,EAAEpI,IAAI,CAAC2H,IAAI,CAACS,IAAI;UACpB9K,QAAQ,EAAE0C,IAAI,CAAC2H,IAAI,CAACrK;QACtB;MACF,CACF,CAAC;MACDyB,OAAO,CAACC,GAAG,CAACmP,YAAY,CAAC;MACzB;MACAnB,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5E,OAAO,EAAE;MAA4B,CAAC,CAAC;IAChE,CAAC,CAAC,OAAOhI,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC5CkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;QAAE5M,KAAK,EAAE;MAAwB,CAAC,CAAC;IAC1D;EACF;AACF,CAAC,CAAC;AAEFgL,GAAG,CAAC8D,GAAG,CAAC,YAAY,EAAE,OAAOV,GAAG,EAAEF,GAAG,KAAK;EACxC,IAAI;IACF;IACA;IACA;IACA,MAAM1M,MAAM,GAAG,MAAM+H,UAAU,CAAC3C,UAAU,CAAC;MAAEyC,KAAK,EAAE;QAAEoL,IAAI,EAAE;MAAM;IAAE,CAAC,CAAC;IAEtEvG,GAAG,CAACtB,IAAI,CAAC;MAAE5E,OAAO,EAAG,GAAExG,MAAM,CAACqS,YAAa;IAAoB,CAAC,CAAC;EACnE,CAAC,CAAC,OAAO7T,KAAK,EAAE;IACdkO,GAAG,CAACrN,MAAM,CAAC,GAAG,CAAC,CAAC+L,IAAI,CAAC;MAAE5M,KAAK,EAAE;IAAoB,CAAC,CAAC;EACtD;AACF,CAAC,CAAC;AAEF,eAAe0U,aAAaA,CAAA,EAAG;EAC7B,MAAM7C,WAAW,GAAG,IAAI7L,IAAI,CAAC,CAAC;EAC9B,MAAM8L,IAAI,GAAGD,WAAW,CAACE,WAAW,CAAC,CAAC;EACtC,MAAMC,KAAK,GAAG/K,MAAM,CAAC4K,WAAW,CAACI,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC7C,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;EACnE,MAAM8C,GAAG,GAAGjL,MAAM,CAAC4K,WAAW,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC/C,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;EAC5D,MAAMgD,aAAa,GAAI,GAAEN,IAAK,IAAGE,KAAM,IAAGE,GAAI,EAAC;;EAE/C;EACA;EACA,MAAMyC,eAAe,GAAG,MAAM9J,OAAO,CAACtF,OAAO,CAAC;IAAES,IAAI,EAAEoM;EAAc,CAAC,CAAC;EACtE,IAAI,CAACuC,eAAe,EAAE;IACpB,MAAM9J,OAAO,CAAChE,UAAU,CAAC;MAAEb,IAAI,EAAEoM,aAAa;MAAExH,UAAU,EAAE;IAAE,CAAC,CAAC;IAChEpE,kBAAkB,CAAC,CAAC;EACtB;AACF;AACAkO,aAAa,CAAC,CAAC;AACf;AACA,MAAMpN,GAAG,GAAG,IAAItB,IAAI,CAAC,CAAC;AACtB,MAAM4O,QAAQ,GAAG,IAAI5O,IAAI,CAACsB,GAAG,CAAC;AAC9BsN,QAAQ,CAACtB,OAAO,CAAChM,GAAG,CAAC6K,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC;AACnCyC,QAAQ,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;;AAE7B;AACA,MAAMC,QAAQ,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;;AAEtC;AACAC,WAAW,CAAC,YAAY;EACtBL,aAAa,CAAC,CAAC;AACjB,CAAC,EAAEI,QAAQ,CAAC;AAEZtJ,UAAU,CAACwJ,MAAM,CAAC7J,IAAI,EAAE,MAAM;EAC5BlL,OAAO,CAACC,GAAG,CAAE,sCAAqCiL,IAAK,EAAC,CAAC;AAC3D,CAAC,CAAC,C","sources":["webpack://myapp/./src/controllers/loadMarket.js","webpack://myapp/./src/controllers/loadjem.js","webpack://myapp/./src/controllers/loadtrade.js","webpack://myapp/./src/controllers/update.js","webpack://myapp/./src/model/captchaCode.js","webpack://myapp/./src/model/chatLog.js","webpack://myapp/./src/model/hasitem.js","webpack://myapp/./src/model/item.js","webpack://myapp/./src/model/market.js","webpack://myapp/./src/model/report.js","webpack://myapp/./src/model/text.js","webpack://myapp/./src/model/trading_data.js","webpack://myapp/./src/model/user.js","webpack://myapp/./src/model/visited.js","webpack://myapp/external commonjs \"axios\"","webpack://myapp/external commonjs \"body-parser\"","webpack://myapp/external commonjs \"cookie-parser\"","webpack://myapp/external commonjs \"cors\"","webpack://myapp/external commonjs \"debug\"","webpack://myapp/external commonjs \"dotenv\"","webpack://myapp/external commonjs \"express\"","webpack://myapp/external commonjs \"jsonwebtoken\"","webpack://myapp/external commonjs \"mongoose\"","webpack://myapp/external commonjs \"morgan\"","webpack://myapp/external commonjs \"nunjucks\"","webpack://myapp/external commonjs \"passport\"","webpack://myapp/external commonjs \"passport-jwt\"","webpack://myapp/external commonjs \"socket.io\"","webpack://myapp/external commonjs \"winston\"","webpack://myapp/external node-commonjs \"http\"","webpack://myapp/external node-commonjs \"path\"","webpack://myapp/webpack/bootstrap","webpack://myapp/./app.js"],"sourcesContent":["// loadMarket.js\r\nconst axios = require(\"axios\");\r\nconst authorizationToken = process.env.API_KEY;\r\nconst searchdata = [\r\n  {\r\n    Category: \"재련\",\r\n    CategoryCode: 50000,\r\n    PageNum: 7,\r\n  },\r\n  {\r\n    Category: \"모험\",\r\n    CategoryCode: 100000,\r\n    PageNum: 13,\r\n  },\r\n  {\r\n    Category: \"배템\",\r\n    CategoryCode: 60000,\r\n    PageNum: 6,\r\n  },\r\n  {\r\n    Category: \"각인\",\r\n    CategoryCode: 40000,\r\n    PageNum: 29,\r\n  },\r\n  {\r\n    Category: \"음식\",\r\n    CategoryCode: 70000,\r\n    PageNum: 9,\r\n  },\r\n  {\r\n    Category: \"생활\",\r\n    CategoryCode: 90000,\r\n    PageNum: 4,\r\n  },\r\n];\r\nlet newarray = [];\r\nconst getMakeList = async () => {\r\n  for (const e of searchdata) {\r\n    const getPageData = async (pageNo) => {\r\n      const config = {\r\n        method: \"post\",\r\n        url: \"https://developer-lostark.game.onstove.com/markets/items\",\r\n        headers: {\r\n          accept: \"application/json\",\r\n          authorization: `bearer ${authorizationToken}`,\r\n          \"content-Type\": \"application/json\",\r\n        },\r\n        data: {\r\n          CategoryCode: e.CategoryCode,\r\n          PageNo: pageNo,\r\n        },\r\n      };\r\n      const response = await axios(config);\r\n\r\n      if (e.CategoryCode === 50000) {\r\n        try {\r\n          const itemsToExclude = [\r\n            \"수호석\",\r\n            \"수호석 조각\",\r\n            \"파괴석 조각\",\r\n            \"생명의 돌파석\",\r\n            \"별의 숨결\",\r\n            \"조화의 파편 주머니(중)\",\r\n            \"조화의 파편 주머니(소)\",\r\n            \"조화의 돌파석\",\r\n            \"달의 숨결\",\r\n            \"아크투르스의 서 : 무기\",\r\n            \"재봉술 : 매듭 기본\",\r\n            \"재봉술 : 도안 기본\",\r\n            \"야금술 : 접쇠 기본\",\r\n            \"아크투르스의 의지 : 방어구\",\r\n            \"크라테르의 지혜 : 무기\",\r\n            \"아크투르스의 서 : 방어구\",\r\n            \"크라테르의 지혜 : 방어구\",\r\n            \"야금술 : 접쇠 심화\",\r\n            \"야금술 : 주조 기본\",\r\n            \"조화의 파편 주머니(대)\",\r\n            \"재봉술 : 매듭 심화\",\r\n            \"크라테르의 권능 : 방어구\",\r\n            \"크라테르의 권능 : 무기\",\r\n            \"아크투르스의 의지 : 무기\",\r\n            \"크라테르의 서 : 무기\",\r\n            \"크라테르의 서 : 방어구\",\r\n            \"야금술 : 단조 복합\",\r\n          ];\r\n          const filteredItems = response.data.Items.filter(\r\n            (item) => !itemsToExclude.includes(item.Name)\r\n          );\r\n          return filteredItems;\r\n        } catch (error) {\r\n          console.log(error);\r\n          return [];\r\n        }\r\n      } else if (e.CategoryCode === 40000) {\r\n        try {\r\n          const filteredItems = response.data.Items.filter((item) =>\r\n            item.Grade.includes(\"전설\")\r\n          );\r\n          return filteredItems;\r\n        } catch (error) {\r\n          console.log(error);\r\n          return [];\r\n        }\r\n      } else if (e.CategoryCode === 70000) {\r\n        try {\r\n          const filteredItems = response.data.Items.filter(\r\n            (item) => item.BundleCount == 10\r\n          );\r\n          return filteredItems;\r\n        } catch (error) {\r\n          console.log(error);\r\n          return [];\r\n        }\r\n      } else {\r\n        try {\r\n          return response.data.Items;\r\n        } catch (error) {\r\n          console.log(error);\r\n          return [];\r\n        }\r\n      }\r\n    };\r\n    const delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\n    const fetchData = async () => {\r\n      const promises = [];\r\n      for (let pageNo = 1; pageNo <= e.PageNum; pageNo++) {\r\n        const data = await getPageData(pageNo);\r\n        if (data instanceof Error) {\r\n          if (data.response.status === 429) {\r\n            await delay(60000);\r\n            i--;\r\n          } else {\r\n            break;\r\n          }\r\n        } else {\r\n          promises.push(data);\r\n        }\r\n\r\n        // promises.push(getPageData(pageNo));\r\n      }\r\n      try {\r\n        const resultArrays = await Promise.all(promises);\r\n        const list = resultArrays.flat(); // Flatten the array of arrays\r\n        let newlist = list;\r\n        newlist.map((i) => (i.Category = e.Category));\r\n        if (e.CategoryCode === 50000) {\r\n          const condition = [\r\n            \"명예의 파편 주머니(소)\",\r\n            \"명예의 파편 주머니(중)\",\r\n            \"명예의 파편 주머니(대)\",\r\n          ];\r\n          const resultList = list.filter((e) => condition.includes(e.Name));\r\n          let result = 0;\r\n          resultList.map((e) => {\r\n            result += e.YDayAvgPrice;\r\n          });\r\n          const avg = result / 3000;\r\n          const avghonor = {\r\n            Id: 22,\r\n            Category: \"재련\",\r\n            Name: \"명예의 파편(낱개)\",\r\n            Grade: \"일반\",\r\n            Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_7_147.png\",\r\n            BundleCount: 1,\r\n            TradeRemainCount: null,\r\n            YDayAvgPrice: avg,\r\n            RecentPrice: 1,\r\n            CurrentMinPrice: 1,\r\n          };\r\n          newlist.push(avghonor);\r\n        }\r\n        newarray = [...newarray, ...newlist];\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    await fetchData();\r\n  }\r\n  return newarray;\r\n};\r\nmodule.exports = getMakeList;\r\n","// loadMarket.js\r\nconst axios = require(\"axios\");\r\nconst authorizationToken = process.env.API_KEY;\r\nconst getPageData = async (pageNo) => {\r\n  const config = {\r\n    method: \"post\",\r\n    url: \"https://developer-lostark.game.onstove.com/auctions/items\",\r\n    headers: {\r\n      accept: \"application/json\",\r\n      authorization: `bearer ${authorizationToken}`,\r\n      \"content-Type\": \"application/json\",\r\n    },\r\n    data: {\r\n      ItemLevelMin: 0,\r\n      ItemLevelMax: 0,\r\n      ItemGradeQuality: null,\r\n      SkillOptions: [\r\n        {\r\n          FirstOption: null,\r\n          SecondOption: null,\r\n          MinValue: null,\r\n          MaxValue: null,\r\n        },\r\n      ],\r\n      EtcOptions: [\r\n        {\r\n          FirstOption: null,\r\n          SecondOption: null,\r\n          MinValue: null,\r\n          MaxValue: null,\r\n        },\r\n      ],\r\n      Sort: \"BidStart_Price\",\r\n      CategoryCode: 210000,\r\n      CharacterClass: \"\",\r\n      ItemTier: 3,\r\n      ItemGrade: \"\",\r\n      ItemName: \"5레벨\",\r\n      PageNo: pageNo,\r\n      SortCondition: \"ASC\",\r\n    },\r\n  };\r\n  try {\r\n    const response = await axios(config);\r\n    return response.data.Items;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return [];\r\n  }\r\n};\r\nconst loadjem = async () => {\r\n  const promises = [];\r\n  for (let pageNo = 0; pageNo <= 10; pageNo++) {\r\n    promises.push(getPageData(pageNo));\r\n  }\r\n  try {\r\n    const resultArrays = await Promise.all(promises);\r\n    const list = resultArrays.flat(); // Flatten the array of arrays\r\n    const newlist = list.map((i) => i.AuctionInfo.BuyPrice);\r\n    const sum = newlist.reduce((total, num) => {\r\n      if (num !== null && num < 3000) {\r\n        return total + num;\r\n      } else {\r\n        return total;\r\n      }\r\n    }, 0);\r\n    function countNonNullElements(arr) {\r\n      let count = 0;\r\n      for (let i = 0; i < arr.length; i++) {\r\n        if (arr[i] !== null && arr[i] < 3000) {\r\n          count++;\r\n        }\r\n      }\r\n      return count;\r\n    }\r\n    const nonNullCount = countNonNullElements(newlist);\r\n    const avg = sum / nonNullCount;\r\n    return avg;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return [];\r\n  }\r\n};\r\nasync function jem() {\r\n  const avg = await loadjem();\r\n  const etc = [\r\n    {\r\n      Id: 1,\r\n      Category: \"기타\",\r\n      Name: \"골드\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/money/money_4.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 1,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 2,\r\n      Category: \"기타\",\r\n      Name: \"더보기 골드\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FPrU44%2FbtszpBxVLgu%2Fz3mqnQKEdV41pHQIVxgXs1%2Fimg.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: -1,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 3,\r\n      Category: \"기타\",\r\n      Name: \"1레벨 보석\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_9_46.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: (avg / 3 / 3 / 3 / 3).toFixed(1),\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 4,\r\n      Category: \"기타\",\r\n      Name: \"2레벨 보석\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_9_47.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: (avg / 3 / 3 / 3).toFixed(1),\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 5,\r\n      Category: \"기타\",\r\n      Name: \"3레벨 보석\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_9_48.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: (avg / 3 / 3).toFixed(1),\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 6,\r\n      Category: \"기타\",\r\n      Name: \"4레벨 보석\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_9_49.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: (avg / 3).toFixed(1),\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 7,\r\n      Category: \"기타\",\r\n      Name: \"5레벨 보석\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_9_50.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: avg.toFixed(1),\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 8,\r\n      Category: \"기타\",\r\n      Name: \"혼돈의 돌\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_6_89.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 9,\r\n      Category: \"기타\",\r\n      Name: \"마수의 뼈\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_3_101.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 10,\r\n      Category: \"기타\",\r\n      Name: \"욕망의 날개\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_3_124.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 11,\r\n      Category: \"기타\",\r\n      Name: \"광기의 나팔\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_10_19.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 12,\r\n      Category: \"기타\",\r\n      Name: \"몽환의 사념\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_10_80.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 13,\r\n      Category: \"기타\",\r\n      Name: \"쇠락의 눈동자\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_19.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 14,\r\n      Category: \"기타\",\r\n      Name: \"시련의 빛\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_10_164.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 15,\r\n      Category: \"기타\",\r\n      Name: \"관조의 빛무리\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_10_163.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 16,\r\n      Category: \"기타\",\r\n      Name: \"선명한 지혜의 엘릭서\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_147.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 17,\r\n      Category: \"기타\",\r\n      Name: \"빛나는 지혜의 엘릭서\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_146.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 18,\r\n      Category: \"기타\",\r\n      Name: \"선명한 지혜의 기운\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_3_111.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 19,\r\n      Category: \"기타\",\r\n      Name: \"빛나는 지혜의 기운\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_3_67.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 20,\r\n      Category: \"기타\",\r\n      Name: \"어둠의 불\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_239.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 21,\r\n      Category: \"기타\",\r\n      Name: \"마력의 샘물\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_237.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 22,\r\n      Category: \"기타\",\r\n      Name: \"담금질 : 알키오네의 눈\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_12_54.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 23,\r\n      Category: \"기타\",\r\n      Name: \"담금질 : 아그리스의 비늘\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_12_53.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 24,\r\n      Category: \"기타\",\r\n      Name: \"농축 돌파석\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_18.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 25,\r\n      Category: \"기타\",\r\n      Name: \"심화 돌파석\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_7_171.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 26,\r\n      Category: \"기타\",\r\n      Name: \"융합 돌파석\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_7_173.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n  ];\r\n  return etc;\r\n}\r\nmodule.exports = jem;\r\n","// loadMarket.js\r\nconst mongoose = require(\"mongoose\");\r\nconst axios = require(\"axios\");\r\nconst trading_data = require(\"../model/trading_data\");\r\nconst marketList = require(\"../model/market\");\r\nmongoose\r\n  .connect(\r\n    `mongodb+srv://${process.env.DB_USER}:${process.env.DB_PASSWORD}@cluster0.ttcs9nu.mongodb.net/${process.env.DB_NAME}?retryWrites=true&w=majority`,\r\n    { useNewUrlParser: true, useUnifiedTopology: true }\r\n  )\r\n  .then(() => {\r\n    console.log(\"MONGO CONNECTION OPEN!!!\");\r\n  })\r\n  .catch((err) => {\r\n    console.log(\"OH NO MONGO CONNECTION ERROR!!!!\");\r\n    console.log(err);\r\n  });\r\nconst authorizationToken = process.env.API_KEY;\r\n\r\n// 문제점\r\n// 단순한 반복으로 인한 429에러\r\n\r\n//해결책\r\n//먼저 보낸 응답을 확인하고 응답에 따라 다음 id 로드하기.\r\n\r\nconst getPageData = async (Id) => {\r\n  const config = {\r\n    method: \"get\",\r\n    url: `https://developer-lostark.game.onstove.com/markets/items/${Id}`,\r\n    headers: {\r\n      accept: \"application/json\",\r\n      authorization: `bearer ${authorizationToken}`,\r\n      \"content-Type\": \"application/json\",\r\n    },\r\n  };\r\n  try {\r\n    let response = await axios(config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return error;\r\n  }\r\n};\r\n\r\nconst loadtrade = async () => {\r\n  try {\r\n    const IdList = await marketList.find(\r\n      { Id: { $gt: 1000 } },\r\n      { Id: 1, Category: 1, Name: 1 }\r\n    );\r\n\r\n    const delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\n    async function processDataWithDelay(IdList) {\r\n      let promises = [];\r\n      for (let i = 0; i < IdList.length; i++) {\r\n        const data = await getPageData(IdList[i].Id);\r\n        if (data instanceof Error) {\r\n          if (data.response.status === 429) {\r\n            await delay(60000);\r\n            i--;\r\n          } else {\r\n            break;\r\n          }\r\n        } else {\r\n          promises.push(data);\r\n        }\r\n\r\n        // promises.push(getPageData(IdList[i].Id));\r\n        // if ((i + 1) % 90 === 0) {\r\n        //   await delay(65000); // 65초 대기\r\n        //   console.log(\"pause\");\r\n        // }\r\n      }\r\n      // const resultArrays = await Promise.all(promises);\r\n      const lists = promises.flat();\r\n      // console.log(promises);\r\n      lists.map(\r\n        (a) => (a.Category = IdList.find((b) => b.Name == a.Name).Category)\r\n      );\r\n      for (const list of lists) {\r\n        const filter = { Name: list.Name };\r\n        const existingDoc = await trading_data.findOne(filter);\r\n        if (existingDoc) {\r\n          const existingDocStats = existingDoc.Stats ? existingDoc.Stats : [];\r\n          const listStats = list.Stats ? list.Stats : [];\r\n          listStats.forEach((listStat) => {\r\n            const existingStatIndex = existingDocStats.findIndex(\r\n              (stat) => stat.Date === listStat.Date\r\n            );\r\n            if (existingStatIndex !== -1) {\r\n              existingDocStats[existingStatIndex] = listStat;\r\n            } else {\r\n              existingDocStats.push(listStat);\r\n            }\r\n          });\r\n          const updatedDocument = await trading_data.findOneAndUpdate(\r\n            filter,\r\n            {\r\n              $set: {\r\n                Stats: existingDocStats.sort(\r\n                  (a, b) => new Date(b.Date) - new Date(a.Date)\r\n                ),\r\n              },\r\n            },\r\n            { new: true }\r\n          );\r\n        } else {\r\n          const newDocument = await trading_data.create(list);\r\n        }\r\n      }\r\n      console.log(\"done\");\r\n    }\r\n    processDataWithDelay(IdList);\r\n  } catch (error) {\r\n    console.log(error);\r\n    return [];\r\n  }\r\n};\r\n\r\nmodule.exports = loadtrade;\r\n","//update.js\r\nconst mongoose = require(\"mongoose\");\r\nconst marketList = require(\"../model/market\");\r\nconst getMakeList = require(\"./loadMarket\");\r\nconst jem = require(\"./loadjem\"); // 파일 경로에 맞게 수정\r\nconst loadtrade = require(\"./loadtrade\");\r\nmongoose\r\n  .connect(\r\n    `mongodb+srv://${process.env.DB_USER}:${process.env.DB_PASSWORD}@cluster0.ttcs9nu.mongodb.net/${process.env.DB_NAME}?retryWrites=true&w=majority`,\r\n    { useNewUrlParser: true, useUnifiedTopology: true }\r\n  )\r\n  .then(() => {\r\n    console.log(\"MONGO CONNECTION OPEN!!!\");\r\n    fetchDataAndUpdate();\r\n  })\r\n  .catch((err) => {\r\n    console.log(\"OH NO MONGO CONNECTION ERROR!!!!\");\r\n    console.log(err);\r\n  });\r\n\r\nasync function fetchDataAndUpdate() {\r\n  try {\r\n    const importedList = await getMakeList();\r\n    const jemData = await jem(); // jem 함수 호출\r\n    const conbined = [...importedList, ...jemData];\r\n    await marketList.deleteMany({}); // 기존 데이터 모두 삭제\r\n    await marketList.insertMany(conbined);\r\n    setTimeout(() => loadtrade(), 65000);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\nmodule.exports = fetchDataAndUpdate;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst captchaCodeSchema = new mongoose.Schema({\r\n  Num: String,\r\n  expiresTime: {\r\n    type: Date,\r\n    expires: \"5m\",\r\n    default: Date.now,\r\n  },\r\n});\r\n//만료 시간을 5분으로 설정했습니다.\r\nconst captchaCode = mongoose.model(\"captchaCode\", captchaCodeSchema);\r\ncaptchaCode.collection.createIndex(\r\n  { expiresTime: 1 },\r\n  { expireAfterSeconds: 0 }\r\n);\r\n//인덱스 설정을 통해 정해진 시간이 지나면 삭제되도록 합니다.\r\n\r\nmodule.exports = captchaCode;\r\n","const mongoose = require(\"mongoose\");\r\n\r\n//rooms id time message\r\n\r\nconst ChatLogSchema = new mongoose.Schema({\r\n  date: Date,\r\n  roomName: String,\r\n  id: String,\r\n  //소켓 아이디나 회원 아이디.\r\n  message: String,\r\n  expiresTime: {\r\n    type: Date,\r\n    expires: \"24h\", // 24시간 후에 문서가 만료되도록 설정\r\n    default: () => Date.now() + 24 * 60 * 60 * 1000, // 현재 시간에 24시간을 더한 시간을 기본값으로 설정\r\n  },\r\n});\r\n//변수명               모델 이름 스키마이름\r\nconst chatLog = mongoose.model(\"ChatLog\", ChatLogSchema);\r\n// chatLog.collection.createIndex({ expiresTime: 1 }, { expireAfterSeconds: 0 });\r\n\r\nmodule.exports = chatLog;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst HasItemSchema = new mongoose.Schema({\r\n  _id: {\r\n    type: [String],\r\n  },\r\n  grade: {\r\n    type: [String],\r\n  },\r\n  forwho: {\r\n    type: [String],\r\n  },\r\n  category: {\r\n    type: [String],\r\n  },\r\n  stat: {\r\n    type: Object,\r\n    default: {},\r\n  },\r\n  skill: {\r\n    type: Object,\r\n    default: {},\r\n  },\r\n  panalty: {\r\n    type: Object,\r\n    default: {},\r\n  },\r\n  location: {\r\n    type: [String],\r\n  },\r\n});\r\nconst HasItemListsSchema = new mongoose.Schema({\r\n  ID: String,\r\n  Item: [HasItemSchema],\r\n});\r\n\r\nconst HasItem = mongoose.model(\"HasItem\", HasItemListsSchema);\r\n\r\nmodule.exports = HasItem;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst ItemSchema = new mongoose.Schema(\r\n  {\r\n    Id: Number,\r\n    Category: String,\r\n    Name: String,\r\n    Grade: String,\r\n    Icon: String,\r\n    BundleCount: Number,\r\n    TradeRemainCount: Number,\r\n    YDayAvgPrice: Number,\r\n    RecentPrice: Number,\r\n    CurrentMinPrice: Number,\r\n    Quantity: Number,\r\n    Quantity2: Number,\r\n  },\r\n  { _id: false }\r\n); // _id 필드 사용 안 함\r\nconst ContentListsSchema = new mongoose.Schema({\r\n  _id: { type: String, required: false },\r\n  Title: String,\r\n  List: [ItemSchema],\r\n  Category: String,\r\n  ID: { type: String, required: false },\r\n});\r\n\r\nconst MarketItem = mongoose.model(\"MarketItem\", ContentListsSchema);\r\n\r\nmodule.exports = MarketItem;\r\n","//market.js\r\n\r\nconst mongoose = require(\"mongoose\");\r\n\r\nconst marketListSchema = new mongoose.Schema({\r\n  Id: Number,\r\n  Category: String,\r\n  Name: String,\r\n  Grade: String,\r\n  Icon: String,\r\n  BundleCount: Number,\r\n  TradeRemainCount: Number, // 또는 null 허용하려면 { type: Number, default: null }로 설정\r\n  YDayAvgPrice: Number,\r\n  RecentPrice: Number,\r\n  CurrentMinPrice: Number,\r\n});\r\n\r\nconst marketList = mongoose.model(\"Item\", marketListSchema);\r\n\r\nmodule.exports = marketList;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst ReportSchema = new mongoose.Schema({\r\n  Title: String,\r\n  Body: String,\r\n});\r\n\r\nconst Report = mongoose.model(\"Report\", ReportSchema);\r\n\r\nmodule.exports = Report;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst TextSchema = new mongoose.Schema({\r\n  TextTitle: { type: String, required: false, maxlength: 90 },\r\n  TextBody: { type: String, required: false, maxlength: 1500 },\r\n  Category: String,\r\n  Category2: String,\r\n  _id: String,\r\n  ID: { type: String, required: false, maxlength: 60 },\r\n  Date: Date,\r\n  FakeID: { type: String, required: false, maxlength: 60 },\r\n  FakePassWord: { type: String, required: false, maxlength: 60 },\r\n});\r\nconst Text = mongoose.model(\"Text\", TextSchema);\r\nmodule.exports = Text;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst Schema = mongoose.Schema;\r\n\r\n// '파괴석 조각' 컬렉션의 스키마 정의\r\nconst trading_dataSchema = new Schema({\r\n  Category: {\r\n    type: String,\r\n    // required: true,\r\n  },\r\n  Name: {\r\n    type: String,\r\n    // required: true,\r\n  },\r\n  TradeRemainCount: {\r\n    type: Number,\r\n    default: null, // TradeRemainCount가 주어지지 않은 경우 기본값으로 null 설정\r\n  },\r\n  BundleCount: {\r\n    type: Number,\r\n    // required: true,\r\n  },\r\n  Stats: {\r\n    type: [Object], // Stats는 객체의 배열로 구성된다고 가정합니다.\r\n  },\r\n});\r\n\r\n// '파괴석 조각' 컬렉션을 생성\r\nconst trading_data = mongoose.model(\"trading_data\", trading_dataSchema);\r\n\r\nmodule.exports = trading_data;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst UserSchema = new mongoose.Schema({\r\n  ID: {\r\n    type: String,\r\n    maxlength: 60,\r\n  },\r\n  Password: {\r\n    type: String,\r\n    maxlength: 60,\r\n  },\r\n  Question: {\r\n    type: String,\r\n    maxlength: 60,\r\n  },\r\n  Answer: {\r\n    type: String,\r\n    maxlength: 60,\r\n  },\r\n  Role: String,\r\n});\r\n\r\nconst User = mongoose.model(\"User\", UserSchema);\r\n\r\nmodule.exports = User;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst visitedSchema = new mongoose.Schema({\r\n  Date: String,\r\n  todayTotal: Number,\r\n});\r\n\r\nconst Visited = mongoose.model(\"visited\", visitedSchema);\r\n\r\nmodule.exports = Visited;\r\n","module.exports = require(\"axios\");","module.exports = require(\"body-parser\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"cors\");","module.exports = require(\"debug\");","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"mongoose\");","module.exports = require(\"morgan\");","module.exports = require(\"nunjucks\");","module.exports = require(\"passport\");","module.exports = require(\"passport-jwt\");","module.exports = require(\"socket.io\");","module.exports = require(\"winston\");","module.exports = require(\"http\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","//server.js\r\nconst express = require(\"express\");\r\nconst cors = require(\"cors\");\r\nconst app = express();\r\n\r\nconst { createServer } = require(\"http\");\r\nconst { Server } = require(\"socket.io\");\r\n\r\nvar port = normalizePort(process.env.PORT || \"3001\");\r\napp.set(\"port\", port);\r\n\r\nvar debug = require(\"debug\")(\"myapp:server\");\r\n// var http = require(\"http\");\r\n// var server = http.createServer(app);\r\nvar httpServer = createServer(app);\r\n\r\nhttpServer.on(\"error\", onError);\r\nhttpServer.on(\"listening\", onListening);\r\n\r\nconst mongoose = require(\"mongoose\");\r\nconst marketList = require(\"./src/model/market\");\r\nconst chatLog = require(\"./src/model/chatLog\");\r\n\r\nconst MarketItem = require(\"./src/model/item\");\r\nconst Text = require(\"./src/model/text\");\r\nconst User = require(\"./src/model/user\");\r\nconst Report = require(\"./src/model/report\");\r\nconst hasitem = require(\"./src/model/hasitem\");\r\nconst trading_data = require(\"./src/model/trading_data\");\r\nconst captchaCode = require(\"./src/model/captchaCode\");\r\nconst Visited = require(\"./src/model/visited\");\r\nrequire(\"dotenv\").config();\r\nconst passport = require(\"passport\");\r\nconst passportJWT = require(\"passport-jwt\");\r\nconst JwtStrategy = passportJWT.Strategy;\r\nconst ExtractJwt = passportJWT.ExtractJwt;\r\nconst jwt = require(\"jsonwebtoken\");\r\nconst winston = require(\"winston\");\r\nvar cookieParser = require(\"cookie-parser\");\r\nvar logger = require(\"morgan\");\r\nconst nunjucks = require(\"nunjucks\");\r\nconst path = require(\"path\");\r\nconst bodyParser = require(\"body-parser\");\r\nconst axios = require(\"axios\");\r\nconst fetchDataAndUpdate = require(\"./src/controllers/update\");\r\n\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(bodyParser.json());\r\napp.use(express.json());\r\napp.use(passport.initialize());\r\napp.use(logger(\"dev\"));\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\napp.use(\r\n  cors({\r\n    origin: [\r\n      \"http://localhost:3000\",\r\n      \"https://www.nextriceark.site\",\r\n      \"https://nextriceark-jnwk-git-main-nakkis-projects.vercel.app\",\r\n      \"https://nextriceark-jnwk-46nic2wxb-nakkis-projects.vercel.app\",\r\n      \"https://nextriceark-jnwk.vercel.app\",\r\n      \"https://developer-lostark.game.onstove.com\",\r\n    ],\r\n    credentials: true,\r\n  })\r\n);\r\n\r\nmongoose\r\n  .connect(\r\n    `mongodb+srv://${process.env.DB_USER}:${process.env.DB_PASSWORD}@cluster0.ttcs9nu.mongodb.net/${process.env.DB_NAME}?retryWrites=true&w=majority`\r\n  )\r\n  .then(() => {\r\n    console.log(\"MONGO CONNECTION OPEN!!!\");\r\n  })\r\n  .catch((err) => {\r\n    console.log(\"OH NO MONGO CONNECTION ERROR!!!!\");\r\n    console.log(err);\r\n  });\r\n\r\nfunction normalizePort(val) {\r\n  var port = parseInt(val, 10);\r\n\r\n  if (isNaN(port)) {\r\n    // named pipe\r\n    return val;\r\n  }\r\n\r\n  if (port >= 0) {\r\n    // port number\r\n    return port;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction onError(error) {\r\n  if (error.syscall !== \"listen\") {\r\n    throw error;\r\n  }\r\n\r\n  var bind = typeof port === \"string\" ? \"Pipe \" + port : \"Port \" + port;\r\n\r\n  // handle specific listen errors with friendly messages\r\n  switch (error.code) {\r\n    case \"EACCES\":\r\n      console.error(bind + \" requires elevated privileges\");\r\n      process.exit(1);\r\n      break;\r\n    case \"EADDRINUSE\":\r\n      console.error(bind + \" is already in use\");\r\n      process.exit(1);\r\n      break;\r\n    default:\r\n      throw error;\r\n  }\r\n}\r\n\r\nfunction onListening() {\r\n  var addr = httpServer.address();\r\n  var bind = typeof addr === \"string\" ? \"pipe \" + addr : \"port \" + addr.port;\r\n  debug(\"Listening on \" + bind);\r\n}\r\n\r\nconst jwtOptions = {\r\n  jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\r\n  secretOrKey: process.env.JWT_KEY,\r\n};\r\n\r\nconst strategy = new JwtStrategy(jwtOptions, async (jwt_payload, done) => {\r\n  try {\r\n    const existingUser = await User.findOne({ ID: jwt_payload.ID });\r\n\r\n    if (existingUser) {\r\n      return done(null, existingUser);\r\n    } else {\r\n      return done(null, false);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"serError updating data:\", error);\r\n    res.status(500).json({ error: \"serInternal server error\" });\r\n  }\r\n});\r\npassport.use(strategy);\r\n\r\n// 미들웨어: 쿠키 검증 및 사용자 인증\r\nconst authenticateToken = (req, res, next) => {\r\n  const token = req.cookies.token;\r\n\r\n  if (!token) {\r\n    return res.status(401).json({ message: \"Authentication failed\" });\r\n  }\r\n\r\n  jwt.verify(token, jwtOptions.secretOrKey, (err, user) => {\r\n    if (err) {\r\n      // 토큰 검증 실패 시\r\n      return res.status(403).json({ message: \"Invalid token\" });\r\n    }\r\n    req.user = user; // 검증된 사용자 정보를 요청 객체에 저장\r\n    next();\r\n  });\r\n};\r\n\r\nfunction checkAdminRole(req, res, next) {\r\n  const token = req.headers.authorization;\r\n  const realtoken = token.split(\" \")[1];\r\n  try {\r\n    if (!token) {\r\n      return res.status(401).json({ message: \"No token provided.\" });\r\n    }\r\n\r\n    jwt.verify(realtoken, process.env.JWT_KEY, (err, decoded) => {\r\n      if (err) {\r\n        // return console.log(res);;\r\n        //   return res.status(403).json({ message: 'serInvalid token.' });\r\n        // }\r\n        console.error(\"JWT verification error:\", err);\r\n        return res.status(403).json({ message: \"Invalid token.\" });\r\n      }\r\n\r\n      if (decoded.Role === \"admin\") {\r\n        // 사용자 역할이 'admin'인 경우에만 다음 미들웨어 또는 라우트로 이동\r\n        next();\r\n      } else {\r\n        return res\r\n          .status(403)\r\n          .json({ message: \"Access denied: Not an admin.\" });\r\n      }\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n}\r\n\r\napp.get(\"/api/touch\", async (req, res) => {\r\n  // 0부터 9999까지의 난수 생성\r\n  const randomNum = Math.floor(Math.random() * 10000);\r\n  const formattedNum = String(randomNum).padStart(4, \"0\");\r\n  const insertResult = await captchaCode.insertMany({ Num: formattedNum });\r\n  // 난수를 4자리 문자열로 변환\r\n  res.send(insertResult[0].Num);\r\n});\r\n\r\napp.get(\"/\", (req, res) => {\r\n  const currentTime = new Date().toLocaleTimeString();\r\n  res.send(`현재 시간: ${currentTime}`);\r\n  // res.send(\"hi\");\r\n});\r\napp.get(\"/api/ServerState\", (req, res) => {\r\n  res.send(`On`);\r\n  // res.send(\"hi\");\r\n});\r\n\r\nconst socketCorsOrigin = process.env.NODE_ENV\r\n  ? \"https://www.nextriceark.site\"\r\n  : `http://localhost:3000`;\r\nconst io = new Server(httpServer, {\r\n  cors: {\r\n    origin: socketCorsOrigin,\r\n    credentials: true,\r\n  },\r\n});\r\n\r\nconst connectedClients = {};\r\napp.get(\"/api/SocketID\", async (req, res) => {\r\n  // 0부터 9999까지의 난수 생성\r\n  const data = Object.keys(connectedClients);\r\n  res.send(data);\r\n});\r\napp.post(\"/api/RoomList\", async (req, res) => {\r\n  // 0부터 9999까지의 난수 생성\r\n  let roomList = [];\r\n  let { id } = req.body;\r\n\r\n  for (let key of io.sockets.adapter.rooms.keys()) {\r\n    roomList.push(key);\r\n  }\r\n  const data = roomList.filter((element) => {\r\n    return element.split(\"___\").includes(id) && element.split(\"___\").length > 1;\r\n  });\r\n  res.send(data);\r\n});\r\nio.on(\"connection\", (socket) => {\r\n  console.log(`Client connected ${socket.id}`);\r\n  // socket.disconnect(true);\r\n  // console.log(io.sockets.adapter.rooms.keys());\r\n\r\n  connectedClients[socket.id] = socket;\r\n\r\n  // app.post(\"/api/SocketMakeRoom\", async (req, res) => {\r\n  //   // 0부터 9999까지의 난수 생성\r\n  //   const { data } = req.body;\r\n  //   let roomName = data;\r\n  //   // console.log(roomName);\r\n\r\n  //   // socket.join(roomName);\r\n  //   res.send(\"hi\");\r\n  // });\r\n\r\n  socket.on(\"join\", (roomName) => {\r\n    if (io.sockets.adapter.rooms.get(roomName) != undefined) {\r\n      !io.sockets.adapter.rooms.get(roomName).has(socket.id) &&\r\n        socket.join(roomName);\r\n    }\r\n  });\r\n\r\n  socket.on(\"chat\", (chatdata) => {\r\n    !io.sockets.adapter.rooms.has(chatdata.roomName) &&\r\n      socket.join(chatdata.roomName);\r\n    //최초 메세지 쏜사람이 조인 뚫어둠. 두번째 돌릴떄는 무시됨.\r\n    ////////\r\n    //확인된 오류 이미 조인된 상태에서 같은 생대를 클릭해서 대화 생성시 받는건되는데 주는건 안됨.- 오락가락함\r\n    //////\r\n    chatLog.insertMany(chatdata);\r\n    console.log(\r\n      `Message from ${chatdata.roomName} ${socket.id}: ${chatdata.message}`\r\n    );\r\n    let data = {\r\n      userId: socket.id === chatdata.id ? chatdata.id : null,\r\n      content: chatdata.message,\r\n      roomName: chatdata.roomName,\r\n      date: new Date(),\r\n    };\r\n    socket.emit(\"chat2\", data);\r\n    let idSet = new Set(chatdata.roomName.split(\"___\"));\r\n    // idSet.delete(socket.id) 나도 봐야되니까 없앨필요없을듯.\r\n    idSet.forEach((element) => {\r\n      socket.to(element).emit(\"chat2\", data);\r\n    });\r\n\r\n    // socket.to(chatdata.roomName).emit(\"chat2\", data);\r\n  });\r\n\r\n  socket.on(\"leaveRoom\", (currentRoomName) => {\r\n    // socket.leave(currentRoomName);\r\n\r\n    let data = {\r\n      userId: `system`,\r\n      content: `${socket.id}가 나갔습니다.`,\r\n      roomName: currentRoomName,\r\n    };\r\n    let idSet = new Set(\r\n      currentRoomName.split(\"___\").filter((e) => {\r\n        return socket.id != e;\r\n      })\r\n    );\r\n    idSet.forEach((element) => {\r\n      socket.to(element).emit(\"chat2\", data);\r\n    });\r\n\r\n    if (io.sockets.adapter.rooms.has(currentRoomName)) {\r\n      const clients = io.sockets.adapter.rooms.get(currentRoomName);\r\n      if (clients) {\r\n        clients.forEach((clientId) => {\r\n          io.sockets.sockets.get(clientId).leave(currentRoomName); // 클라이언트를 룸에서 제거\r\n        });\r\n      }\r\n    }\r\n\r\n    // 2. 룸 삭제\r\n    io.sockets.adapter.del(currentRoomName);\r\n  });\r\n\r\n  // 클라이언트가 연결을 종료했을 때 처리\r\n  socket.on(\"disconnect\", (roomName) => {\r\n    console.log(\"Client disconnected: \" + socket.id);\r\n\r\n    let roomList = Array.from(io.sockets.adapter.rooms).map((room) => {\r\n      return room[0]; // 각 room의 첫번째 요소가 room의 이름 (Socket ID)\r\n    });\r\n\r\n    for (let currentRoomName of roomList) {\r\n      let data = {\r\n        userId: `system`,\r\n        content: `${socket.id}가 나갔습니다. 잠시후 방이 사라집니다.`,\r\n        roomName: currentRoomName,\r\n      };\r\n      let idSet = new Set(\r\n        currentRoomName.split(\"___\").filter((e) => {\r\n          return socket.id != e;\r\n        })\r\n      );\r\n      idSet.forEach((element) => {\r\n        socket.to(element).emit(\"chat2\", data);\r\n      });\r\n      if (io.sockets.adapter.rooms.has(currentRoomName)) {\r\n        const clients = io.sockets.adapter.rooms.get(currentRoomName);\r\n        if (clients) {\r\n          clients.forEach((clientId) => {\r\n            io.sockets.sockets.get(clientId).leave(currentRoomName); // 클라이언트를 룸에서 제거\r\n          });\r\n        }\r\n      }\r\n\r\n      // 2. 룸 삭제\r\n      io.sockets.adapter.del(currentRoomName);\r\n    }\r\n\r\n    delete connectedClients[socket.id];\r\n  });\r\n});\r\n\r\napp.get(\"/api/VisitorCount\", async (req, res) => {\r\n  let totalVistor = 0;\r\n  const result = await Visited.aggregate([\r\n    {\r\n      $group: {\r\n        _id: null,\r\n        total: { $sum: \"$todayTotal\" },\r\n      },\r\n    },\r\n  ]);\r\n\r\n  if (result.length > 0) {\r\n    totalVistor = result[0].total + 1;\r\n  } else {\r\n    console.log(\"데이터가 없습니다.\");\r\n  }\r\n\r\n  const currentDate = new Date();\r\n  const year = currentDate.getFullYear();\r\n  const month = String(currentDate.getMonth() + 1).padStart(2, \"0\"); // 월을 두 자리로 표시\r\n  const day = String(currentDate.getDate()).padStart(2, \"0\"); // 일을 두 자리로 표시\r\n\r\n  const formattedDate = `${year}-${month}-${day}`;\r\n  const todatVisitor = await Visited.find({ Date: formattedDate });\r\n\r\n  await Visited.updateOne({ Date: formattedDate }, { $inc: { todayTotal: 1 } });\r\n  const VisitorData = {\r\n    Total: totalVistor,\r\n    Today: todatVisitor[0].todayTotal,\r\n  };\r\n\r\n  res.json(VisitorData);\r\n});\r\n\r\napp.get(\"/api/captchaCode\", async (req, res) => {\r\n  try {\r\n    const randomNum = Math.floor(Math.random() * 10000);\r\n    const formattedNum = String(randomNum).padStart(4, \"0\");\r\n    const [insertedResult] = await captchaCode.insertMany({\r\n      Num: formattedNum,\r\n    });\r\n    res.send(insertedResult.Num);\r\n  } catch (error) {\r\n    console.error(\"Error generating captcha code:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n//임의의 수를 생성해서 DB에 저장하고 결과 값을 보냅니다.\r\n\r\napp.delete(\"/api/captchaCode\", async (req, res) => {\r\n  const data = req.query;\r\n\r\n  try {\r\n    await captchaCode.deleteMany({\r\n      Num: data.captchaCode,\r\n    });\r\n    res.status(201).json({ message: \"Data updated successfully\" });\r\n  } catch (error) {\r\n    console.error(\"Error generating captcha code:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n//임의의 수를 생성해서 DB에 저장하고 결과 값을 보냅니다.\r\n\r\napp.get(\"/api/data\", async (req, res) => {\r\n  const marketLists = await marketList.find({});\r\n  res.json(marketLists);\r\n});\r\n\r\napp.get(\"/api/load\", async (req, res) => {\r\n  const MarketItems = await MarketItem.find({});\r\n  res.json(MarketItems);\r\n});\r\napp.get(\"/api/trade\", async (req, res) => {\r\n  const MarketItems = await trading_data.find({});\r\n  res.json(MarketItems);\r\n});\r\n\r\napp.get(\"/api/loadreport\", async (req, res) => {\r\n  const Reports = await Report.find({});\r\n  res.json(Reports);\r\n});\r\n\r\napp.post(\"/api/Login\", async (req, res) => {\r\n  const { ID, Password } = req.body;\r\n  const user = await User.findOne({ ID: ID, Password: Password });\r\n\r\n  if (user) {\r\n    const payload = {\r\n      ID: user.ID,\r\n      Role: user.Role,\r\n      iat: Math.floor(Date.now() / 1000), // 토큰 발행 시간 (Unix 타임스탬프)\r\n      exp: Math.floor(Date.now() / 1000) + 60 * 60, // 1시간 후 만료\r\n    };\r\n    const token = jwt.sign(payload, jwtOptions.secretOrKey);\r\n    const expirationDate = new Date(); // 수정된 부분\r\n    expirationDate.setDate(expirationDate.getDate() + 1);\r\n    res.cookie(\"token\", token, {\r\n      expires: expirationDate,\r\n      sameSite: \"None\",\r\n      secure: true,\r\n      httpOnly: true,\r\n    });\r\n    res.json({ token });\r\n  } else {\r\n    res.status(401).json({ message: \"Authentication failed\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/check\", async (req, res) => {\r\n  const user = req.body; // 클라이언트에서 보낸 사용자 데이터\r\n  try {\r\n    const existingUser = await User.findOne({ ID: user.Item.ID });\r\n    if (!existingUser) {\r\n      res.json(false);\r\n    } else {\r\n      res.json(true);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/signup\", async (req, res) => {\r\n  const user = req.body; // 클라이언트에서 보낸 사용자 데이터\r\n\r\n  // if (captchaCode.findOne({Num:user.Pass})) {\r\n  const existingpass2 = await captchaCode.deleteMany({ Num: user.Pass });\r\n  if (existingpass2.deletedCount > 0) {\r\n    try {\r\n      const existingUser = await User.findOne({ ID: user.Item.ID });\r\n      if (!existingUser) {\r\n        // 동일한 아이디를 가진 사용자가 없는 경우\r\n        if (user.Item.ID === \"adminim\") {\r\n          user.Item.Role = \"admin\"; // 특별한 아이디에게 \"admin\" 권한을 부여\r\n        } else {\r\n          user.Item.Role = \"user\"; // 일반적인 사용자에게는 \"user\" 권한을 부여\r\n        }\r\n\r\n        const newUser = await User.insertMany(user.Item); // 새로운 데이터 추가\r\n        console.log(newUser);\r\n        res.status(201).json({ message: \"Data updated successfully\" });\r\n      } else {\r\n        // 이미 동일한 아이디를 가진 사용자가 있는 경우\r\n        res.status(409).json({ error: \"User with this ID already exists\" });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating data:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\napp.post(\"/api/forget\", async (req, res) => {\r\n  const user = req.body; // 클라이언트에서 보낸 사용자 데이터\r\n  try {\r\n    const existingUser = await User.findOne({ ID: user.Item.ID });\r\n    if (existingUser) {\r\n      // 동일한 아이디를 가진 사용자가 없는 경우\r\n      res.json(existingUser.Question);\r\n    } else {\r\n      // 이미 동일한 아이디를 가진 사용자가 있는 경우\r\n      res.status(409).json({ error: \"User with this ID already exists\" });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\napp.post(\"/api/forget2\", async (req, res) => {\r\n  const user = req.body; // 클라이언트에서 보낸 사용자 데이터\r\n  try {\r\n    const existingUser = await User.findOne({\r\n      ID: user.Item.ID,\r\n      Question: user.Item.Question,\r\n      Answer: user.Item.Answer,\r\n    });\r\n    if (existingUser) {\r\n      // 동일한 아이디를 가진 사용자가 없는 경우\r\n      res.json(existingUser.Password);\r\n    } else {\r\n      // 이미 동일한 아이디를 가진 사용자가 있는 경우\r\n      res.status(409).json({ error: \"User with this ID already exists\" });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n// passport.authenticate('jwt', { session: false })\r\napp.post(\"/api/delete1\", async (req, res) => {\r\n  const list = req.body; // 클라이언트에서 보낸 Title 데이터\r\n  const token = req.headers.authorization;\r\n  const realtoken = token.split(\" \")[1];\r\n  const decoded = jwt.verify(realtoken, process.env.JWT_KEY);\r\n  if (decoded.ID === list.Item.ID) {\r\n    try {\r\n      // MarketItem 컬렉션에서 해당하는 Title 값을 가진 문서 삭제\r\n      const result = await MarketItem.deleteOne({ _id: list.Item._id });\r\n\r\n      if (result.deletedCount === 1) {\r\n        console.log(\"Document deleted successfully\");\r\n        res.status(200).json(\"True\");\r\n      } else {\r\n        console.log(\"Document not found\");\r\n        res.status(404).json({ message: \"Document not found\" });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error deleting document:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\n\r\napp.post(\"/api/report\", async (req, res) => {\r\n  const lists = req.body; // 클라이언트에서 보낸 lists 데이터\r\n  const existingpass = await captchaCode.find({ Num: lists.Pass });\r\n  if (existingpass.length > 0) {\r\n    await captchaCode.deleteMany({ Num: lists.Pass });\r\n    // if (captchaCode.findOne({ Num: lists.Pass })) {\r\n    // if (passNum.includes(String(lists.Pass))) {\r\n    try {\r\n      console.log(lists.Item);\r\n      // 데이터베이스 업데이트 처리\r\n      // 예시: 데이터 삭제 후 새로운 데이터 추가\r\n      await Report.insertMany(lists.Item); // 새로운 데이터 추가\r\n      //state db구조 손을 봐야할듯...일단은 그냥 고고\r\n      res.status(200).json({ message: \"Data updated successfully\" });\r\n      console.log(lists);\r\n    } catch (error) {\r\n      console.error(\"Error updating data:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\n// app.post('/api/resources', checkAdminRole, (req, res) => {\r\n//   // 'admin' 역할을 가진 사용자에게만 허용된 작업 수행\r\n//   // ...\r\n// });\r\n\r\napp.post(\"/api/reportdel\", checkAdminRole, async (req, res) => {\r\n  const lists = req.body; // 클라이언트에서 보낸 lists 데이터\r\n  console.log(lists);\r\n\r\n  // const query = { Title:lists.Title , Body: lists.Body };\r\n\r\n  try {\r\n    // 데이터베이스 업데이트 처리\r\n    // 예시: 데이터 삭제 후 새로운 데이터 추가\r\n    await Report.deleteOne({ Title: lists.Title, Body: lists.Body });\r\n\r\n    //state db구조 손을 봐야할듯...일단은 그냥 고고\r\n    res.status(200).json(\"True\");\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/update\", async (req, res) => {\r\n  const { lists } = req.body; // 클라이언트에서 보낸 lists 데이터\r\n\r\n  try {\r\n    // 데이터베이스 업데이트 처리\r\n    // 예시: 데이터 삭제 후 새로운 데이터 추가\r\n    await MarketItem.deleteMany(); // 모든 데이터 삭제\r\n    await MarketItem.insertMany(lists.lists.map((item) => item)); // 새로운 데이터 추가\r\n    //state db구조 손을 봐야할듯...일단은 그냥 고고\r\n    res.status(200).json({ message: \"Data updated successfully\" });\r\n    console.log(lists);\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/list\", async (req, res) => {\r\n  const list = req.body;\r\n  const existingCaptchaCode = await captchaCode.find({ Num: list.captchaCode });\r\n  if (existingCaptchaCode.length > 0) {\r\n    //일치하는 captchaCode코드 값이 없으면 이후 DB입력과정이 진행되지 않습니다.\r\n\r\n    await captchaCode.deleteMany({ Num: list.captchaCode });\r\n    try {\r\n      const insertResult = await MarketItem.insertMany(list.Item);\r\n      console.log(insertResult);\r\n      res.json({ message: \"Data updated successfully\" });\r\n    } catch (error) {\r\n      console.error(\"Error updating data:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\n\r\napp.get(\r\n  \"/api/Board/check\",\r\n  async (req, res) => {\r\n    const data = req.query;\r\n    const query = {\r\n      _id: data._id,\r\n    };\r\n    if (data.ID === \"adminim\") {\r\n    } else {\r\n      query.FakePassWord = data.InputFakePassWord;\r\n    }\r\n    const existingText = await Text.find(query);\r\n    if (existingText.length > 0) {\r\n      res.json(true);\r\n    } else {\r\n      res.json(false);\r\n    }\r\n  }\r\n  // await Text.deleteMany(query);\r\n  // try {\r\n  //   res.json({ message: \"Data deleted successfully\" });\r\n  // } catch (error) {\r\n  //   console.error(\"Error updating data:\", error);\r\n  //   res.status(500).json({ error: \"Internal server error\" });\r\n  // }\r\n);\r\n\r\napp.get(\"/api/Board\", async (req, res) => {\r\n  try {\r\n    const TextList = await Text.find({}, { FakePassWord: 0 });\r\n    res.json(TextList);\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/Board\", async (req, res) => {\r\n  const existingCaptchaCode = await captchaCode.find({\r\n    Num: req.body.CaptchaCode,\r\n  });\r\n  if (existingCaptchaCode.length > 0) {\r\n    //일치하는 captchaCode코드 값이 없으면 이후 DB입력과정이 진행되지 않습니다.\r\n\r\n    await captchaCode.deleteMany({ Num: req.body.CaptchaCode });\r\n    try {\r\n      const insertResult = await Text.insertMany(req.body.Text);\r\n      res.json({ message: \"Data updated successfully\" });\r\n    } catch (error) {\r\n      console.error(\"Error updating data:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\n\r\napp.delete(\"/api/Board\", async (req, res) => {\r\n  const data = req.query;\r\n  const query = {\r\n    _id: data._id,\r\n  };\r\n  if (data.InputFakePassWord !== \"undefined\") {\r\n    query.FakePassWord = data.InputFakePassWord;\r\n  } else {\r\n    if (data.ID === \"adminim\") {\r\n    } else {\r\n      query.ID = data.ID;\r\n    }\r\n  }\r\n  try {\r\n    const existingText = await Text.deleteMany(query);\r\n    if (existingText.length > 0) {\r\n      res.json({ message: \"Data deleted successfully\" });\r\n    } else {\r\n      res.json(false);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.patch(\"/api/Board\", async (req, res) => {\r\n  const data = req.body;\r\n  const { _id, TextTitle, TextBody, Category, Category2, ID } = data;\r\n  try {\r\n    await Text.findByIdAndUpdate(_id, {\r\n      $set: { TextTitle, TextBody, Category },\r\n    });\r\n    res.json({ message: \"Data updated successfully\" });\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/update3\", async (req, res) => {\r\n  const list = req.body; // 클라이언트에서 보낸 lists 데이터\r\n  console.log(list);\r\n  try {\r\n    const deleteedResult = await hasitem.deleteMany({ ID: list.ID });\r\n    const insertResult = await hasitem.insertMany(list);\r\n    console.log(insertResult);\r\n    res.status(200).json({ message: \"Data updated successfully\" });\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\napp.post(\"/api/hasitemload\", async (req, res) => {\r\n  const list = req.body; // 클라이언트에서 보낸 lists 데이터\r\n  console.log(list);\r\n  try {\r\n    const insertResult = await hasitem.find({ ID: list.ID });\r\n    console.log(insertResult);\r\n    // res.send(insertResult);\r\n    res.json(insertResult);\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n// const token = req.headers.authorization;\r\n// const realtoken = token.split(\" \")[1];\r\n// const decoded = jwt.verify(realtoken, process.env.JWT_KEY);\r\n// const token2 = jwt.sign(decoded, process.env.JWT_KEY);\r\n// 아이디 검증 과정\r\napp.post(\"/api/update2\", async (req, res) => {\r\n  const list = req.body; // 클라이언트에서 보낸 lists 데이터\r\n  const token = req.headers.authorization;\r\n  const realtoken = token.split(\" \")[1];\r\n  const decoded = jwt.verify(realtoken, process.env.JWT_KEY);\r\n  // if (passNum.includes(String(list.Pass))) {\r\n  if (decoded.ID === list.Item.ID) {\r\n    try {\r\n      const insertResult = await MarketItem.updateOne(\r\n        { _id: list.Item._id },\r\n        {\r\n          $set: {\r\n            Title: list.Item.Title,\r\n            List: list.Item.List,\r\n            Category: list.Item.Category,\r\n          },\r\n        }\r\n      );\r\n      console.log(insertResult);\r\n      //state db구조 손을 봐야할듯...일단은 그냥 고고\r\n      res.status(200).json({ message: \"Data updated successfully\" });\r\n    } catch (error) {\r\n      console.error(\"Error updating data:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\n\r\napp.get(\"/api/dbdel\", async (req, res) => {\r\n  try {\r\n    // 'Body' 속성에 \"흐음\"을 포함하는 모든 문서 삭제\r\n    // const result = await Report.deleteMany({ Body: /으음/ });\r\n    // const result = await Report.deleteMany({ Body: /으음/ });\r\n    const result = await MarketItem.deleteMany({ Title: { $not: /더보기/ } });\r\n\r\n    res.json({ message: `${result.deletedCount} documents deleted` });\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"An error occurred\" });\r\n  }\r\n});\r\n\r\nasync function getMarketData() {\r\n  const currentDate = new Date();\r\n  const year = currentDate.getFullYear();\r\n  const month = String(currentDate.getMonth() + 1).padStart(2, \"0\"); // 월을 두 자리로 표시\r\n  const day = String(currentDate.getDate()).padStart(2, \"0\"); // 일을 두 자리로 표시\r\n  const formattedDate = `${year}-${month}-${day}`;\r\n\r\n  // console.log(currentDate);\r\n  // 실행하려는 작업을 이 함수 안에 구현합니다.\r\n  const existingVisited = await Visited.findOne({ Date: formattedDate });\r\n  if (!existingVisited) {\r\n    await Visited.insertMany({ Date: formattedDate, todayTotal: 0 });\r\n    fetchDataAndUpdate();\r\n  }\r\n}\r\ngetMarketData();\r\n// 함수를 매일 오전 00시에 실행하기 위한 시간 계산\r\nconst now = new Date();\r\nconst tomorrow = new Date(now);\r\ntomorrow.setDate(now.getDate() + 1);\r\ntomorrow.setHours(1, 0, 0, 0);\r\n\r\n// 함수를 주기적으로 실행하기 위한 Interval 설정\r\nconst interval = 24 * 60 * 60 * 1000; // 24시간\r\n\r\n// 매일 오전 00시마다 함수를 실행하는 Interval 설정\r\nsetInterval(function () {\r\n  getMarketData();\r\n}, interval);\r\n\r\nhttpServer.listen(port, () => {\r\n  console.log(`server running at http://localhost:${port}`);\r\n});\r\n"],"names":["axios","require","authorizationToken","process","env","API_KEY","searchdata","Category","CategoryCode","PageNum","newarray","getMakeList","e","getPageData","pageNo","config","method","url","headers","accept","authorization","data","PageNo","response","itemsToExclude","filteredItems","Items","filter","item","includes","Name","error","console","log","Grade","BundleCount","delay","ms","Promise","resolve","setTimeout","fetchData","promises","Error","status","i","push","resultArrays","all","list","flat","newlist","map","condition","resultList","result","YDayAvgPrice","avg","avghonor","Id","Icon","TradeRemainCount","RecentPrice","CurrentMinPrice","module","exports","ItemLevelMin","ItemLevelMax","ItemGradeQuality","SkillOptions","FirstOption","SecondOption","MinValue","MaxValue","EtcOptions","Sort","CharacterClass","ItemTier","ItemGrade","ItemName","SortCondition","loadjem","AuctionInfo","BuyPrice","sum","reduce","total","num","countNonNullElements","arr","count","length","nonNullCount","jem","etc","__v","toFixed","mongoose","trading_data","marketList","connect","DB_USER","DB_PASSWORD","DB_NAME","useNewUrlParser","useUnifiedTopology","then","catch","err","loadtrade","IdList","find","$gt","processDataWithDelay","lists","a","b","existingDoc","findOne","existingDocStats","Stats","listStats","forEach","listStat","existingStatIndex","findIndex","stat","Date","updatedDocument","findOneAndUpdate","$set","sort","new","newDocument","create","fetchDataAndUpdate","importedList","jemData","conbined","deleteMany","insertMany","captchaCodeSchema","Schema","Num","String","expiresTime","type","expires","default","now","captchaCode","model","collection","createIndex","expireAfterSeconds","ChatLogSchema","date","roomName","id","message","chatLog","HasItemSchema","_id","grade","forwho","category","Object","skill","panalty","location","HasItemListsSchema","ID","Item","HasItem","ItemSchema","Number","Quantity","Quantity2","ContentListsSchema","required","Title","List","MarketItem","marketListSchema","ReportSchema","Body","Report","TextSchema","TextTitle","maxlength","TextBody","Category2","FakeID","FakePassWord","Text","trading_dataSchema","UserSchema","Password","Question","Answer","Role","User","visitedSchema","todayTotal","Visited","express","cors","app","createServer","Server","port","normalizePort","PORT","set","debug","httpServer","on","onError","onListening","hasitem","passport","passportJWT","JwtStrategy","Strategy","ExtractJwt","jwt","winston","cookieParser","logger","nunjucks","path","bodyParser","use","urlencoded","extended","json","initialize","origin","credentials","val","parseInt","isNaN","syscall","bind","code","exit","addr","address","jwtOptions","jwtFromRequest","fromAuthHeaderAsBearerToken","secretOrKey","JWT_KEY","strategy","jwt_payload","done","existingUser","res","authenticateToken","req","next","token","cookies","verify","user","checkAdminRole","realtoken","split","decoded","get","randomNum","Math","floor","random","formattedNum","padStart","insertResult","send","currentTime","toLocaleTimeString","socketCorsOrigin","NODE_ENV","io","connectedClients","keys","post","roomList","body","key","sockets","adapter","rooms","element","socket","undefined","has","join","chatdata","userId","content","emit","idSet","Set","to","currentRoomName","clients","clientId","leave","del","Array","from","room","totalVistor","aggregate","$group","$sum","currentDate","year","getFullYear","month","getMonth","day","getDate","formattedDate","todatVisitor","updateOne","$inc","VisitorData","Total","Today","insertedResult","delete","query","marketLists","MarketItems","Reports","payload","iat","exp","sign","expirationDate","setDate","cookie","sameSite","secure","httpOnly","existingpass2","Pass","deletedCount","newUser","deleteOne","existingpass","existingCaptchaCode","InputFakePassWord","existingText","TextList","CaptchaCode","patch","findByIdAndUpdate","deleteedResult","$not","getMarketData","existingVisited","tomorrow","setHours","interval","setInterval","listen"],"sourceRoot":""}