{"version":3,"file":"server.js","mappings":"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","sources":["webpack://myapp/./src/controllers/loadMarket.js","webpack://myapp/./src/controllers/loadjem.js","webpack://myapp/./src/controllers/loadtrade.js","webpack://myapp/./src/controllers/update.js","webpack://myapp/./src/model/captchaCode.js","webpack://myapp/./src/model/chatLog.js","webpack://myapp/./src/model/hasitem.js","webpack://myapp/./src/model/item.js","webpack://myapp/./src/model/market.js","webpack://myapp/./src/model/report.js","webpack://myapp/./src/model/text.js","webpack://myapp/./src/model/trading_data.js","webpack://myapp/./src/model/user.js","webpack://myapp/./src/model/visited.js","webpack://myapp/external commonjs \"axios\"","webpack://myapp/external commonjs \"body-parser\"","webpack://myapp/external commonjs \"cookie-parser\"","webpack://myapp/external commonjs \"cors\"","webpack://myapp/external commonjs \"debug\"","webpack://myapp/external commonjs \"dotenv\"","webpack://myapp/external commonjs \"express\"","webpack://myapp/external commonjs \"jsonwebtoken\"","webpack://myapp/external commonjs \"mongoose\"","webpack://myapp/external commonjs \"morgan\"","webpack://myapp/external commonjs \"nunjucks\"","webpack://myapp/external commonjs \"passport\"","webpack://myapp/external commonjs \"passport-jwt\"","webpack://myapp/external commonjs \"socket.io\"","webpack://myapp/external commonjs \"winston\"","webpack://myapp/external node-commonjs \"http\"","webpack://myapp/external node-commonjs \"path\"","webpack://myapp/webpack/bootstrap","webpack://myapp/./app.js"],"sourcesContent":["// loadMarket.js\r\nconst axios = require(\"axios\");\r\nconst authorizationToken = process.env.API_KEY;\r\nconst searchdata = [\r\n  {\r\n    Category: \"재련\",\r\n    CategoryCode: 50000,\r\n    PageNum: 7,\r\n  },\r\n  {\r\n    Category: \"모험\",\r\n    CategoryCode: 100000,\r\n    PageNum: 13,\r\n  },\r\n  {\r\n    Category: \"배템\",\r\n    CategoryCode: 60000,\r\n    PageNum: 6,\r\n  },\r\n  {\r\n    Category: \"각인\",\r\n    CategoryCode: 40000,\r\n    PageNum: 29,\r\n  },\r\n  {\r\n    Category: \"음식\",\r\n    CategoryCode: 70000,\r\n    PageNum: 9,\r\n  },\r\n  {\r\n    Category: \"생활\",\r\n    CategoryCode: 90000,\r\n    PageNum: 4,\r\n  },\r\n];\r\nlet newarray = [];\r\nconst getMakeList = async () => {\r\n  for (const e of searchdata) {\r\n    const getPageData = async (pageNo) => {\r\n      const config = {\r\n        method: \"post\",\r\n        url: \"https://developer-lostark.game.onstove.com/markets/items\",\r\n        headers: {\r\n          accept: \"application/json\",\r\n          authorization: `bearer ${authorizationToken}`,\r\n          \"content-Type\": \"application/json\",\r\n        },\r\n        data: {\r\n          CategoryCode: e.CategoryCode,\r\n          PageNo: pageNo,\r\n        },\r\n      };\r\n      const response = await axios(config);\r\n\r\n      if (e.CategoryCode === 50000) {\r\n        try {\r\n          const itemsToExclude = [\r\n            \"수호석\",\r\n            \"수호석 조각\",\r\n            \"파괴석 조각\",\r\n            \"생명의 돌파석\",\r\n            \"별의 숨결\",\r\n            \"조화의 파편 주머니(중)\",\r\n            \"조화의 파편 주머니(소)\",\r\n            \"조화의 돌파석\",\r\n            \"달의 숨결\",\r\n            \"아크투르스의 서 : 무기\",\r\n            \"재봉술 : 매듭 기본\",\r\n            \"재봉술 : 도안 기본\",\r\n            \"야금술 : 접쇠 기본\",\r\n            \"아크투르스의 의지 : 방어구\",\r\n            \"크라테르의 지혜 : 무기\",\r\n            \"아크투르스의 서 : 방어구\",\r\n            \"크라테르의 지혜 : 방어구\",\r\n            \"야금술 : 접쇠 심화\",\r\n            \"야금술 : 주조 기본\",\r\n            \"조화의 파편 주머니(대)\",\r\n            \"재봉술 : 매듭 심화\",\r\n            \"크라테르의 권능 : 방어구\",\r\n            \"크라테르의 권능 : 무기\",\r\n            \"아크투르스의 의지 : 무기\",\r\n            \"크라테르의 서 : 무기\",\r\n            \"크라테르의 서 : 방어구\",\r\n            \"야금술 : 단조 복합\",\r\n          ];\r\n          const filteredItems = response.data.Items.filter(\r\n            (item) => !itemsToExclude.includes(item.Name)\r\n          );\r\n          return filteredItems;\r\n        } catch (error) {\r\n          console.log(error);\r\n          return [];\r\n        }\r\n      } else if (e.CategoryCode === 40000) {\r\n        try {\r\n          const filteredItems = response.data.Items.filter((item) =>\r\n            item.Grade.includes(\"전설\")\r\n          );\r\n          return filteredItems;\r\n        } catch (error) {\r\n          console.log(error);\r\n          return [];\r\n        }\r\n      } else if (e.CategoryCode === 70000) {\r\n        try {\r\n          const filteredItems = response.data.Items.filter(\r\n            (item) => item.BundleCount == 10\r\n          );\r\n          return filteredItems;\r\n        } catch (error) {\r\n          console.log(error);\r\n          return [];\r\n        }\r\n      } else {\r\n        try {\r\n          return response.data.Items;\r\n        } catch (error) {\r\n          console.log(error);\r\n          return [];\r\n        }\r\n      }\r\n    };\r\n    const delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\n    const fetchData = async () => {\r\n      const promises = [];\r\n      for (let pageNo = 1; pageNo <= e.PageNum; pageNo++) {\r\n        const data = await getPageData(pageNo);\r\n        if (data instanceof Error) {\r\n          if (data.response.status === 429) {\r\n            await delay(60000);\r\n            i--;\r\n          } else {\r\n            break;\r\n          }\r\n        } else {\r\n          promises.push(data);\r\n        }\r\n\r\n        // promises.push(getPageData(pageNo));\r\n      }\r\n      try {\r\n        const resultArrays = await Promise.all(promises);\r\n        const list = resultArrays.flat(); // Flatten the array of arrays\r\n        let newlist = list;\r\n        newlist.map((i) => (i.Category = e.Category));\r\n        if (e.CategoryCode === 50000) {\r\n          const condition = [\r\n            \"명예의 파편 주머니(소)\",\r\n            \"명예의 파편 주머니(중)\",\r\n            \"명예의 파편 주머니(대)\",\r\n          ];\r\n          const resultList = list.filter((e) => condition.includes(e.Name));\r\n          let result = 0;\r\n          resultList.map((e) => {\r\n            result += e.YDayAvgPrice;\r\n          });\r\n          const avg = result / 3000;\r\n          const avghonor = {\r\n            Id: 22,\r\n            Category: \"재련\",\r\n            Name: \"명예의 파편(낱개)\",\r\n            Grade: \"일반\",\r\n            Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_7_147.png\",\r\n            BundleCount: 1,\r\n            TradeRemainCount: null,\r\n            YDayAvgPrice: avg,\r\n            RecentPrice: 1,\r\n            CurrentMinPrice: 1,\r\n          };\r\n          newlist.push(avghonor);\r\n        }\r\n        newarray = [...newarray, ...newlist];\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    await fetchData();\r\n  }\r\n  return newarray;\r\n};\r\nmodule.exports = getMakeList;\r\n","// loadMarket.js\r\nconst axios = require(\"axios\");\r\nconst authorizationToken = process.env.API_KEY;\r\nconst getPageData = async (pageNo) => {\r\n  const config = {\r\n    method: \"post\",\r\n    url: \"https://developer-lostark.game.onstove.com/auctions/items\",\r\n    headers: {\r\n      accept: \"application/json\",\r\n      authorization: `bearer ${authorizationToken}`,\r\n      \"content-Type\": \"application/json\",\r\n    },\r\n    data: {\r\n      ItemLevelMin: 0,\r\n      ItemLevelMax: 0,\r\n      ItemGradeQuality: null,\r\n      SkillOptions: [\r\n        {\r\n          FirstOption: null,\r\n          SecondOption: null,\r\n          MinValue: null,\r\n          MaxValue: null,\r\n        },\r\n      ],\r\n      EtcOptions: [\r\n        {\r\n          FirstOption: null,\r\n          SecondOption: null,\r\n          MinValue: null,\r\n          MaxValue: null,\r\n        },\r\n      ],\r\n      Sort: \"BidStart_Price\",\r\n      CategoryCode: 210000,\r\n      CharacterClass: \"\",\r\n      ItemTier: 3,\r\n      ItemGrade: \"\",\r\n      ItemName: \"5레벨\",\r\n      PageNo: pageNo,\r\n      SortCondition: \"ASC\",\r\n    },\r\n  };\r\n  try {\r\n    const response = await axios(config);\r\n    return response.data.Items;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return [];\r\n  }\r\n};\r\nconst loadjem = async () => {\r\n  const promises = [];\r\n  for (let pageNo = 0; pageNo <= 10; pageNo++) {\r\n    promises.push(getPageData(pageNo));\r\n  }\r\n  try {\r\n    const resultArrays = await Promise.all(promises);\r\n    const list = resultArrays.flat(); // Flatten the array of arrays\r\n    const newlist = list.map((i) => i.AuctionInfo.BuyPrice);\r\n    const sum = newlist.reduce((total, num) => {\r\n      if (num !== null && num < 3000) {\r\n        return total + num;\r\n      } else {\r\n        return total;\r\n      }\r\n    }, 0);\r\n    function countNonNullElements(arr) {\r\n      let count = 0;\r\n      for (let i = 0; i < arr.length; i++) {\r\n        if (arr[i] !== null && arr[i] < 3000) {\r\n          count++;\r\n        }\r\n      }\r\n      return count;\r\n    }\r\n    const nonNullCount = countNonNullElements(newlist);\r\n    const avg = sum / nonNullCount;\r\n    return avg;\r\n  } catch (error) {\r\n    console.log(error);\r\n    return [];\r\n  }\r\n};\r\nasync function jem() {\r\n  const avg = await loadjem();\r\n  const etc = [\r\n    {\r\n      Id: 1,\r\n      Category: \"기타\",\r\n      Name: \"골드\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/money/money_4.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 1,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 2,\r\n      Category: \"기타\",\r\n      Name: \"더보기 골드\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FPrU44%2FbtszpBxVLgu%2Fz3mqnQKEdV41pHQIVxgXs1%2Fimg.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: -1,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 3,\r\n      Category: \"기타\",\r\n      Name: \"1레벨 보석\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_9_46.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: (avg / 3 / 3 / 3 / 3).toFixed(1),\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 4,\r\n      Category: \"기타\",\r\n      Name: \"2레벨 보석\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_9_47.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: (avg / 3 / 3 / 3).toFixed(1),\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 5,\r\n      Category: \"기타\",\r\n      Name: \"3레벨 보석\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_9_48.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: (avg / 3 / 3).toFixed(1),\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 6,\r\n      Category: \"기타\",\r\n      Name: \"4레벨 보석\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_9_49.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: (avg / 3).toFixed(1),\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 7,\r\n      Category: \"기타\",\r\n      Name: \"5레벨 보석\",\r\n      Grade: \"일반\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_9_50.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: avg.toFixed(1),\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 8,\r\n      Category: \"기타\",\r\n      Name: \"혼돈의 돌\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_6_89.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 9,\r\n      Category: \"기타\",\r\n      Name: \"마수의 뼈\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_3_101.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 10,\r\n      Category: \"기타\",\r\n      Name: \"욕망의 날개\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_3_124.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 11,\r\n      Category: \"기타\",\r\n      Name: \"광기의 나팔\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_10_19.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 12,\r\n      Category: \"기타\",\r\n      Name: \"몽환의 사념\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_10_80.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 13,\r\n      Category: \"기타\",\r\n      Name: \"쇠락의 눈동자\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_19.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 14,\r\n      Category: \"기타\",\r\n      Name: \"시련의 빛\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_10_164.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 15,\r\n      Category: \"기타\",\r\n      Name: \"관조의 빛무리\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_10_163.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 16,\r\n      Category: \"기타\",\r\n      Name: \"선명한 지혜의 엘릭서\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_147.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 17,\r\n      Category: \"기타\",\r\n      Name: \"빛나는 지혜의 엘릭서\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_146.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 18,\r\n      Category: \"기타\",\r\n      Name: \"선명한 지혜의 기운\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_3_111.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 19,\r\n      Category: \"기타\",\r\n      Name: \"빛나는 지혜의 기운\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_3_67.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 20,\r\n      Category: \"기타\",\r\n      Name: \"어둠의 불\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_239.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 21,\r\n      Category: \"기타\",\r\n      Name: \"마력의 샘물\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_237.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 22,\r\n      Category: \"기타\",\r\n      Name: \"담금질 : 알키오네의 눈\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_12_54.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 23,\r\n      Category: \"기타\",\r\n      Name: \"담금질 : 아그리스의 비늘\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_12_53.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 24,\r\n      Category: \"기타\",\r\n      Name: \"농축 돌파석\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_11_18.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 25,\r\n      Category: \"기타\",\r\n      Name: \"심화 돌파석\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_7_171.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n    {\r\n      Id: 26,\r\n      Category: \"기타\",\r\n      Name: \"융합 돌파석\",\r\n      Icon: \"https://cdn-lostark.game.onstove.com/efui_iconatlas/use/use_7_173.png\",\r\n      BundleCount: 1,\r\n      TradeRemainCount: null,\r\n      YDayAvgPrice: 0,\r\n      RecentPrice: 1,\r\n      CurrentMinPrice: 1,\r\n      Grade: \"일반\",\r\n      __v: 0,\r\n    },\r\n  ];\r\n  return etc;\r\n}\r\nmodule.exports = jem;\r\n","// loadMarket.js\r\nconst mongoose = require(\"mongoose\");\r\nconst axios = require(\"axios\");\r\nconst trading_data = require(\"../model/trading_data\");\r\nconst marketList = require(\"../model/market\");\r\nmongoose\r\n  .connect(\r\n    `mongodb+srv://${process.env.DB_USER}:${process.env.DB_PASSWORD}@cluster0.ttcs9nu.mongodb.net/${process.env.DB_NAME}?retryWrites=true&w=majority`,\r\n    { useNewUrlParser: true, useUnifiedTopology: true }\r\n  )\r\n  .then(() => {\r\n    console.log(\"MONGO CONNECTION OPEN!!!\");\r\n  })\r\n  .catch((err) => {\r\n    console.log(\"OH NO MONGO CONNECTION ERROR!!!!\");\r\n    console.log(err);\r\n  });\r\nconst authorizationToken = process.env.API_KEY;\r\n\r\n// 문제점\r\n// 단순한 반복으로 인한 429에러\r\n\r\n//해결책\r\n//먼저 보낸 응답을 확인하고 응답에 따라 다음 id 로드하기.\r\n\r\nconst getPageData = async (Id) => {\r\n  const config = {\r\n    method: \"get\",\r\n    url: `https://developer-lostark.game.onstove.com/markets/items/${Id}`,\r\n    headers: {\r\n      accept: \"application/json\",\r\n      authorization: `bearer ${authorizationToken}`,\r\n      \"content-Type\": \"application/json\",\r\n    },\r\n  };\r\n  try {\r\n    let response = await axios(config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return error;\r\n  }\r\n};\r\n\r\nconst loadtrade = async () => {\r\n  try {\r\n    const IdList = await marketList.find(\r\n      { Id: { $gt: 1000 } },\r\n      { Id: 1, Category: 1, Name: 1 }\r\n    );\r\n\r\n    const delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\r\n\r\n    async function processDataWithDelay(IdList) {\r\n      let promises = [];\r\n      for (let i = 0; i < IdList.length; i++) {\r\n        const data = await getPageData(IdList[i].Id);\r\n        if (data instanceof Error) {\r\n          if (data.response.status === 429) {\r\n            await delay(60000);\r\n            i--;\r\n          } else {\r\n            break;\r\n          }\r\n        } else {\r\n          promises.push(data);\r\n        }\r\n\r\n        // promises.push(getPageData(IdList[i].Id));\r\n        // if ((i + 1) % 90 === 0) {\r\n        //   await delay(65000); // 65초 대기\r\n        //   console.log(\"pause\");\r\n        // }\r\n      }\r\n      // const resultArrays = await Promise.all(promises);\r\n      const lists = promises.flat();\r\n      // console.log(promises);\r\n      lists.map(\r\n        (a) => (a.Category = IdList.find((b) => b.Name == a.Name).Category)\r\n      );\r\n      for (const list of lists) {\r\n        const filter = { Name: list.Name };\r\n        const existingDoc = await trading_data.findOne(filter);\r\n        if (existingDoc) {\r\n          const existingDocStats = existingDoc.Stats ? existingDoc.Stats : [];\r\n          const listStats = list.Stats ? list.Stats : [];\r\n          listStats.forEach((listStat) => {\r\n            const existingStatIndex = existingDocStats.findIndex(\r\n              (stat) => stat.Date === listStat.Date\r\n            );\r\n            if (existingStatIndex !== -1) {\r\n              existingDocStats[existingStatIndex] = listStat;\r\n            } else {\r\n              existingDocStats.push(listStat);\r\n            }\r\n          });\r\n          const updatedDocument = await trading_data.findOneAndUpdate(\r\n            filter,\r\n            {\r\n              $set: {\r\n                Stats: existingDocStats.sort(\r\n                  (a, b) => new Date(b.Date) - new Date(a.Date)\r\n                ),\r\n              },\r\n            },\r\n            { new: true }\r\n          );\r\n        } else {\r\n          const newDocument = await trading_data.create(list);\r\n        }\r\n      }\r\n      console.log(\"done\");\r\n    }\r\n    processDataWithDelay(IdList);\r\n  } catch (error) {\r\n    console.log(error);\r\n    return [];\r\n  }\r\n};\r\n\r\nmodule.exports = loadtrade;\r\n","//update.js\r\nconst mongoose = require(\"mongoose\");\r\nconst marketList = require(\"../model/market\");\r\nconst getMakeList = require(\"./loadMarket\");\r\nconst jem = require(\"./loadjem\"); // 파일 경로에 맞게 수정\r\nconst loadtrade = require(\"./loadtrade\");\r\nmongoose\r\n  .connect(\r\n    `mongodb+srv://${process.env.DB_USER}:${process.env.DB_PASSWORD}@cluster0.ttcs9nu.mongodb.net/${process.env.DB_NAME}?retryWrites=true&w=majority`,\r\n    { useNewUrlParser: true, useUnifiedTopology: true }\r\n  )\r\n  .then(() => {\r\n    console.log(\"MONGO CONNECTION OPEN!!!\");\r\n    fetchDataAndUpdate();\r\n  })\r\n  .catch((err) => {\r\n    console.log(\"OH NO MONGO CONNECTION ERROR!!!!\");\r\n    console.log(err);\r\n  });\r\n\r\nasync function fetchDataAndUpdate() {\r\n  try {\r\n    // const importedList = await getMakeList();\r\n    // const jemData = await jem(); // jem 함수 호출\r\n    // const conbined = [...importedList, ...jemData];\r\n    // await marketList.deleteMany({}); // 기존 데이터 모두 삭제\r\n    // await marketList.insertMany(conbined);\r\n    // setTimeout(() => loadtrade(), 65000);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\nmodule.exports = fetchDataAndUpdate;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst captchaCodeSchema = new mongoose.Schema({\r\n  Num: String,\r\n  expiresTime: {\r\n    type: Date,\r\n    expires: \"5m\",\r\n    default: Date.now,\r\n  },\r\n});\r\n//만료 시간을 5분으로 설정했습니다.\r\nconst captchaCode = mongoose.model(\"captchaCode\", captchaCodeSchema);\r\ncaptchaCode.collection.createIndex(\r\n  { expiresTime: 1 },\r\n  { expireAfterSeconds: 0 }\r\n);\r\n//인덱스 설정을 통해 정해진 시간이 지나면 삭제되도록 합니다.\r\n\r\nmodule.exports = captchaCode;\r\n","const mongoose = require(\"mongoose\");\r\n\r\n//rooms id time message\r\n\r\nconst ChatLogSchema = new mongoose.Schema({\r\n  date: Date,\r\n  roomName: String,\r\n  id: String,\r\n  //소켓 아이디나 회원 아이디.\r\n  message: String,\r\n  expiresTime: {\r\n    type: Date,\r\n    expires: \"24h\", // 24시간 후에 문서가 만료되도록 설정\r\n    default: () => Date.now() + 24 * 60 * 60 * 1000, // 현재 시간에 24시간을 더한 시간을 기본값으로 설정\r\n  },\r\n});\r\n//변수명               모델 이름 스키마이름\r\nconst chatLog = mongoose.model(\"ChatLog\", ChatLogSchema);\r\n// chatLog.collection.createIndex({ expiresTime: 1 }, { expireAfterSeconds: 0 });\r\n\r\nmodule.exports = chatLog;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst HasItemSchema = new mongoose.Schema({\r\n  _id: {\r\n    type: [String],\r\n  },\r\n  grade: {\r\n    type: [String],\r\n  },\r\n  forwho: {\r\n    type: [String],\r\n  },\r\n  category: {\r\n    type: [String],\r\n  },\r\n  stat: {\r\n    type: Object,\r\n    default: {},\r\n  },\r\n  skill: {\r\n    type: Object,\r\n    default: {},\r\n  },\r\n  panalty: {\r\n    type: Object,\r\n    default: {},\r\n  },\r\n  location: {\r\n    type: [String],\r\n  },\r\n});\r\nconst HasItemListsSchema = new mongoose.Schema({\r\n  ID: String,\r\n  Item: [HasItemSchema],\r\n});\r\n\r\nconst HasItem = mongoose.model(\"HasItem\", HasItemListsSchema);\r\n\r\nmodule.exports = HasItem;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst ItemSchema = new mongoose.Schema(\r\n  {\r\n    Id: Number,\r\n    Category: String,\r\n    Name: String,\r\n    Grade: String,\r\n    Icon: String,\r\n    BundleCount: Number,\r\n    TradeRemainCount: Number,\r\n    YDayAvgPrice: Number,\r\n    RecentPrice: Number,\r\n    CurrentMinPrice: Number,\r\n    Quantity: Number,\r\n    Quantity2: Number,\r\n  },\r\n  { _id: false }\r\n); // _id 필드 사용 안 함\r\nconst ContentListsSchema = new mongoose.Schema({\r\n  _id: { type: String, required: false },\r\n  Title: String,\r\n  List: [ItemSchema],\r\n  Category: String,\r\n  ID: { type: String, required: false },\r\n});\r\n\r\nconst MarketItem = mongoose.model(\"MarketItem\", ContentListsSchema);\r\n\r\nmodule.exports = MarketItem;\r\n","//market.js\r\n\r\nconst mongoose = require(\"mongoose\");\r\n\r\nconst marketListSchema = new mongoose.Schema({\r\n  Id: Number,\r\n  Category: String,\r\n  Name: String,\r\n  Grade: String,\r\n  Icon: String,\r\n  BundleCount: Number,\r\n  TradeRemainCount: Number, // 또는 null 허용하려면 { type: Number, default: null }로 설정\r\n  YDayAvgPrice: Number,\r\n  RecentPrice: Number,\r\n  CurrentMinPrice: Number,\r\n});\r\n\r\nconst marketList = mongoose.model(\"Item\", marketListSchema);\r\n\r\nmodule.exports = marketList;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst ReportSchema = new mongoose.Schema({\r\n  Title: String,\r\n  Body: String,\r\n});\r\n\r\nconst Report = mongoose.model(\"Report\", ReportSchema);\r\n\r\nmodule.exports = Report;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst TextSchema = new mongoose.Schema({\r\n  TextTitle: { type: String, required: false, maxlength: 90 },\r\n  TextBody: { type: String, required: false, maxlength: 1500 },\r\n  Category: String,\r\n  Category2: String,\r\n  _id: String,\r\n  ID: { type: String, required: false, maxlength: 60 },\r\n  Date: Date,\r\n  FakeID: { type: String, required: false, maxlength: 60 },\r\n  FakePassWord: { type: String, required: false, maxlength: 60 },\r\n});\r\nconst Text = mongoose.model(\"Text\", TextSchema);\r\nmodule.exports = Text;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst Schema = mongoose.Schema;\r\n\r\n// '파괴석 조각' 컬렉션의 스키마 정의\r\nconst trading_dataSchema = new Schema({\r\n  Category: {\r\n    type: String,\r\n    // required: true,\r\n  },\r\n  Name: {\r\n    type: String,\r\n    // required: true,\r\n  },\r\n  TradeRemainCount: {\r\n    type: Number,\r\n    default: null, // TradeRemainCount가 주어지지 않은 경우 기본값으로 null 설정\r\n  },\r\n  BundleCount: {\r\n    type: Number,\r\n    // required: true,\r\n  },\r\n  Stats: {\r\n    type: [Object], // Stats는 객체의 배열로 구성된다고 가정합니다.\r\n  },\r\n});\r\n\r\n// '파괴석 조각' 컬렉션을 생성\r\nconst trading_data = mongoose.model(\"trading_data\", trading_dataSchema);\r\n\r\nmodule.exports = trading_data;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst UserSchema = new mongoose.Schema({\r\n  ID: {\r\n    type: String,\r\n    maxlength: 60,\r\n  },\r\n  Password: {\r\n    type: String,\r\n    maxlength: 60,\r\n  },\r\n  Question: {\r\n    type: String,\r\n    maxlength: 60,\r\n  },\r\n  Answer: {\r\n    type: String,\r\n    maxlength: 60,\r\n  },\r\n  Role: String,\r\n});\r\n\r\nconst User = mongoose.model(\"User\", UserSchema);\r\n\r\nmodule.exports = User;\r\n","const mongoose = require(\"mongoose\");\r\n\r\nconst visitedSchema = new mongoose.Schema({\r\n  Date: String,\r\n  todayTotal: { type: Number, default: 0 },\r\n});\r\n\r\nconst Visited = mongoose.model(\"visited\", visitedSchema);\r\n\r\nmodule.exports = Visited;\r\n","module.exports = require(\"axios\");","module.exports = require(\"body-parser\");","module.exports = require(\"cookie-parser\");","module.exports = require(\"cors\");","module.exports = require(\"debug\");","module.exports = require(\"dotenv\");","module.exports = require(\"express\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"mongoose\");","module.exports = require(\"morgan\");","module.exports = require(\"nunjucks\");","module.exports = require(\"passport\");","module.exports = require(\"passport-jwt\");","module.exports = require(\"socket.io\");","module.exports = require(\"winston\");","module.exports = require(\"http\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","//server.js\r\nconst express = require(\"express\");\r\nconst cors = require(\"cors\");\r\nconst app = express();\r\nconst { createServer } = require(\"http\");\r\nconst { Server } = require(\"socket.io\");\r\nvar port = normalizePort(process.env.PORT || \"3001\");\r\napp.set(\"port\", port);\r\nvar debug = require(\"debug\")(\"myapp:server\");\r\n// var http = require(\"http\");\r\n// var server = http.createServer(app);\r\nvar httpServer = createServer(app);\r\nhttpServer.on(\"error\", onError);\r\nhttpServer.on(\"listening\", onListening);\r\nconst mongoose = require(\"mongoose\");\r\nconst marketList = require(\"./src/model/market\");\r\nconst chatLog = require(\"./src/model/chatLog\");\r\nconst MarketItem = require(\"./src/model/item\");\r\nconst Text = require(\"./src/model/text\");\r\nconst User = require(\"./src/model/user\");\r\nconst Report = require(\"./src/model/report\");\r\nconst hasitem = require(\"./src/model/hasitem\");\r\nconst trading_data = require(\"./src/model/trading_data\");\r\nconst captchaCode = require(\"./src/model/captchaCode\");\r\nconst Visited = require(\"./src/model/visited\");\r\nrequire(\"dotenv\").config();\r\nconst passport = require(\"passport\");\r\nconst passportJWT = require(\"passport-jwt\");\r\nconst JwtStrategy = passportJWT.Strategy;\r\nconst ExtractJwt = passportJWT.ExtractJwt;\r\nconst jwt = require(\"jsonwebtoken\");\r\nconst winston = require(\"winston\");\r\nvar cookieParser = require(\"cookie-parser\");\r\nvar logger = require(\"morgan\");\r\nconst nunjucks = require(\"nunjucks\");\r\nconst path = require(\"path\");\r\nconst bodyParser = require(\"body-parser\");\r\nconst axios = require(\"axios\");\r\nconst fetchDataAndUpdate = require(\"./src/controllers/update\");\r\napp.use(bodyParser.urlencoded({ extended: false }));\r\napp.use(bodyParser.json());\r\napp.use(express.json());\r\napp.use(passport.initialize());\r\napp.use(\r\n  logger(\r\n    ':remote-addr - :remote-user [:date[clf]] \":method :url HTTP/:http-version\" :status :res[content-length]'\r\n  )\r\n);\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\napp.use(\r\n  cors({\r\n    origin: [\r\n      \"http://localhost:3000\",\r\n      \"https://www.nextriceark.site\",\r\n      \"https://nextriceark-jnwk-git-main-nakkis-projects.vercel.app\",\r\n      \"https://nextriceark-jnwk-46nic2wxb-nakkis-projects.vercel.app\",\r\n      \"https://nextriceark-jnwk.vercel.app\",\r\n      \"https://developer-lostark.game.onstove.com\",\r\n    ],\r\n    credentials: true,\r\n  })\r\n);\r\nmongoose\r\n  .connect(\r\n    `mongodb+srv://${process.env.DB_USER}:${process.env.DB_PASSWORD}@cluster0.ttcs9nu.mongodb.net/${process.env.DB_NAME}?retryWrites=true&w=majority`\r\n  )\r\n  .then(() => {\r\n    console.log(\"MONGO CONNECTION OPEN!!!\");\r\n  })\r\n  .catch((err) => {\r\n    console.log(\"OH NO MONGO CONNECTION ERROR!!!!\");\r\n    console.log(err);\r\n  });\r\nfunction normalizePort(val) {\r\n  var port = parseInt(val, 10);\r\n  if (isNaN(port)) {\r\n    // named pipe\r\n    return val;\r\n  }\r\n  if (port >= 0) {\r\n    // port number\r\n    return port;\r\n  }\r\n  return false;\r\n}\r\nfunction onError(error) {\r\n  if (error.syscall !== \"listen\") {\r\n    throw error;\r\n  }\r\n  var bind = typeof port === \"string\" ? \"Pipe \" + port : \"Port \" + port;\r\n  // handle specific listen errors with friendly messages\r\n  switch (error.code) {\r\n    case \"EACCES\":\r\n      console.error(bind + \" requires elevated privileges\");\r\n      process.exit(1);\r\n      break;\r\n    case \"EADDRINUSE\":\r\n      console.error(bind + \" is already in use\");\r\n      process.exit(1);\r\n      break;\r\n    default:\r\n      throw error;\r\n  }\r\n}\r\nfunction onListening() {\r\n  var addr = httpServer.address();\r\n  var bind = typeof addr === \"string\" ? \"pipe \" + addr : \"port \" + addr.port;\r\n  debug(\"Listening on \" + bind);\r\n}\r\nconst jwtOptions = {\r\n  jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\r\n  secretOrKey: process.env.JWT_KEY,\r\n};\r\nconst strategy = new JwtStrategy(jwtOptions, async (jwt_payload, done) => {\r\n  try {\r\n    const existingUser = await User.findOne({ ID: jwt_payload.ID });\r\n    if (existingUser) {\r\n      return done(null, existingUser);\r\n    } else {\r\n      return done(null, false);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"serError updating data:\", error);\r\n    res.status(500).json({ error: \"serInternal server error\" });\r\n  }\r\n});\r\npassport.use(strategy);\r\n// 미들웨어: 쿠키 검증 및 사용자 인증\r\nconst authenticateToken = (req, res, next) => {\r\n  const token = req.cookies.token;\r\n  if (!token) {\r\n    return res.status(401).json({ message: \"Authentication failed\" });\r\n  }\r\n  jwt.verify(token, jwtOptions.secretOrKey, (err, user) => {\r\n    if (err) {\r\n      // 토큰 검증 실패 시\r\n      return res.status(403).json({ message: \"Invalid token\" });\r\n    }\r\n    req.user = user; // 검증된 사용자 정보를 요청 객체에 저장\r\n    next();\r\n  });\r\n};\r\nfunction checkAdminRole(req, res, next) {\r\n  const token = req.headers.authorization;\r\n  const realtoken = token.split(\" \")[1];\r\n  try {\r\n    if (!token) {\r\n      return res.status(401).json({ message: \"No token provided.\" });\r\n    }\r\n    jwt.verify(realtoken, process.env.JWT_KEY, (err, decoded) => {\r\n      if (err) {\r\n        // return console.log(res);;\r\n        //   return res.status(403).json({ message: 'serInvalid token.' });\r\n        // }\r\n        console.error(\"JWT verification error:\", err);\r\n        return res.status(403).json({ message: \"Invalid token.\" });\r\n      }\r\n\r\n      if (decoded.Role === \"admin\") {\r\n        // 사용자 역할이 'admin'인 경우에만 다음 미들웨어 또는 라우트로 이동\r\n        next();\r\n      } else {\r\n        return res\r\n          .status(403)\r\n          .json({ message: \"Access denied: Not an admin.\" });\r\n      }\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n}\r\n\r\napp.get(\"/api/touch\", async (req, res) => {\r\n  const randomNum = Math.floor(Math.random() * 10000);\r\n  const formattedNum = String(randomNum).padStart(4, \"0\");\r\n  const insertResult = await captchaCode.insertMany({ Num: formattedNum });\r\n  res.send(insertResult[0].Num);\r\n});\r\n\r\napp.get(\"/\", (req, res) => {\r\n  const currentTime = new Date().toLocaleTimeString();\r\n  res.send(`현재 시간: ${currentTime}`);\r\n});\r\nconst socketCorsOrigin = process.env.NODE_ENV\r\n  ? \"https://www.nextriceark.site\"\r\n  : `http://localhost:3000`;\r\nconst io = new Server(httpServer, {\r\n  cors: {\r\n    origin: socketCorsOrigin,\r\n    credentials: true,\r\n  },\r\n});\r\nconst connectedClients = {};\r\napp.get(\"/api/SocketID\", async (req, res) => {\r\n  const data = Object.keys(connectedClients);\r\n  res.send(data);\r\n});\r\napp.post(\"/api/RoomList\", async (req, res) => {\r\n  let roomList = [];\r\n  let { id } = req.body;\r\n\r\n  for (let key of io.sockets.adapter.rooms.keys()) {\r\n    roomList.push(key);\r\n  }\r\n  const data = roomList.filter((element) => {\r\n    return element.split(\"___\").includes(id) && element.split(\"___\").length > 1;\r\n  });\r\n  res.send(data);\r\n});\r\nio.on(\"connection\", (socket) => {\r\n  console.log(`Client connected ${socket.id}`);\r\n  connectedClients[socket.id] = socket;\r\n  socket.on(\"join\", (roomName) => {\r\n    if (io.sockets.adapter.rooms.get(roomName) != undefined) {\r\n      !io.sockets.adapter.rooms.get(roomName).has(socket.id) &&\r\n        socket.join(roomName);\r\n    }\r\n  });\r\n  socket.on(\"chat\", (chatdata) => {\r\n    !io.sockets.adapter.rooms.has(chatdata.roomName) &&\r\n      socket.join(chatdata.roomName);\r\n    //확인된 오류 이미 조인된 상태에서 같은 생대를 클릭해서 대화 생성시 받는건되는데 주는건 안됨.- 오락가락함\r\n    chatLog.insertMany(chatdata);\r\n    console.log(\r\n      `Message from ${chatdata.roomName} ${socket.id}: ${chatdata.message}`\r\n    );\r\n    let data = {\r\n      userId: socket.id === chatdata.id ? chatdata.id : null,\r\n      content: chatdata.message,\r\n      roomName: chatdata.roomName,\r\n      date: new Date(),\r\n    };\r\n    socket.emit(\"chat2\", data);\r\n    let idSet = new Set(chatdata.roomName.split(\"___\"));\r\n    idSet.forEach((element) => {\r\n      socket.to(element).emit(\"chat2\", data);\r\n    });\r\n  });\r\n\r\n  socket.on(\"leaveRoom\", (currentRoomName) => {\r\n    let data = {\r\n      userId: `system`,\r\n      content: `${socket.id}가 나갔습니다.`,\r\n      roomName: currentRoomName,\r\n    };\r\n    let idSet = new Set(\r\n      currentRoomName.split(\"___\").filter((e) => {\r\n        return socket.id != e;\r\n      })\r\n    );\r\n    idSet.forEach((element) => {\r\n      socket.to(element).emit(\"chat2\", data);\r\n    });\r\n    if (io.sockets.adapter.rooms.has(currentRoomName)) {\r\n      const clients = io.sockets.adapter.rooms.get(currentRoomName);\r\n      if (clients) {\r\n        clients.forEach((clientId) => {\r\n          io.sockets.sockets.get(clientId).leave(currentRoomName);\r\n        });\r\n      }\r\n    }\r\n    io.sockets.adapter.del(currentRoomName);\r\n  });\r\n  socket.on(\"disconnect\", (roomName) => {\r\n    console.log(\"Client disconnected: \" + socket.id);\r\n    let roomList = Array.from(io.sockets.adapter.rooms).map((room) => {\r\n      return room[0];\r\n    });\r\n    for (let currentRoomName of roomList) {\r\n      let data = {\r\n        userId: `system`,\r\n        content: `${socket.id}가 나갔습니다. 잠시후 방이 사라집니다.`,\r\n        roomName: currentRoomName,\r\n      };\r\n      let idSet = new Set(\r\n        currentRoomName.split(\"___\").filter((e) => {\r\n          return socket.id != e;\r\n        })\r\n      );\r\n      idSet.forEach((element) => {\r\n        socket.to(element).emit(\"chat2\", data);\r\n      });\r\n      if (io.sockets.adapter.rooms.has(currentRoomName)) {\r\n        const clients = io.sockets.adapter.rooms.get(currentRoomName);\r\n        if (clients) {\r\n          clients.forEach((clientId) => {\r\n            io.sockets.sockets.get(clientId).leave(currentRoomName);\r\n          });\r\n        }\r\n      }\r\n      io.sockets.adapter.del(currentRoomName);\r\n    }\r\n    delete connectedClients[socket.id];\r\n  });\r\n});\r\napp.get(\"/api/VisitorCount\", async (req, res) => {\r\n  let totalVistor = 0;\r\n  const result = await Visited.aggregate([\r\n    {\r\n      $group: {\r\n        _id: null,\r\n        total: { $sum: \"$todayTotal\" },\r\n      },\r\n    },\r\n  ]);\r\n  if (result.length > 0) {\r\n    totalVistor = result[0].total + 1;\r\n  } else {\r\n    console.log(\"데이터가 없습니다.\");\r\n  }\r\n  const currentDate = new Date();\r\n  const year = currentDate.getFullYear();\r\n  const month = String(currentDate.getMonth() + 1).padStart(2, \"0\"); // 월을 두 자리로 표시\r\n  const day = String(currentDate.getDate()).padStart(2, \"0\"); // 일을 두 자리로 표시\r\n  const formattedDate = `${year}-${month}-${day}`;\r\n  const [todayVisitor] = await Visited.find({ Date: formattedDate });\r\n  if (todayVisitor === undefined) {\r\n    await Visited.insertMany({ Date: formattedDate });\r\n  }\r\n  await Visited.updateOne({ Date: formattedDate }, { $inc: { todayTotal: 1 } });\r\n  const VisitorData = {\r\n    Total: totalVistor,\r\n    Today: todayVisitor.todayTotal,\r\n  };\r\n  res.json(VisitorData);\r\n});\r\napp.get(\"/api/captchaCode\", async (req, res) => {\r\n  try {\r\n    const randomNum = Math.floor(Math.random() * 10000);\r\n    const formattedNum = String(randomNum).padStart(4, \"0\");\r\n    const [insertedResult] = await captchaCode.insertMany({\r\n      Num: formattedNum,\r\n    });\r\n    res.send(insertedResult.Num);\r\n  } catch (error) {\r\n    console.error(\"Error generating captcha code:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\napp.delete(\"/api/captchaCode\", async (req, res) => {\r\n  const data = req.query;\r\n\r\n  try {\r\n    await captchaCode.deleteMany({\r\n      Num: data.captchaCode,\r\n    });\r\n    res.status(201).json({ message: \"Data updated successfully\" });\r\n  } catch (error) {\r\n    console.error(\"Error generating captcha code:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.get(\"/api/data\", async (req, res) => {\r\n  const marketLists = await marketList.find({});\r\n  res.json(marketLists);\r\n});\r\n\r\napp.get(\"/api/load\", async (req, res) => {\r\n  const MarketItems = await MarketItem.find({});\r\n  res.json(MarketItems);\r\n});\r\napp.get(\"/api/trade\", async (req, res) => {\r\n  const MarketItems = await trading_data.find({});\r\n  res.json(MarketItems);\r\n});\r\n\r\napp.get(\"/api/loadreport\", async (req, res) => {\r\n  const Reports = await Report.find({});\r\n  res.json(Reports);\r\n});\r\n\r\napp.post(\"/api/Login\", async (req, res) => {\r\n  const { ID, Password } = req.body;\r\n  const user = await User.findOne({ ID: ID, Password: Password });\r\n\r\n  if (user) {\r\n    const payload = {\r\n      ID: user.ID,\r\n      Role: user.Role,\r\n      iat: Math.floor(Date.now() / 1000),\r\n      exp: Math.floor(Date.now() / 1000) + 60 * 60,\r\n    };\r\n    const token = jwt.sign(payload, jwtOptions.secretOrKey);\r\n    const expirationDate = new Date(); // 수정된 부분\r\n    expirationDate.setDate(expirationDate.getDate() + 1);\r\n    res.cookie(\"token\", token, {\r\n      expires: expirationDate,\r\n      sameSite: \"None\",\r\n      secure: true,\r\n      httpOnly: true,\r\n    });\r\n    res.json({ token });\r\n  } else {\r\n    res.status(401).json({ message: \"Authentication failed\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/check\", async (req, res) => {\r\n  const user = req.body;\r\n  try {\r\n    const existingUser = await User.findOne({ ID: user.Item.ID });\r\n    if (!existingUser) {\r\n      res.json(false);\r\n    } else {\r\n      res.json(true);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/signup\", async (req, res) => {\r\n  const user = req.body;\r\n\r\n  const existingpass2 = await captchaCode.deleteMany({ Num: user.Pass });\r\n  if (existingpass2.deletedCount > 0) {\r\n    try {\r\n      const existingUser = await User.findOne({ ID: user.Item.ID });\r\n      if (!existingUser) {\r\n        if (user.Item.ID === \"adminim\") {\r\n          user.Item.Role = \"admin\";\r\n        } else {\r\n          user.Item.Role = \"user\";\r\n        }\r\n\r\n        const newUser = await User.insertMany(user.Item);\r\n        console.log(newUser);\r\n        res.status(201).json({ message: \"Data updated successfully\" });\r\n      } else {\r\n        res.status(409).json({ error: \"User with this ID already exists\" });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error updating data:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\napp.post(\"/api/forget\", async (req, res) => {\r\n  const user = req.body;\r\n  try {\r\n    const existingUser = await User.findOne({ ID: user.Item.ID });\r\n    if (existingUser) {\r\n      res.json(existingUser.Question);\r\n    } else {\r\n      res.status(409).json({ error: \"User with this ID already exists\" });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\napp.post(\"/api/forget2\", async (req, res) => {\r\n  const user = req.body;\r\n  try {\r\n    const existingUser = await User.findOne({\r\n      ID: user.Item.ID,\r\n      Question: user.Item.Question,\r\n      Answer: user.Item.Answer,\r\n    });\r\n    if (existingUser) {\r\n      res.json(existingUser.Password);\r\n    } else {\r\n      res.status(409).json({ error: \"User with this ID already exists\" });\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\napp.post(\"/api/delete1\", async (req, res) => {\r\n  const list = req.body;\r\n  const token = req.headers.authorization;\r\n  const realtoken = token.split(\" \")[1];\r\n  const decoded = jwt.verify(realtoken, process.env.JWT_KEY);\r\n  if (decoded.ID === list.Item.ID) {\r\n    try {\r\n      const result = await MarketItem.deleteOne({ _id: list.Item._id });\r\n\r\n      if (result.deletedCount === 1) {\r\n        console.log(\"Document deleted successfully\");\r\n        res.status(200).json(\"True\");\r\n      } else {\r\n        console.log(\"Document not found\");\r\n        res.status(404).json({ message: \"Document not found\" });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error deleting document:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\n\r\napp.post(\"/api/report\", async (req, res) => {\r\n  const lists = req.body;\r\n  const existingpass = await captchaCode.find({ Num: lists.Pass });\r\n  if (existingpass.length > 0) {\r\n    await captchaCode.deleteMany({ Num: lists.Pass });\r\n    try {\r\n      console.log(lists.Item);\r\n      await Report.insertMany(lists.Item);\r\n      res.status(200).json({ message: \"Data updated successfully\" });\r\n      console.log(lists);\r\n    } catch (error) {\r\n      console.error(\"Error updating data:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\n\r\napp.post(\"/api/reportdel\", checkAdminRole, async (req, res) => {\r\n  const lists = req.body;\r\n  console.log(lists);\r\n\r\n  try {\r\n    await Report.deleteOne({ Title: lists.Title, Body: lists.Body });\r\n    res.status(200).json(\"True\");\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/update\", async (req, res) => {\r\n  const { lists } = req.body;\r\n  try {\r\n    await MarketItem.deleteMany();\r\n    await MarketItem.insertMany(lists.lists.map((item) => item));\r\n    res.status(200).json({ message: \"Data updated successfully\" });\r\n    console.log(lists);\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/list\", async (req, res) => {\r\n  const list = req.body;\r\n  const existingCaptchaCode = await captchaCode.find({ Num: list.captchaCode });\r\n  if (existingCaptchaCode.length > 0) {\r\n    await captchaCode.deleteMany({ Num: list.captchaCode });\r\n    try {\r\n      const insertResult = await MarketItem.insertMany(list.Item);\r\n      console.log(insertResult);\r\n      res.json({ message: \"Data updated successfully\" });\r\n    } catch (error) {\r\n      console.error(\"Error updating data:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\n\r\napp.get(\"/api/Board/check\", async (req, res) => {\r\n  const data = req.query;\r\n  const query = {\r\n    _id: data._id,\r\n  };\r\n  if (data.ID === \"adminim\") {\r\n  } else {\r\n    query.FakePassWord = data.InputFakePassWord;\r\n  }\r\n  const existingText = await Text.find(query);\r\n  if (existingText.length > 0) {\r\n    res.json(true);\r\n  } else {\r\n    res.json(false);\r\n  }\r\n});\r\n\r\napp.get(\"/api/Board\", async (req, res) => {\r\n  try {\r\n    const TextList = await Text.find({}, { FakePassWord: 0 });\r\n    res.json(TextList);\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/Board\", async (req, res) => {\r\n  const existingCaptchaCode = await captchaCode.find({\r\n    Num: req.body.CaptchaCode,\r\n  });\r\n  if (existingCaptchaCode.length > 0) {\r\n    await captchaCode.deleteMany({ Num: req.body.CaptchaCode });\r\n    try {\r\n      const insertResult = await Text.insertMany(req.body.Text);\r\n      res.json({ message: \"Data updated successfully\" });\r\n    } catch (error) {\r\n      console.error(\"Error updating data:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\n\r\napp.delete(\"/api/Board\", async (req, res) => {\r\n  const data = req.query;\r\n  const query = {\r\n    _id: data._id,\r\n  };\r\n  if (data.InputFakePassWord !== \"undefined\") {\r\n    query.FakePassWord = data.InputFakePassWord;\r\n  } else {\r\n    if (data.ID === \"adminim\") {\r\n    } else {\r\n      query.ID = data.ID;\r\n    }\r\n  }\r\n  try {\r\n    const existingText = await Text.deleteMany(query);\r\n    if (existingText.length > 0) {\r\n      res.json({ message: \"Data deleted successfully\" });\r\n    } else {\r\n      res.json(false);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.patch(\"/api/Board\", async (req, res) => {\r\n  const data = req.body;\r\n  const { _id, TextTitle, TextBody, Category, Category2, ID } = data;\r\n  try {\r\n    await Text.findByIdAndUpdate(_id, {\r\n      $set: { TextTitle, TextBody, Category },\r\n    });\r\n    res.json({ message: \"Data updated successfully\" });\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\n\r\napp.post(\"/api/update3\", async (req, res) => {\r\n  const list = req.body;\r\n  console.log(list);\r\n  try {\r\n    const deleteedResult = await hasitem.deleteMany({ ID: list.ID });\r\n    const insertResult = await hasitem.insertMany(list);\r\n    console.log(insertResult);\r\n    res.status(200).json({ message: \"Data updated successfully\" });\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\napp.post(\"/api/hasitemload\", async (req, res) => {\r\n  const list = req.body;\r\n  console.log(list);\r\n  try {\r\n    const insertResult = await hasitem.find({ ID: list.ID });\r\n    res.json(insertResult);\r\n  } catch (error) {\r\n    console.error(\"Error updating data:\", error);\r\n    res.status(500).json({ error: \"Internal server error\" });\r\n  }\r\n});\r\napp.post(\"/api/update2\", async (req, res) => {\r\n  const list = req.body;\r\n  const token = req.headers.authorization;\r\n  const realtoken = token.split(\" \")[1];\r\n  const decoded = jwt.verify(realtoken, process.env.JWT_KEY);\r\n  if (decoded.ID === list.Item.ID) {\r\n    try {\r\n      const insertResult = await MarketItem.updateOne(\r\n        { _id: list.Item._id },\r\n        {\r\n          $set: {\r\n            Title: list.Item.Title,\r\n            List: list.Item.List,\r\n            Category: list.Item.Category,\r\n          },\r\n        }\r\n      );\r\n      res.status(200).json({ message: \"Data updated successfully\" });\r\n    } catch (error) {\r\n      console.error(\"Error updating data:\", error);\r\n      res.status(500).json({ error: \"Internal server error\" });\r\n    }\r\n  }\r\n});\r\nasync function getMarketData() {\r\n  const currentDate = new Date();\r\n  const year = currentDate.getFullYear();\r\n  const month = String(currentDate.getMonth() + 1).padStart(2, \"0\");\r\n  const day = String(currentDate.getDate()).padStart(2, \"0\");\r\n  const formattedDate = `${year}-${month}-${day}`;\r\n  const [todayVisitor] = await Visited.find({ Date: formattedDate });\r\n  if (todayVisitor === undefined) {\r\n    await Visited.insertMany({ Date: formattedDate });\r\n  }\r\n  fetchDataAndUpdate();\r\n}\r\ngetMarketData();\r\nconst now = new Date();\r\nconst tomorrow = new Date(now);\r\ntomorrow.setDate(now.getDate() + 1);\r\ntomorrow.setHours(1, 0, 0);\r\nconst interval = 24 * 60 * 60 * 1000; // 24시간\r\nsetInterval(getMarketData, interval);\r\nhttpServer.listen(port, () => {\r\n  console.log(`server running at http://localhost:${port}`);\r\n});\r\n"],"names":["axios","require","authorizationToken","process","env","API_KEY","searchdata","Category","CategoryCode","PageNum","newarray","getMakeList","e","getPageData","pageNo","config","method","url","headers","accept","authorization","data","PageNo","response","itemsToExclude","filteredItems","Items","filter","item","includes","Name","error","console","log","Grade","BundleCount","delay","ms","Promise","resolve","setTimeout","fetchData","promises","Error","status","i","push","resultArrays","all","list","flat","newlist","map","condition","resultList","result","YDayAvgPrice","avg","avghonor","Id","Icon","TradeRemainCount","RecentPrice","CurrentMinPrice","module","exports","ItemLevelMin","ItemLevelMax","ItemGradeQuality","SkillOptions","FirstOption","SecondOption","MinValue","MaxValue","EtcOptions","Sort","CharacterClass","ItemTier","ItemGrade","ItemName","SortCondition","loadjem","AuctionInfo","BuyPrice","sum","reduce","total","num","countNonNullElements","arr","count","length","nonNullCount","jem","etc","__v","toFixed","mongoose","trading_data","marketList","connect","DB_USER","DB_PASSWORD","DB_NAME","useNewUrlParser","useUnifiedTopology","then","catch","err","loadtrade","IdList","find","$gt","processDataWithDelay","lists","a","b","existingDoc","findOne","existingDocStats","Stats","listStats","forEach","listStat","existingStatIndex","findIndex","stat","Date","updatedDocument","findOneAndUpdate","$set","sort","new","newDocument","create","fetchDataAndUpdate","captchaCodeSchema","Schema","Num","String","expiresTime","type","expires","default","now","captchaCode","model","collection","createIndex","expireAfterSeconds","ChatLogSchema","date","roomName","id","message","chatLog","HasItemSchema","_id","grade","forwho","category","Object","skill","panalty","location","HasItemListsSchema","ID","Item","HasItem","ItemSchema","Number","Quantity","Quantity2","ContentListsSchema","required","Title","List","MarketItem","marketListSchema","ReportSchema","Body","Report","TextSchema","TextTitle","maxlength","TextBody","Category2","FakeID","FakePassWord","Text","trading_dataSchema","UserSchema","Password","Question","Answer","Role","User","visitedSchema","todayTotal","Visited","express","cors","app","createServer","Server","port","normalizePort","PORT","set","debug","httpServer","on","onError","onListening","hasitem","passport","passportJWT","JwtStrategy","Strategy","ExtractJwt","jwt","winston","cookieParser","logger","nunjucks","path","bodyParser","use","urlencoded","extended","json","initialize","origin","credentials","val","parseInt","isNaN","syscall","bind","code","exit","addr","address","jwtOptions","jwtFromRequest","fromAuthHeaderAsBearerToken","secretOrKey","JWT_KEY","strategy","jwt_payload","done","existingUser","res","authenticateToken","req","next","token","cookies","verify","user","checkAdminRole","realtoken","split","decoded","get","randomNum","Math","floor","random","formattedNum","padStart","insertResult","insertMany","send","currentTime","toLocaleTimeString","socketCorsOrigin","NODE_ENV","io","connectedClients","keys","post","roomList","body","key","sockets","adapter","rooms","element","socket","undefined","has","join","chatdata","userId","content","emit","idSet","Set","to","currentRoomName","clients","clientId","leave","del","Array","from","room","totalVistor","aggregate","$group","$sum","currentDate","year","getFullYear","month","getMonth","day","getDate","formattedDate","todayVisitor","updateOne","$inc","VisitorData","Total","Today","insertedResult","delete","query","deleteMany","marketLists","MarketItems","Reports","payload","iat","exp","sign","expirationDate","setDate","cookie","sameSite","secure","httpOnly","existingpass2","Pass","deletedCount","newUser","deleteOne","existingpass","existingCaptchaCode","InputFakePassWord","existingText","TextList","CaptchaCode","patch","findByIdAndUpdate","deleteedResult","getMarketData","tomorrow","setHours","interval","setInterval","listen"],"sourceRoot":""}